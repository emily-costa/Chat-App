(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return a}));var r=n("WVRz"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("WVRz"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),p=new s.b("@firebase/database"),d=(e=1,function(){return e++}),g=function(t){var e=Object(o.I)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=v.apply(null,i):n+="object"==typeof i?Object(o.J)(i):i,n+=" "}return n},y=null,m=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=s.a.VERBOSE,y=p.log.bind(p),e&&f.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===y&&!0===f.get("logging_enabled")&&b(!0)),y){var n=v.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(i.f)(t));p.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(i.f)(t));throw p.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(i.f)(t));p.warn(n)},I=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",S="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===T||e===S)return-1;if(e===T||t===S)return 1;var n=K(t),r=K(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},x=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.J)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(o.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.J)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},j=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P,D,M,L,F,V,U,q,B,H,z=function(t){var e,n,r,i,s;Object(o.f)(!I(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},W=new RegExp("^-?(0*)\\d{1,10}$"),K=function(t){if(W.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(t){try{t()}catch(e){setTimeout((function(){throw O("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},Q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),Y=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.H)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.H)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.H)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),J="firebaseio.com",Z="websocket",$="long_polling",tt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.f)("string"==typeof t,"typeof type must == string"),Object(o.f)("object"==typeof e,"typeof params must == object"),t===Z)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==$)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return R(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new X(n.pathString)}},nt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!I(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},ct=function(t,e,n,r,i){i&&void 0===n||lt(Object(o.o)(t,e,i),n,r)},lt=function(t,e,n){var r=n instanceof X?new Y(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(I(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.H)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),lt(t,n,r),r.pop()})),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ht=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.o)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,(function(t,e){var n=new X(t);if(lt(s,e,r.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ft=function(t,e,n,r){if(!r||void 0!==n){if(I(n))throw new Error(Object(o.o)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.o)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},dt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gt(t,e,n,r)},yt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},mt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(Object(o.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e,r)+"must be a boolean.")},_t=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.K)("OnDisconnect.cancel",0,1,arguments.length),Object(o.L)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.K)("OnDisconnect.remove",0,1,arguments.length),yt("OnDisconnect.remove",this.path_),Object(o.L)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.K)("OnDisconnect.set",1,2,arguments.length),yt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.L)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.K)("OnDisconnect.setWithPriority",2,3,arguments.length),yt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ft("OnDisconnect.setWithPriority",2,e,!1),Object(o.L)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.K)("OnDisconnect.update",1,2,arguments.length),yt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("OnDisconnect.update",1,t,this.path_,!1),Object(o.L)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ct=(P="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",D=0,M=[],function(t){var e,n=t===D;D=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=P.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===M[e];e--)M[e]=0;M[e]++}else for(e=0;e<12;e++)M[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=P.charAt(M[e]);return Object(o.f)(20===i.length,"nextPushId: Length should be 20."),i}),Et=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ot=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Et(T,t),r=new Et(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Et.MIN},t}(),It=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return L},set:function(t){L=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return new Et(S,L)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Et(t,L)},e.prototype.toString=function(){return".key"},e}(Ot),Tt=new It,St=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},At=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===F||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===F||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},kt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),At(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return V},set:function(t){V=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+St(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return new Et(S,new kt("[PRIORITY-POST]",q))},e.prototype.makePost=function(t,e){var n=U(t);return new Et(e,new kt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ot)),Nt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),jt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Pt.EMPTY_NODE,this.right=null!=o?o:Pt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Pt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Pt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new jt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Pt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Nt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Nt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}(),Dt=Math.log(2),Mt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Dt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Lt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new jt(s,o.node,jt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new jt(s,o.node,jt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new jt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,jt.BLACK):(a(h,jt.BLACK),a(h,jt.RED))}return o}(new Mt(t.length));return new Pt(r||e,o)},Ft={},Vt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(Ft&&xt,"ChildrenNode.ts has not been loaded"),B=B||new t({".priority":Ft},{".priority":xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Pt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==Tt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Et.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Lt(s,e.getCompare()):Ft;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.E)(this.indexes_,(function(t,i){var s=Object(o.G)(r.indexSet_,i);if(Object(o.f)(s,"Missing index implementation for "+i),t===Ft){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Et.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Lt(a,s.getCompare())}return Ft}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Et(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.E)(this.indexes_,(function(t){if(t===Ft)return t;var r=n.get(e.name);return r?t.remove(new Et(e.name,r)):t})),this.indexSet_)},t}();function Ut(t,e){return A(t.name,e.name)}function qt(t,e){return A(t,e)}var Bt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&At(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return H||(H=new t(new Pt(qt),null,Vt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||H},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?H:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Et(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?H:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.f)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(xt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+St(this.getPriority().val())+":"),this.forEachChild(xt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Et(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Et(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Et(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Et.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Et.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Ht?-1:0},t.prototype.withIndex=function(e){if(e===Tt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Tt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(xt),r=e.getIterator(xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Tt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Ht=new(function(t){function e(){return t.call(this,new Pt(qt),Bt.EMPTY_NODE,Vt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Bt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Bt));function zt(t,e){if(void 0===e&&(e=null),null===t)return Bt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new kt(t,zt(e));if(t instanceof Array){var n=Bt.EMPTY_NODE;return R(t,(function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=zt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(zt(e))}var r=[],i=!1;if(R(t,(function(t,e){if("."!==t.substring(0,1)){var n=zt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Et(t,n)))}})),0===r.length)return Bt.EMPTY_NODE;var s=Lt(r,Ut,(function(t){return t.name}),qt);if(i){var a=Lt(r,xt.getCompare());return new Bt(s,zt(e),new Vt({".priority":a},{".priority":xt}))}return new Bt(s,zt(e),Vt.Default)}Object.defineProperties(Et,{MIN:{value:new Et(T,Bt.EMPTY_NODE)},MAX:{value:new Et(S,Ht)}}),It.__EMPTY_NODE=Bt.EMPTY_NODE,kt.__childrenNodeConstructor=Bt,F=Ht,q=Ht,U=zt;var Wt,Kt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Et.MIN},e.prototype.maxPost=function(){return Et.MAX},e.prototype.makePost=function(t,e){var n=zt(t);return new Et(e,n)},e.prototype.toString=function(){return".value"},e}(Ot)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=zt(t),r=Bt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Et(e,r)},e.prototype.maxPost=function(){var t=Bt.EMPTY_NODE.updateChild(this.indexPath_,Ht);return new Et(S,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ot),Qt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),gt("DataSnapshot.child",1,e,!1);var n=new X(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,xt)},t.prototype.hasChild=function(t){Object(o.K)("DataSnapshot.hasChild",1,1,arguments.length),gt("DataSnapshot.hasChild",1,t,!1);var e=new X(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.K)("DataSnapshot.forEach",1,1,arguments.length),Object(o.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),xt))}))},t.prototype.hasChildren=function(){return Object(o.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Xt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.J)(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Jt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xt("value",this,new Qt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Xt(t.type,this,new Qt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),$t=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(Wt,"Reference.ts has not been loaded"),Wt},set:function(t){Wt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Tt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==S)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===xt){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof Gt||t.getIndex()===Kt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.K)("Query.on",2,4,arguments.length),pt("Query.on",1,e,!1),Object(o.L)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Jt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Zt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.K)("Query.off",0,3,arguments.length),pt("Query.off",1,t,!0),Object(o.L)("Query.off",2,e,!0),Object(o.M)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Jt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Zt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.K)("Query.once",1,4,arguments.length),pt("Query.once",1,e,!1),Object(o.L)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.K)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');gt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Gt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Tt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(xt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),dt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),dt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.K)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),dt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.K)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.L)(t,3,r.cancel,!0),r.context=n,Object(o.M)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new kt(a,zt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new kt(o))),u.forEachChild(xt,(function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var ue,ce,le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(xt,(function(t,e){n.remember(new X(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new X(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),he=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),fe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.f)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=he.ACK_USER_WRITE,this.source=fe.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(e));return new t(X.Empty,n,this.revert)}return Object(o.f)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),de=function(){function t(t,e){void 0===e&&(ue||(ue=new Pt(k)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return R(e,(function(t,e){n=n.set(new X(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:X.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new X(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(X.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,X.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,X.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(X.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),ge=function(){function t(t,e){this.source=t,this.path=e,this.type=he.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty):new t(this.source,this.path.popFront())},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=he.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=he.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new ve(this.source,X.Empty,n.value):new t(this.source,X.Empty,n)}return Object(o.f)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),me=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),be=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new me(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new me(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new me(Bt.EMPTY_NODE,!1,!1),new me(Bt.EMPTY_NODE,!1,!1)),t}(),_e=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(_e.childRemovedChange(e,a)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(_e.childAddedChange(e,n)):s.trackChildChange(_e.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(xt,(function(t,r){e.hasChild(t)||n.trackChildChange(_e.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(xt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(_e.childChangedChange(e,r,i))}else n.trackChildChange(_e.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Bt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Ce=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)(e===_e.CHILD_ADDED||e===_e.CHILD_CHANGED||e===_e.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===_e.CHILD_ADDED&&i===_e.CHILD_REMOVED)this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_ADDED)this.changeMap.delete(n);else if(e===_e.CHILD_REMOVED&&i===_e.CHILD_CHANGED)this.changeMap.set(n,_e.childRemovedChange(n,r.oldSnap));else if(e===_e.CHILD_CHANGED&&i===_e.CHILD_ADDED)this.changeMap.set(n,_e.childAddedChange(n,t.snapshotNode));else{if(e!==_e.CHILD_CHANGED||i!==_e.CHILD_CHANGED)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,_e.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ee=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Oe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new me(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ie=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Te=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.f)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.f)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ce;if(n.type===he.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===he.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===he.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==he.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Ie(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(_e.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.f)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof Bt?c:Bt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.f)(1===e.getLength(),"Can't have a priority with additional path components");var p=s.getNode();u=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,u);a=null!=d?this.filter_.updatePriority(p,d):s.getNode()}else{var g=e.popFront(),v=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(f).updateChild(g,y):s.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(s.getNode(),f,v,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,Ee,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Oe(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Oe(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):Bt.EMPTY_NODE}if(f.equals(p))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:de.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new X(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new X(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=de.Empty;return a.getNode().forEachChild(Tt,(function(t,e){u=u.set(new X(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=de.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ee,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Oe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.f)(h instanceof Bt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Bt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Se=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===_e.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(_e.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,_e.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,_e.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,_e.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,_e.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,_e.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.g)("Should only compare child_ events.");var n=new Et(t.childName,t.snapshotNode),r=new Et(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Ae=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Te(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Bt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Bt.EMPTY_NODE,s.getNode(),null),c=new me(a,o.isFullyInitialized(),r.filtersNodes()),l=new me(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new be(l,c),this.eventGenerator_=new Se(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.f)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===he.MERGE&&null!==t.source.queryId&&(Object(o.f)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.f)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.f)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(xt,(function(t,e){n.push(_e.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(_e.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),ke=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.f)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.f)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Bt?(a=n.calcCompleteEventChildren(r),u=!1):(a=Bt.EMPTY_NODE,u=!1);var c=new be(new me(a,u,!1),new me(r,i,!1));s=new Ae(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var p,d=Object(i.e)(f.value,2),g=d[0];c=c.concat((p=d[1]).removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(g),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery()))}}catch(v){o={error:v}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(p=this.views.get(a))&&(c=c.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),xe=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new de(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=X.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new de(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return R(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,de.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(X.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(xt,(function(e,n){t.push(new Et(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Et(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new de(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.f)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(e.child(n),s,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(X.Empty,this.writeTree_,t)},t.Empty=new t(new de(null)),t}(),Ne=function(){function t(){this.visibleWrites_=xe.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new je(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.f)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.f)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):R(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(X.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Bt.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(X.Empty)?a.apply(n||Bt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Bt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(xt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(xt,(function(t,e){var r=i.childCompoundWrite(new X(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.f)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(X.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=xe.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=X.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=X.relativePath(a,n),r=r.addWrite(X.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(n.contains(a))u=X.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=X.relativePath(a,n)).isEmpty())r=r.addWrites(X.Empty,s.children);else{var c=Object(o.G)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=r.addWrite(X.Empty,l)}}}}}return r},t}(),je=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Re=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=de.Empty,this.pendingWriteTree_=new Ne,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ve(fe.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=de.fromObject(e);return this.applyOperationToSyncPoints_(new ye(fe.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=de.Empty;return null!=n.snap?r=r.set(X.Empty,!0):R(n.children,(function(t,e){r=r.set(new X(t),e)})),this.applyOperationToSyncPoints_(new pe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ve(fe.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=de.fromObject(e);return this.applyOperationToSyncPoints_(new ye(fe.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ge(fe.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=X.relativePath(s,e),c=new ve(fe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=X.relativePath(s,e),c=de.fromObject(n),l=new ye(fe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=X.relativePath(o,e),u=new ge(fe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=X.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(X.Empty)):(u=new ke,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Bt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(X.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.f)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var g=p[d],v=g.getQuery(),y=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=X.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),R(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.f)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),R(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Bt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.f)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(X.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(X.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Pe=function(){function t(){this.rootNode_=Bt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),De=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),Me=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new De),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Le=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Fe=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Le(t);var n=1e4+2e4*Math.random();Q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,(function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ve=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ue(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ue=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();y&&_("event: "+e.toString()),G(n)}}},t.prototype.getPath=function(){return this.path_},t}(),qe=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Be=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(qe),He=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.x)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(qe),ze=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&G((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),We="start",Ke="close",Ge=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Me.getCollection(e),this.urlFn=function(t){return e.connectionURL($,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ze(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Qe((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===We)n.id=s,n.password=a;else{if(o!==Ke)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(J)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.z)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=j(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Qe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=d(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.z)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Xe="";function Ye(t){Xe=t}var Je=null;"undefined"!=typeof MozWebSocket?Je=MozWebSocket:"undefined"!=typeof WebSocket&&(Je=WebSocket);var Ze=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Me.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.z)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(J)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Z,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.z)()){var r={headers:{"User-Agent":"Firebase/5/"+Xe+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Je(this.connURL,[],r)}else this.mySock=new Je(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Je&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=j(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),$e=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ge,Ze]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Ze&&Ze.isAvailable(),s=o&&!Ze.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),tn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new $e(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Q((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=x("t",t),n=x("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=x("t",t),n=x("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=x("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Q((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),en=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),nn=1e3,rn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=nn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Be.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&He.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.J)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.f)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new tn(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&O(e),h())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.u)(this.interruptReasons_)&&(this.reconnectDelay_=nn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return N(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new X(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Xe.replace(/\./g,"-")]=1,Object(o.x)()?t["framework.cordova"]=1:Object(o.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=He.getInstance().currentlyOnline();return Object(o.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(en),on=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.G)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.F)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.D)(u.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&O("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(en),sn="repo_interrupt",an=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new le,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Me.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new on(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.J)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new rn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=Me.getOrCreateReporter(this.repoInfo_,(function(){return new Fe(t.stats_,t.server_)})),this.transactionsInit_(),this.infoData_=new Pe,this.infoSyncTree_=new Re({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Re({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new X(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.E)(e,(function(t){return zt(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=zt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.E)(e,(function(t){return zt(t)}));s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=zt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;R(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new X("/.info/"+t),r=zt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then((function(n){var r=zt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){e.log_("get for query "+Object(o.J)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Qt(r,t.getRef(),t.getQueryParams().getIndex()))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=zt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(R(e,(function(e,n){i=!1,s[e]=oe(t.child(e),zt(n),r.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),R(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new le;this.onDisconnect_.forEachTree(X.Empty,(function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(X.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new le,this.eventQueue_.raiseEventsForChangedPath(X.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=zt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=zt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.u)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&R(e,(function(e,n){var i=zt(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(sn)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(sn)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Le(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);R(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&G((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new bn(this))},enumerable:!1,configurable:!0}),t}(),un=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Et(e,n))||(n=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Bt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Bt.EMPTY_NODE);var i=this;return e.forEachChild(xt,(function(t,e){i.matches(new Et(t,e))||(r=r.updateImmediateChild(t,Bt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),cn=function(){function t(t){this.rangedFilter_=new un(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Et(e,n))||(n=Bt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Bt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Bt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Bt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new Et(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:s(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(_e.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(_e.childRemovedChange(e,f));var g=u.updateImmediateChild(e,Bt.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(_e.childAddedChange(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(_e.childRemovedChange(l.name,l.node)),i.trackChildChange(_e.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Bt.EMPTY_NODE)):t},t}(),ln=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:S},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==xt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===xt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new cn(this):new un(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===xt?e=n.PRIORITY_INDEX:this.index_===Kt?e=n.VALUE_INDEX:this.index_===Tt?e=n.KEY_INDEX:(Object(o.f)(this.index_ instanceof Gt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.J)(e),this.startSet_&&(r[n.START_AT]=Object(o.J)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.J)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.J)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.J)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),hn=function(t){function e(e,n){if(!(e instanceof an))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,ln.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.K)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof X||(null===this.path.getFront()?vt("Reference.child",1,t,!1):gt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.K)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.K)("Reference.set",1,2,arguments.length),yt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.L)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.K)("Reference.update",1,2,arguments.length),yt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ht("Reference.update",1,t,this.path,!1),Object(o.L)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.K)("Reference.setWithPriority",2,3,arguments.length),yt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ft("Reference.setWithPriority",2,e,!1),Object(o.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.K)("Reference.remove",0,1,arguments.length),yt("Reference.remove",this.path),Object(o.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.K)("Reference.transaction",1,3,arguments.length),yt("Reference.transaction",this.path),Object(o.L)("Reference.transaction",1,t,!1),Object(o.L)("Reference.transaction",2,e,!0),bt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.K)("Reference.setPriority",1,2,arguments.length),yt("Reference.setPriority",this.path),ft("Reference.setPriority",1,t,!1),Object(o.L)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.K)("Reference.push",0,2,arguments.length),yt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.L)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Ct(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return yt("Reference.onDisconnect",this.path),new _t(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}($t);$t.__referenceConstructor=hn,ke.__referenceConstructor=hn;var fn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),pn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new fn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof X?e:new X(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.G)(r.node_.children,i)||new fn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.f)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;R(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.k)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),dn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});an.MAX_TRANSACTION_RETRIES_=25,an.prototype.transactionsInit_=function(){this.transactionQueueTree_=new pn},an.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new hn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:d(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Qt(a.currentInputSnapshot,new hn(this,a.path),xt);a.onComplete(null,!1,l)}}else{lt("transaction failed: Data returned ",c,a.path),a.status=dn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var p=void 0;"object"==typeof c&&null!==c&&Object(o.k)(c,".priority")?(p=Object(o.G)(c,".priority"),Object(o.f)(ut(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Bt.EMPTY_NODE).getPriority().val(),p=p;var g=this.generateServerValues(),v=zt(c,p),y=se(v,u,g);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,y,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},an.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Bt.EMPTY_NODE},an.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===dn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},an.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.f)(c.status===dn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=dn.SENT,c.retryCount++;var l=X.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=dn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new hn(n,e[s].path),c=new Qt(a,u,xt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)G(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===dn.SENT_NEEDS_ABORT?dn.NEEDS_ABORT:dn.RUN;else for(O("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=dn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},an.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},an.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===dn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=X.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.f)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===dn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===dn.RUN)if(a.retryCount>=an.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){lt("transaction failed: Data returned ",f,a.path);var p=zt(f);"object"==typeof f&&null!=f&&Object(o.k)(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=a.currentWriteId,g=this.generateServerValues(),v=se(p,h,g);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=dn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var y=new hn(this,t[s].path),m=new Qt(t[s].currentInputSnapshot,y,xt);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)G(n[s]);this.sendReadyTransactions_()}},an.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},an.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},an.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},an.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==dn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},an.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},an.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===dn.SENT_NEEDS_ABORT||(e[s].status===dn.SENT?(Object(o.f)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=dn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.f)(e[s].status===dn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)G(n[s])}};var gn,vn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),yn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),mn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return gn||(gn=new t),gn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new yn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new yn:new vn(t,e);return mt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||E("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.G)(this.repos_,t.app.name);e&&Object(o.G)(e,t.key)===t||E("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.G)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.G)(r,t.toURLString());return i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new an(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),bn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.checkDeleted_("delete"),mn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof an||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new hn(this.repo_,X.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):mn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.K)("database.ref",0,1,arguments.length),t instanceof hn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.K)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);mt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),_n=Object.freeze({__proto__:null,forceLongPolling:function(){Ze.forceDisallow(),Ge.forceAllow()},forceWebSockets:function(){Ge.forceDisallow()},isWebSocketsAvailable:function(){return Ze.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Ye(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:mn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),wn=rn;rn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},rn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Cn=Object.freeze({__proto__:null,DataConnection:wn,RealTimeConnection:tn,hijackHash:function(t){var e=rn.prototype.put;return rn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){rn.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){mn.getInstance().forceRestClient(t)}}),En=bn.ServerValue;!function(e){Ye(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return mn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:hn,Query:$t,Database:bn,DataSnapshot:Qt,enableLogging:b,INTERNAL:_n,ServerValue:En,TEST_ACCESS:Cn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.z)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.1.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WVRz:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return Zo})),n.d(e,"b",(function(){return Du})),n.d(e,"c",(function(){return xu})),n.d(e,"d",(function(){return Au})),n.d(e,"e",(function(){return ku})),n.d(e,"f",(function(){return Ic})),n.d(e,"g",(function(){return gc})),n.d(e,"h",(function(){return io})),n.d(e,"i",(function(){return Ku})),n.d(e,"j",(function(){return Ea})),n.d(e,"k",(function(){return Fu})),n.d(e,"l",(function(){return Oa})),n.d(e,"m",(function(){return Pn})),n.d(e,"n",(function(){return cu})),n.d(e,"o",(function(){return nt})),n.d(e,"p",(function(){return _})),n.d(e,"q",(function(){return et})),n.d(e,"r",(function(){return xo})),n.d(e,"s",(function(){return Ha})),n.d(e,"t",(function(){return za})),n.d(e,"u",(function(){return Lu})),n.d(e,"v",(function(){return yt})),n.d(e,"w",(function(){return yc})),n.d(e,"x",(function(){return vt})),n.d(e,"y",(function(){return lc})),n.d(e,"z",(function(){return Xu})),n.d(e,"A",(function(){return w})),n.d(e,"B",(function(){return Pu})),n.d(e,"C",(function(){return Ru})),n.d(e,"D",(function(){return Yo})),n.d(e,"E",(function(){return Aa})),n.d(e,"F",(function(){return Ta})),n.d(e,"G",(function(){return Sa})),n.d(e,"H",(function(){return xa})),n.d(e,"I",(function(){return Cr})),n.d(e,"J",(function(){return E})),n.d(e,"K",(function(){return _c})),n.d(e,"L",(function(){return Qa})),n.d(e,"M",(function(){return rc})),n.d(e,"N",(function(){return so})),n.d(e,"O",(function(){return ja})),n.d(e,"P",(function(){return Na})),n.d(e,"Q",(function(){return Ya})),n.d(e,"R",(function(){return Tt})),n.d(e,"S",(function(){return hc})),n.d(e,"T",(function(){return Zn})),n.d(e,"U",(function(){return U})),n.d(e,"V",(function(){return Jn})),n.d(e,"W",(function(){return Ec})),n.d(e,"X",(function(){return sc})),n.d(e,"Y",(function(){return Mu})),n.d(e,"Z",(function(){return vo})),n.d(e,"ab",(function(){return ca})),n.d(e,"bb",(function(){return _r})),n.d(e,"cb",(function(){return rr})),n.d(e,"db",(function(){return Bn})),n.d(e,"eb",(function(){return zn})),n.d(e,"fb",(function(){return Qn})),n.d(e,"gb",(function(){return Kn})),n.d(e,"hb",(function(){return Wn})),n.d(e,"ib",(function(){return Gn})),n.d(e,"jb",(function(){return oa})),n.d(e,"kb",(function(){return Cc})),n.d(e,"lb",(function(){return sa})),n.d(e,"mb",(function(){return aa})),n.d(e,"nb",(function(){return Hn})),n.d(e,"ob",(function(){return G})),n.d(e,"pb",(function(){return cs})),n.d(e,"qb",(function(){return Os})),n.d(e,"rb",(function(){return Es})),n.d(e,"sb",(function(){return ia})),n.d(e,"tb",(function(){return le})),n.d(e,"ub",(function(){return L})),n.d(e,"vb",(function(){return qn})),n.d(e,"wb",(function(){return es})),n.d(e,"xb",(function(){return ie})),n.d(e,"yb",(function(){return _a})),n.d(e,"zb",(function(){return qr})),n.d(e,"Ab",(function(){return fs})),n.d(e,"Bb",(function(){return Fs})),n.d(e,"Cb",(function(){return $s})),n.d(e,"Db",(function(){return Ls})),n.d(e,"Eb",(function(){return Cu})),n.d(e,"Fb",(function(){return xt})),n.d(e,"Gb",(function(){return Lt})),n.d(e,"Hb",(function(){return S})),n.d(e,"Ib",(function(){return A})),n.d(e,"Jb",(function(){return Pt})),n.d(e,"Kb",(function(){return Ft})),n.d(e,"Lb",(function(){return gs})),n.d(e,"Mb",(function(){return ws})),n.d(e,"Nb",(function(){return _s})),n.d(e,"Ob",(function(){return bs})),n.d(e,"Pb",(function(){return Cs})),n.d(e,"Qb",(function(){return xn})),n.d(e,"Rb",(function(){return ta})),n.d(e,"Sb",(function(){return ft})),n.d(e,"Tb",(function(){return vs})),n.d(e,"Ub",(function(){return Su})),n.d(e,"Vb",(function(){return Is})),n.d(e,"Wb",(function(){return Eu})),n.d(e,"Xb",(function(){return As})),n.d(e,"Yb",(function(){return au})),n.d(e,"Zb",(function(){return uu})),n.d(e,"ac",(function(){return ys})),n.d(e,"bc",(function(){return _u})),n.d(e,"cc",(function(){return te})),n.d(e,"dc",(function(){return Ae})),n.d(e,"ec",(function(){return Er})),n.d(e,"fc",(function(){return Dt})),n.d(e,"gc",(function(){return wu})),n.d(e,"hc",(function(){return Ms})),n.d(e,"ic",(function(){return ds})),n.d(e,"jc",(function(){return Ys})),n.d(e,"kc",(function(){return Js})),n.d(e,"lc",(function(){return Zs}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("7o/Q");function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.a,t.add(this.source.subscribe(new p(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.a.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class p extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function g(t){return{toString:t}.toString()}const v="__annotations__",y="__parameters__",m="__prop__metadata__";function b(t,e,n){return g(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(y)?t[y]:Object.defineProperty(t,y,{value:[]})[y];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const _=b("Inject",t=>({token:t})),w=b("Optional"),C=b("Self"),E=b("SkipSelf");var O=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function I(t){for(let e in t)if(t[e]===I)return e;throw Error("Could not find renamed property on target object.")}function T(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function A(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function k(t){return x(t,t[j])||x(t,t[D])}function x(t,e){return e&&e.token===t?e:null}function N(t){return t&&(t.hasOwnProperty(R)||t.hasOwnProperty(M))?t[R]:null}const j=I({"\u0275prov":I}),R=I({"\u0275inj":I}),P=I({"\u0275provFallback":I}),D=I({ngInjectableDef:I}),M=I({ngInjectorDef:I});function L(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(L).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function F(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const V=I({__forward_ref__:I});function U(t){return t.__forward_ref__=U,t.toString=function(){return L(this())},t}function q(t){return B(t)?t():t}function B(t){return"function"==typeof t&&t.hasOwnProperty(V)&&t.__forward_ref__===U}const H="undefined"!=typeof globalThis&&globalThis,z="undefined"!=typeof window&&window,W="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,K="undefined"!=typeof global&&global,G=H||K||z||W,Q=I({"\u0275cmp":I}),X=I({"\u0275dir":I}),Y=I({"\u0275pipe":I}),J=I({"\u0275mod":I}),Z=I({"\u0275loc":I}),$=I({"\u0275fac":I}),tt=I({__NG_ELEMENT_ID__:I});class et{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=S({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const nt=new et("INJECTOR",-1),rt={},it=/\n/gm,ot="__source",st=I({provide:String,useValue:I});let at,ut=void 0;function ct(t){const e=ut;return ut=t,e}function lt(t){const e=at;return at=t,e}function ht(t,e=O.Default){if(void 0===ut)throw new Error("inject() must be called from an injection context");return null===ut?pt(t,void 0,e):ut.get(t,e&O.Optional?null:void 0,e)}function ft(t,e=O.Default){return(at||ht)(q(t),e)}function pt(t,e,n){const r=k(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&O.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${L(t)}]`)}function dt(t){const e=[];for(let n=0;n<t.length;n++){const r=q(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=O.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof w||"Optional"===i.ngMetadataName||i===w?n|=O.Optional:i instanceof E||"SkipSelf"===i.ngMetadataName||i===E?n|=O.SkipSelf:i instanceof C||"Self"===i.ngMetadataName||i===C?n|=O.Self:t=i instanceof _||i===_?i.token:i}e.push(ft(t,n))}else e.push(ft(r))}return e}class gt{get(t,e=rt){if(e===rt){const e=new Error(`NullInjectorError: No provider for ${L(t)}!`);throw e.name="NullInjectorError",e}return e}}class vt{}class yt{}function mt(t,e){t.forEach(t=>Array.isArray(t)?mt(t,e):e(t))}function bt(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function _t(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wt(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function Ct(t,e,n){let r=Ot(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Et(t,e){const n=Ot(t,e);if(n>=0)return t[1|n]}function Ot(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var It=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Tt=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const St={},At=[];let kt=0;function xt(t){return g(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===It.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||At,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Tt.Emulated,id:"c",styles:t.styles||At,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=kt++,n.inputs=Mt(t.inputs,e),n.outputs=Mt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Nt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(jt):null,n})}function Nt(t){return Vt(t)||function(t){return t[X]||null}(t)}function jt(t){return function(t){return t[Y]||null}(t)}const Rt={};function Pt(t){const e={type:t.type,bootstrap:t.bootstrap||At,declarations:t.declarations||At,imports:t.imports||At,exports:t.exports||At,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&g(()=>{Rt[t.id]=t.type}),e}function Dt(t,e){return g(()=>{const n=qt(t,!0);n.declarations=e.declarations||At,n.imports=e.imports||At,n.exports=e.exports||At})}function Mt(t,e){if(null==t)return St;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Lt=xt;function Ft(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Vt(t){return t[Q]||null}function Ut(t,e){return t.hasOwnProperty($)?t[$]:null}function qt(t,e){const n=t[J]||null;if(!n&&!0===e)throw new Error(`Type ${L(t)} does not have '\u0275mod' property.`);return n}const Bt=20,Ht=10;function zt(t){return Array.isArray(t)&&"object"==typeof t[1]}function Wt(t){return Array.isArray(t)&&!0===t[1]}function Kt(t){return 0!=(8&t.flags)}function Gt(t){return 2==(2&t.flags)}function Qt(t){return 1==(1&t.flags)}function Xt(t){return null!==t.template}function Yt(t){return 0!=(512&t[2])}function Jt(t){return"string"==typeof t?t:null==t?"":""+t}function Zt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Jt(t)}const $t=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(G))();function te(t){return{name:"document",target:t.ownerDocument}}function ee(t){return t instanceof Function?t():t}function ne(t,e){const n=e?" in "+e:"";throw new Error(`No provider for ${Zt(t)} found${n}`)}class re{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ie(){return oe}function oe(t){return t.type.prototype.ngOnChanges&&(t.setInput=ae),se}function se(){const t=ue(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===St)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function ae(t,e,n,r){const i=ue(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:St,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new re(u&&u.currentValue,e,s===St),t[r]=e}function ue(t){return t.__ngSimpleChanges__||null}ie.ngInherit=!0;let ce=void 0;function le(t){ce=t}function he(t){return!!t.listen}const fe={createRenderer:(t,e)=>void 0!==ce?ce:"undefined"!=typeof document?document:void 0};function pe(t){for(;Array.isArray(t);)t=t[0];return t}function de(t,e){return pe(e[t+Bt])}function ge(t,e){return pe(e[t.index])}function ve(t,e){return t.data[e+Bt]}function ye(t,e){const n=e[t];return zt(n)?n:n[0]}function me(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function be(t){return 4==(4&t[2])}function _e(t){return 128==(128&t[2])}function we(t,e){return null===t||null==e?null:t[e]}function Ce(t){t[18]=0}function Ee(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Oe={lFrame:He(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ie(){return Oe.bindingsEnabled}function Te(){return Oe.lFrame.lView}function Se(){return Oe.lFrame.tView}function Ae(t){Oe.lFrame.contextLView=t}function ke(){return Oe.lFrame.currentTNode}function xe(t,e){Oe.lFrame.currentTNode=t,Oe.lFrame.isParent=e}function Ne(){return Oe.lFrame.isParent}function je(){return Oe.isInCheckNoChangesMode}function Re(t){Oe.isInCheckNoChangesMode=t}function Pe(){return Oe.lFrame.bindingIndex++}function De(t){const e=Oe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Me(t,e){const n=Oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Le(e)}function Le(t){Oe.lFrame.currentDirectiveIndex=t}function Fe(){return Oe.lFrame.currentQueryIndex}function Ve(t){Oe.lFrame.currentQueryIndex=t}function Ue(t,e){const n=Be();Oe.lFrame=n,n.currentTNode=e,n.lView=t}function qe(t){const e=Be(),n=t[1];Oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex}function Be(){const t=Oe.lFrame,e=null===t?null:t.child;return null===e?He(t):e}function He(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function ze(){const t=Oe.lFrame;return Oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const We=ze;function Ke(){const t=ze();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ge(){return Oe.lFrame.selectedIndex}function Qe(t){Oe.lFrame.selectedIndex=t}function Xe(){const t=Oe.lFrame;return ve(t.tView,t.selectedIndex)}function Ye(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Je(t,e,n){tn(t,e,3,n)}function Ze(t,e,n,r){(3&t[2])===n&&tn(t,e,n,r)}function $e(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function tn(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(en(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function en(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const nn=-1;class rn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function on(t,e,n){const r=he(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];an(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function sn(t){return 3===t||4===t||6===t}function an(t){return 64===t.charCodeAt(0)}function un(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||cn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function cn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function ln(t){return t!==nn}function hn(t){return 32767&t}function fn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let pn=!0;function dn(t){const e=pn;return pn=t,e}let gn=0;function vn(t,e){const n=mn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,yn(r.data,t),yn(e,null),yn(r.blueprint,null));const i=bn(t,e),o=t.injectorIndex;if(ln(i)){const t=hn(i),n=fn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function yn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function mn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function bn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return nn;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return nn}function _n(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(tt)&&(r=n[tt]),null==r&&(r=n[tt]=gn++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function wn(t,e,n,r=O.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(tt)?t[tt]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){Ue(e,t);try{const t=i();if(null!=t||r&O.Optional)return t;ne(n)}finally{We()}}else if("number"==typeof i){if(-1===i)return new An(t,e);let o=null,s=mn(t,e),a=nn,u=r&O.Host?e[16][6]:null;for((-1===s||r&O.SkipSelf)&&(a=-1===s?bn(t,e):e[s+8],a!==nn&&Sn(r,!1)?(o=e[1],s=hn(a),e=fn(a,e)):s=-1);-1!==s;){const t=e[1];if(Tn(i,s,t.data)){const t=En(s,e,n,o,r,u);if(t!==Cn)return t}a=e[s+8],a!==nn&&Sn(r,e[1].data[s+8]===u)&&Tn(i,s,e)?(o=t,s=hn(a),e=fn(a,e)):s=-1}}}if(r&O.Optional&&void 0===i&&(i=null),0==(r&(O.Self|O.Host))){const t=e[9],o=lt(void 0);try{return t?t.get(n,i,r&O.Optional):pt(n,i,r&O.Optional)}finally{lt(o)}}if(r&O.Optional)return i;ne(n,"NodeInjector")}const Cn={};function En(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=On(a,s,n,null==r?Gt(a)&&pn:r!=s&&2===a.type,i&O.Host&&o===a);return null!==u?In(e,s,u,a):Cn}function On(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Xt(t)&&t.type===n)return u}return null}function In(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof rn){const s=i;s.resolving&&function(t,e){throw new Error("Circular dependency in DI detected for "+t)}(Zt(o[n]));const a=dn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?lt(s.injectImpl):null;Ue(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=oe(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&lt(u),dn(a),s.resolving=!1,We()}}return i}function Tn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Sn(t,e){return!(t&O.Self||t&O.Host&&e)}class An{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return wn(this._tNode,this._lView,t,void 0,e)}}function kn(t){const e=t;if(B(t))return()=>{const t=kn(q(e));return t?t():null};let n=Ut(e);if(null===n){const t=N(e);n=t&&t.factory}return n||null}function xn(t){return g(()=>{const e=t.prototype.constructor,n=e[$]||kn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||kn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Nn(t){return t.ngDebugContext}function jn(t){return t.ngOriginalError}function Rn(t,...e){t.error(...e)}class Pn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Rn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Nn(t)?Nn(t):this._findContext(jn(t)):null}_findOriginalError(t){let e=jn(t);for(;e&&jn(e);)e=jn(e);return e}}class Dn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Mn extends Dn{getTypeName(){return"HTML"}}class Ln extends Dn{getTypeName(){return"Style"}}class Fn extends Dn{getTypeName(){return"Script"}}class Vn extends Dn{getTypeName(){return"URL"}}class Un extends Dn{getTypeName(){return"ResourceURL"}}function qn(t){return t instanceof Dn?t.changingThisBreaksApplicationSecurity:t}function Bn(t,e){const n=Hn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Hn(t){return t instanceof Dn&&t.getTypeName()||null}function zn(t){return new Mn(t)}function Wn(t){return new Ln(t)}function Kn(t){return new Fn(t)}function Gn(t){return new Vn(t)}function Qn(t){return new Un(t)}let Xn=!0,Yn=!1;function Jn(){return Yn=!0,Xn}function Zn(){if(Yn)throw new Error("Cannot enable prod mode after platform setup.");Xn=!1}class $n{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class tr{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const er=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,nr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function rr(t){return(t=String(t)).match(er)||t.match(nr)?t:(Jn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function ir(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function or(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const sr=ir("area,br,col,hr,img,wbr"),ar=ir("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ur=ir("rp,rt"),cr=or(ur,ar),lr=or(sr,or(ar,ir("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),or(ur,ir("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),cr),hr=ir("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fr=ir("srcset"),pr=or(hr,fr,ir("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ir("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dr=ir("script,style,template");class gr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!lr.hasOwnProperty(e))return this.sanitizedSomething=!0,!dr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!pr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;hr[o]&&(s=rr(s)),fr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>rr(t.trim())).join(", ")),this.buf.push(" ",e,'="',mr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();lr.hasOwnProperty(e)&&!sr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(mr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const vr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yr=/([^\#-~ |!])/g;function mr(t){return t.replace(/&/g,"&amp;").replace(vr,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(yr,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let br;function _r(t,e){let n=null;try{br=br||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new $n:new tr(t)}(t);let r=e?String(e):"";n=br.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=br.getInertBodyElement(r)}while(r!==o);const s=new gr,a=s.sanitizeChildren(wr(n)||n);return Jn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=wr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function wr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Cr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Er(t){const e=function(){const t=Te();return t&&t[12]}();return e?e.sanitize(Cr.URL,t)||"":Bn(t,"URL")?qn(t):rr(Jt(t))}function Or(t,e){t.__ngContext__=e}function Ir(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Tr="ng-template";function Sr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Ir(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Ar(t){return 0===t.type&&t.tagName!==Tr}function kr(t,e,n){return e===(0!==t.type||n?t.tagName:Tr)}function xr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(sn(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!kr(t,u,n)||""===u&&1===e.length){if(Nr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Sr(t.attrs,c,n)){if(Nr(r))return!1;s=!0}continue}const l=jr(8&r?"class":u,i,Ar(t),n);if(-1===l){if(Nr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Ir(e,c,0)||2&r&&c!==t){if(Nr(r))return!1;s=!0}}}}else{if(!s&&!Nr(r)&&!Nr(u))return!1;if(s&&Nr(u))continue;s=!1,r=u|1&r}}return Nr(r)||s}function Nr(t){return 0==(1&t)}function jr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Rr(t,e,n=!1){for(let r=0;r<e.length;r++)if(xr(t,e[r],n))return!0;return!1}function Pr(t,e){return t?":not("+e.trim()+")":e}function Dr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Nr(s)||(e+=Pr(o,i),i=""),r=s,o=o||!Nr(r);n++}return""!==i&&(e+=Pr(o,i)),e}const Mr={};function Lr(t){const e=t[3];return Wt(e)?e[3]:e}function Fr(t){return Ur(t[13])}function Vr(t){return Ur(t[4])}function Ur(t){for(;null!==t&&!Wt(t);)t=t[4];return t}function qr(t){Br(Se(),Te(),Ge()+t,je())}function Br(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Je(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ze(e,r,0,n)}Qe(n)}function Hr(t,e){return t<<17|e<<2}function zr(t){return t>>17&32767}function Wr(t){return 2|t}function Kr(t){return(131068&t)>>2}function Gr(t,e){return-131069&t|e<<2}function Qr(t){return 1|t}function Xr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Ve(i),n.contentQueries(2,e[o],o)}}}function Yr(t,e,n){return he(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Jr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ce(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Zr(t,e,n,r,i){const o=e+Bt,s=t.data[o]||function(t,e,n,r,i){const o=ke(),s=Ne(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s&&null==o.child&&null!==a.parent?o.child=a:s||(o.next=a)),a}(t,o,n,r,i);return xe(s,!0),s}function $r(t,e,n){qe(e);try{const r=t.viewQuery;null!==r&&ki(1,r,n);const i=t.template;null!==i&&ni(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Xr(t,e),t.staticViewQueries&&ki(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Oi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ke()}}function ti(t,e,n,r){const i=e[2];if(256==(256&i))return;qe(e);const o=je();try{Ce(e),Oe.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ni(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Je(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ze(e,n,0,null),$e(e,0)}if(function(t){for(let e=Fr(t);null!==e;e=Vr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ee(r,1),n[2]|=1024}}}(e),function(t){for(let e=Fr(t);null!==e;e=Vr(e))for(let t=Ht;t<e.length;t++){const n=e[t],r=n[1];_e(n)&&ti(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Xr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Je(e,n)}else{const n=t.contentHooks;null!==n&&Ze(e,n,1),$e(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Qe(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(Me(r,i),s(2,e[i])),i++)}}}finally{Qe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ei(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ki(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Je(e,n)}else{const n=t.viewHooks;null!==n&&Ze(e,n,2),$e(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ee(e[3],-1))}finally{Ke()}}function ei(t,e,n,r){const i=e[10],o=!je(),s=be(e);try{o&&!s&&i.begin&&i.begin(),s&&$r(t,e,r),ti(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function ni(t,e,n,r,i){const o=Ge();try{Qe(-1),2&r&&e.length>Bt&&Br(t,e,0,je()),n(r,i)}finally{Qe(o)}}function ri(t,e,n){Ie()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||vn(n,e),Or(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Xt(r);o&&bi(e,n,r);const u=In(e,t,a,n);Or(u,e),null!==s&&_i(0,a-i,u,r,0,s),o&&(ye(n.index,e)[8]=u)}}(t,e,n,ge(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-Bt,u=Oe.lFrame.currentDirectiveIndex;try{Qe(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Le(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?pi(r,i):s&&o.push(null)}}finally{Qe(-1),Le(u)}}(t,e,n))}function ii(t,e,n=ge){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function oi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=si(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function si(t,e,n,r,i,o,s,a,u,c){const l=Bt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Mr);return n}(l,h),p="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1}}function ai(t,e,n,r){const i=Ni(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function ui(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ci(t,e,n,r,i,o,s,a){const u=ge(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?(Ri(t,n,c,r,i),Gt(e)&&function(t,e){const n=ye(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):2===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,he(o)?o.setProperty(u,r,i):an(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function li(t,e,n,r){let i=!1;if(Ie()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Rr(n,s.selectors,!1)&&(i||(i=[]),_n(vn(n,e),t,s.type),Xt(s)?(gi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,yi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}di(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=un(n.mergedAttrs,c.hostAttrs),mi(t,e,c),vi(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-Bt),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-Bt),u=!0),hi(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Ar(e)?null:wi(n,i);o.push(c),s=ui(n,u,s),a=ui(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),fi(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=un(n.mergedAttrs,n.attrs),i}function hi(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function fi(t,e,n){for(let r=0;r<n;r++)e.push(Mr),t.blueprint.push(Mr),t.data.push(null)}function pi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function di(t,e,n){const r=Bt-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function gi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function vi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Xt(e)&&(n[""]=t)}}function yi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function mi(t,e,n){t.data.push(n);const r=n.factory||(n.factory=Ut(n.type)),i=new rn(r,Xt(n),null);t.blueprint.push(i),e.push(i)}function bi(t,e,n){const r=ge(e,t),i=oi(n),o=t[10],s=Ii(t,Jr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function _i(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function wi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ci(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ei(t,e){const n=ye(e,t);if(_e(n)){const t=n[1];80&n[2]?ti(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=Fr(e);null!==r;r=Vr(r))for(let e=Ht;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];ti(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=ye(n[r],e);_e(i)&&i[5]>0&&t(i)}}(n)}}function Oi(t,e){const n=ye(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),$r(r,n,n[8])}function Ii(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Ti(t){for(;t;){t[2]|=64;const e=Lr(t);if(Yt(t)&&!e)return t;t=e}return null}function Si(t,e,n){const r=e[10];r.begin&&r.begin();try{ti(t,e,t.template,n)}catch(i){throw ji(e,i),i}finally{r.end&&r.end()}}function Ai(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=me(n),i=r[1];ei(i,r,i.template,n)}}(t[8])}function ki(t,e,n){Ve(0),e(t,n)}const xi=(()=>Promise.resolve(null))();function Ni(t){return t[7]||(t[7]=[])}function ji(t,e){const n=t[9],r=n?n.get(Pn,null):null;r&&r.handleError(e)}function Ri(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Pi(t,e,n,r,i){if(null!=r){let o,s=!1;Wt(r)?o=r:zt(r)&&(s=!0,r=r[0]);const a=pe(r);0===t&&null!==n?null==i?Ui(e,n,a):Vi(e,n,a,i||null):1===t&&null!==n?Vi(e,n,a,i||null):2===t?function(t,e,n){const r=Bi(t,e);r&&function(t,e,n,r){he(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==pe(n)&&Pi(e,t,r,o,i);for(let s=Ht;s<n.length;s++){const i=n[s];Wi(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Di(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ee(i,-1)),n.splice(r,1)}function Mi(t,e){if(t.length<=Ht)return;const n=Ht+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Di(o,r),e>0&&(t[n-1][4]=r[4]);const s=_t(t,Ht+e);Wi(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Li(t,e){if(!(256&e[2])){const n=e[11];he(n)&&n.destroyNode&&Wi(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Fi(t[1],t);for(;e;){let n=null;if(zt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)zt(e)&&Fi(e[1],e),e=e[3];null===e&&(e=t),zt(e)&&Fi(e[1],e),n=e&&e[4]}e=n}}(e)}}function Fi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof rn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):pe(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&he(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Wt(e[3])){n!==e[3]&&Di(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Vi(t,e,n,r){he(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Ui(t,e,n){he(t)?t.appendChild(e,n):e.appendChild(n)}function qi(t,e,n,r){null!==r?Vi(t,e,n,r):Ui(t,e,n)}function Bi(t,e){return he(t)?t.parentNode(e):e.parentNode}function Hi(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(3===r.type||4===r.type);)r=(e=r).parent;if(null===r)return n[0];if(e&&4===e.type&&4&e.flags)return ge(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==Tt.ShadowDom&&n!==Tt.Native)return null}return ge(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){return 3===t.type||4===t.type?ge(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)qi(t,i,n[e],o);else qi(t,i,n,o)}}function zi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&Or(pe(a),r),n.flags|=4),64!=(64&n.flags)&&(3===u||4===u?(zi(t,e,n.child,r,i,o,!1),Pi(e,t,i,a,o)):1===u?Ki(t,e,r,n,i,o):Pi(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Wi(t,e,n,r,i,o){zi(n,r,t.firstChild,e,i,o,!1)}function Ki(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Pi(e,t,i,a[u],o);else zi(t,e,a,s[3],i,o,!0)}function Gi(t,e,n){he(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Qi(t,e,n){he(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Xi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(pe(s)),Wt(s))for(let e=Ht;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(3===a||4===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=Lr(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Li(this._lView[1],this._lView)}onDestroy(t){ai(this._lView[1],this._lView,null,t)}markForCheck(){Ti(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Si(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Re(!0);try{Si(t,e,n)}finally{Re(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Wi(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Yi extends Xi{constructor(t){super(t),this._view=t}detectChanges(){Ai(this._view)}checkNoChanges(){!function(t){Re(!0);try{Ai(t)}finally{Re(!1)}}(this._view)}get context(){return null}}let Ji,Zi,$i;function to(t,e,n){return Ji||(Ji=class extends t{}),new Ji(ge(e,n))}function eo(t,e,n,r){return Zi||(Zi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Jr(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),$r(e,n,t),new Xi(n)}}),0===n.type?new Zi(r,n,to(e,n,r)):null}function no(t,e,n,r){let i;$i||($i=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return to(e,this._hostTNode,this._hostView)}get injector(){return new An(this._hostTNode,this._hostView)}get parentInjector(){const t=bn(this._hostTNode,this._hostView);if(ln(t)){const e=fn(t,this._hostView),n=hn(t);return new An(e[1].data[n+8],e)}return new An(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(vt,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Wt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new $i(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Ht+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Ht?(e[4]=n[i],bt(n,Ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=function t(e,n){const r=Ht+e+1;if(r<n.length){const e=n[r],i=e[1].firstChild;if(null!==i)return function e(n,r){if(null!==r){const i=r.type;if(2===i)return ge(r,n);if(0===i)return t(-1,n[r.index]);if(3===i||4===i){const i=r.child;if(null!==i)return e(n,i);{const e=n[r.index];return Wt(e)?t(-1,e):pe(e)}}{const t=n[16],i=t[6],o=Lr(t),s=i.projection[r.projection];return null!=s?e(o,s):e(n,r.next)}}return null}(e,i)}return n[7]}(i,o),a=n[11],u=Bi(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Wi(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),bt(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Mi(this._lContainer,e);n&&(_t(this._lContainer[8],e),Li(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Mi(this._lContainer,e);return n&&null!=_t(this._lContainer[8],e)?new Xi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Wt(o))i=o;else{let t;if(3===n.type)t=pe(o);else if(t=r[11].createComment(""),Yt(r)){const e=r[11],i=ge(n,r);Vi(e,Bi(e,i),t,function(t,e){return he(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Hi(r[1],r,t,n);r[n.index]=i=Ci(o,r,t,n),Ii(r,i)}return new $i(i,n,r)}function ro(t=!1){return function(t,e,n){if(!n&&Gt(t)){const n=ye(t.index,e);return new Xi(n,n)}return 2===t.type||0===t.type||3===t.type||4===t.type?new Xi(e[16],e):null}(ke(),Te(),t)}let io=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>oo(),t})();const oo=ro,so=Function;function ao(t){return"function"==typeof t}const uo=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|[^()]+\(arguments\))\)/,co=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,lo=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,ho=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/;class fo{constructor(t){this._reflect=t||G.Reflect}isReflectionEnabled(){return!0}factory(t){return(...e)=>new t(...e)}_zipTypesAndAnnotations(t,e){let n;n=wt(void 0===t?e.length:t.length);for(let r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]&&t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n}_ownParameters(t,e){if(n=t.toString(),uo.test(n)||ho.test(n)||co.test(n)&&!lo.test(n))return null;var n;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;const r=t.ctorParameters;if(r&&r!==e.ctorParameters){const t="function"==typeof r?r():r,e=t.map(t=>t&&t.type),n=t.map(t=>t&&po(t.decorators));return this._zipTypesAndAnnotations(e,n)}const i=t.hasOwnProperty(y)&&t[y],o=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return o||i?this._zipTypesAndAnnotations(o,i):wt(t.length)}parameters(t){if(!ao(t))return[];const e=go(t);let n=this._ownParameters(t,e);return n||e===Object||(n=this.parameters(e)),n||[]}_ownAnnotations(t,e){if(t.annotations&&t.annotations!==e.annotations){let e=t.annotations;return"function"==typeof e&&e.annotations&&(e=e.annotations),e}return t.decorators&&t.decorators!==e.decorators?po(t.decorators):t.hasOwnProperty(v)?t[v]:null}annotations(t){if(!ao(t))return[];const e=go(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)}_ownPropMetadata(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){let e=t.propMetadata;return"function"==typeof e&&e.propMetadata&&(e=e.propMetadata),e}if(t.propDecorators&&t.propDecorators!==e.propDecorators){const e=t.propDecorators,n={};return Object.keys(e).forEach(t=>{n[t]=po(e[t])}),n}return t.hasOwnProperty(m)?t[m]:null}propMetadata(t){if(!ao(t))return{};const e=go(t),n={};if(e!==Object){const t=this.propMetadata(e);Object.keys(t).forEach(e=>{n[e]=t[e]})}const r=this._ownPropMetadata(t,e);return r&&Object.keys(r).forEach(t=>{const e=[];n.hasOwnProperty(t)&&e.push(...n[t]),e.push(...r[t]),n[t]=e}),n}ownPropMetadata(t){return ao(t)&&this._ownPropMetadata(t,go(t))||{}}hasLifecycleHook(t,e){return t instanceof so&&e in t.prototype}guards(t){return{}}getter(t){return new Function("o","return o."+t+";")}setter(t){return new Function("o","v","return o."+t+" = v;")}method(t){return new Function("o","args",`if (!o.${t}) throw new Error('"${t}" is undefined');\n        return o.${t}.apply(o, args);`)}importUri(t){return"object"==typeof t&&t.filePath?t.filePath:"./"+L(t)}resourceUri(t){return"./"+L(t)}resolveIdentifier(t,e,n,r){return r}resolveEnum(t,e){return t[e]}}function po(t){return t?t.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function go(t){const e=t.prototype?Object.getPrototypeOf(t.prototype):null;return(e?e.constructor:null)||Object}const vo=new et("Set Injector scope."),yo={},mo={},bo=[];let _o=void 0;function wo(){return void 0===_o&&(_o=new gt),_o}function Co(t,e=null,n=null,r){return new Eo(t,n,e||wo(),r)}class Eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&mt(e,n=>this.processProvider(n,t,e)),mt([t],t=>this.processInjectorType(t,[],i)),this.records.set(nt,To(void 0,this));const o=this.records.get(vo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:L(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=rt,n=O.Default){this.assertNotDestroyed();const r=ct(this);try{if(!(n&O.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof et)&&k(t);e=n&&this.injectableDefInScope(n)?To(Oo(t),yo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&O.Self?wo():this.parent).get(t,e=n&O.Optional&&e===rt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(L(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[ot]&&i.unshift(e[ot]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=L(e);if(Array.isArray(e))i=e.map(L).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):L(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(it,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{ct(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(L(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=q(t)))return!1;let r=N(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=N(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{mt(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];mt(r,t=>this.processProvider(t,n,r||bo))}}this.injectorDefTypes.add(o),this.records.set(o,To(r.factory,yo));const a=r.providers;if(null!=a&&!s){const e=t;mt(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Ao(t=q(t))?t:q(t&&t.provide);const i=function(t,e,n){return So(t)?To(void 0,t.useValue):To(Io(t),yo)}(t);if(Ao(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=To(void 0,yo,!0),e.factory=()=>dt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===yo&&(e.value=mo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Oo(t){const e=k(t),n=null!==e?e.factory:Ut(t);if(null!==n)return n;const r=N(t);if(null!==r)return r.factory;if(t instanceof et)throw new Error(`Token ${L(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=wt(e,"?");throw new Error(`Can't resolve all parameters for ${L(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[j]||t[D]||t[P]&&t[P]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Io(t,e,n){let r=void 0;if(Ao(t)){const e=q(t);return Ut(e)||Oo(e)}if(So(t))r=()=>q(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...dt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>ft(q(t.useExisting));else{const e=q(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ut(e)||Oo(e);r=()=>new e(...dt(t.deps))}var i;return r}function To(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function So(t){return null!==t&&"object"==typeof t&&st in t}function Ao(t){return"function"==typeof t}const ko=function(t,e,n){return function(t,e=null,n=null,r){const i=Co(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let xo=(()=>{class t{static create(t,e){return Array.isArray(t)?ko(t,e,""):ko(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=rt,t.NULL=new gt,t.\u0275prov=S({token:t,providedIn:"any",factory:()=>ft(nt)}),t.__NG_ELEMENT_ID__=-1,t})();function No(t){return t.length>1?" ("+function(t){const e=[];for(let n=0;n<t.length;++n){if(e.indexOf(t[n])>-1)return e.push(t[n]),e;e.push(t[n])}return e}(t.slice().reverse()).map(t=>L(t.token)).join(" -> ")+")":""}function jo(t,e,n,r){const i=[e],o=n(i),s=r?function(t,e){const n=`${t} caused by: ${e instanceof Error?e.message:e}`,r=Error(n);return r.ngOriginalError=e,r}(o,r):Error(o);return s.addKey=Ro,s.keys=i,s.injectors=[t],s.constructResolvingMessage=n,s.ngOriginalError=r,s}function Ro(t,e){this.injectors.push(t),this.keys.push(e),this.message=this.constructResolvingMessage(this.keys)}function Po(t,e){const n=[];for(let r=0,i=e.length;r<i;r++){const t=e[r];n.push(t&&0!=t.length?t.map(L).join(" "):"?")}return Error("Cannot resolve all parameters for '"+L(t)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+L(t)+"' is decorated with Injectable.")}class Do{constructor(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=L(this.token)}static get(t){return Lo.get(q(t))}static get numberOfKeys(){return Lo.numberOfKeys}}class Mo{constructor(){this._allKeys=new Map}get(t){if(t instanceof Do)return t;if(this._allKeys.has(t))return this._allKeys.get(t);const e=new Do(t,Do.numberOfKeys);return this._allKeys.set(t,e),e}get numberOfKeys(){return this._allKeys.size}}const Lo=new Mo;class Fo{constructor(t){this.reflectionCapabilities=t}updateCapabilities(t){this.reflectionCapabilities=t}factory(t){return this.reflectionCapabilities.factory(t)}parameters(t){return this.reflectionCapabilities.parameters(t)}annotations(t){return this.reflectionCapabilities.annotations(t)}propMetadata(t){return this.reflectionCapabilities.propMetadata(t)}hasLifecycleHook(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)}getter(t){return this.reflectionCapabilities.getter(t)}setter(t){return this.reflectionCapabilities.setter(t)}method(t){return this.reflectionCapabilities.method(t)}importUri(t){return this.reflectionCapabilities.importUri(t)}resourceUri(t){return this.reflectionCapabilities.resourceUri(t)}resolveIdentifier(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)}resolveEnum(t,e){return this.reflectionCapabilities.resolveEnum(t,e)}}const Vo=new Fo(new fo);class Uo{constructor(t,e,n){this.key=t,this.optional=e,this.visibility=n}static fromKey(t){return new Uo(t,!1,null)}}const qo=[];class Bo{constructor(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}class Ho{constructor(t,e){this.factory=t,this.dependencies=e}}function zo(t){let e,n;if(t.useClass){const r=q(t.useClass);e=Vo.factory(r),n=Ko(r)}else t.useExisting?(e=t=>t,n=[Uo.fromKey(Do.get(t.useExisting))]):t.useFactory?(e=t.useFactory,n=function(t,e){if(e){const n=e.map(t=>[t]);return e.map(e=>Go(t,e,n))}return Ko(t)}(t.useFactory,t.deps)):(e=()=>t.useValue,n=qo);return new Ho(e,n)}function Wo(t){return new Bo(Do.get(t.provide),[zo(t)],t.multi||!1)}function Ko(t){const e=Vo.parameters(t);if(!e)return[];if(e.some(t=>null==t))throw Po(t,e);return e.map(n=>Go(t,n,e))}function Go(t,e,n){let r=null,i=!1;if(!Array.isArray(e))return Qo(e instanceof _?e.token:e,i,null);let o=null;for(let s=0;s<e.length;++s){const t=e[s];t instanceof so?r=t:t instanceof _?r=t.token:t instanceof w?i=!0:t instanceof C||t instanceof E?o=t:t instanceof et&&(r=t)}if(r=q(r),null!=r)return Qo(r,i,o);throw Po(t,n)}function Qo(t,e,n){return new Uo(Do.get(t),e,n)}const Xo={};class Yo{static resolve(t){return function(t){const e=function(t,e){for(let n=0;n<t.length;n++){const r=t[n],i=e.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error(`Cannot mix multi providers and regular providers, got: ${i} ${r}`);if(r.multiProvider)for(let t=0;t<r.resolvedFactories.length;t++)i.resolvedFactories.push(r.resolvedFactories[t]);else e.set(r.key.id,r)}else{let t;t=r.multiProvider?new Bo(r.key,r.resolvedFactories.slice(),r.multiProvider):r,e.set(r.key.id,t)}}return e}(function t(e,n){return e.forEach(e=>{if(e instanceof so)n.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)n.push(e);else{if(!Array.isArray(e))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+e);t(e,n)}}),n}(t,[]).map(Wo),new Map);return Array.from(e.values())}(t)}static resolveAndCreate(t,e){const n=Yo.resolve(t);return Yo.fromResolvedProviders(n,e)}static fromResolvedProviders(t,e){return new Jo(t,e)}}let Jo=(()=>{class t{constructor(t,e){this._constructionCounter=0,this._providers=t,this.parent=e||null;const n=t.length;this.keyIds=[],this.objs=[];for(let r=0;r<n;r++)this.keyIds[r]=t[r].key.id,this.objs[r]=Xo}get(t,e=rt){return this._getByKey(Do.get(t),null,e)}resolveAndCreateChild(t){const e=Yo.resolve(t);return this.createChildFromResolved(e)}createChildFromResolved(e){const n=new t(e);return n.parent=this,n}resolveAndInstantiate(t){return this.instantiateResolved(Yo.resolve([t])[0])}instantiateResolved(t){return this._instantiateProvider(t)}getProviderAtIndex(t){if(t<0||t>=this._providers.length)throw function(t){return Error(`Index ${t} is out-of-bounds.`)}(t);return this._providers[t]}_new(t){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw jo(this,t.key,(function(t){return"Cannot instantiate cyclic dependency!"+No(t)}));return this._instantiateProvider(t)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(t){if(t.multiProvider){const e=[];for(let n=0;n<t.resolvedFactories.length;++n)e[n]=this._instantiate(t,t.resolvedFactories[n]);return e}return this._instantiate(t,t.resolvedFactories[0])}_instantiate(t,e){const n=e.factory;let r,i;try{r=e.dependencies.map(t=>this._getByReflectiveDependency(t))}catch(s){throw s.addKey&&s.addKey(this,t.key),s}try{i=n(...r)}catch(s){throw jo(this,t.key,(function(t){const e=L(t[0].token);return`${o.message}: Error during instantiation of ${e}!${No(t)}.`}),o=s)}var o;return i}_getByReflectiveDependency(t){return this._getByKey(t.key,t.visibility,t.optional?null:rt)}_getByKey(e,n,r){return e===t.INJECTOR_KEY?this:n instanceof C?this._getByKeySelf(e,r):this._getByKeyDefault(e,r,n)}_getObjByKeyId(t){for(let e=0;e<this.keyIds.length;e++)if(this.keyIds[e]===t)return this.objs[e]===Xo&&(this.objs[e]=this._new(this._providers[e])),this.objs[e];return Xo}_throwOrNull(t,e){if(e!==rt)return e;throw function(t,e){return jo(t,e,(function(t){return`No provider for ${L(t[0].token)}!${No(t)}`}))}(this,t)}_getByKeySelf(t,e){const n=this._getObjByKeyId(t.id);return n!==Xo?n:this._throwOrNull(t,e)}_getByKeyDefault(e,n,r){let i;for(i=r instanceof E?this.parent:this;i instanceof t;){const t=i,n=t._getObjByKeyId(e.id);if(n!==Xo)return n;i=t.parent}return null!==i?i.get(e.token,n):this._throwOrNull(e,n)}get displayName(){return`ReflectiveInjector(providers: [${function(t,e){const n=[];for(let r=0;r<t._providers.length;++r)n[r]=' "'+t.getProviderAtIndex(r).key.displayName+'" ';return n}(this).join(", ")}])`}toString(){return this.displayName}}return t.INJECTOR_KEY=Do.get(xo),t})();const Zo=new et("AnalyzeForEntryComponents");function $o(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=F(i,t):2==o&&(r=F(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ts(t,e){const n=me(t)[1],r=n.data.length-1;Ye(n,{directiveStart:r,directiveEnd:r+1})}function es(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Xt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=ns(t.inputs),e.declaredInputs=ns(t.declaredInputs),e.outputs=ns(t.outputs);const n=i.hostBindings;n&&os(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&rs(t,o),s&&is(t,s),T(t.inputs,i.inputs),T(t.declaredInputs,i.declaredInputs),T(t.outputs,i.outputs),Xt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===es&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=un(i.hostAttrs,n=un(n,i.hostAttrs))}}(r)}function ns(t){return t===St?{}:t===At?[]:t}function rs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function is(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function os(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let ss=null;function as(){if(!ss){const t=G.Symbol;if(t&&t.iterator)ss=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ss=n)}}}return ss}class us{constructor(t){this.wrapped=t}static wrap(t){return new us(t)}static unwrap(t){return us.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof us}}function cs(t){return!!ls(t)&&(Array.isArray(t)||!(t instanceof Map)&&as()in t)}function ls(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function hs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function fs(t,e,n,r){const i=Te();return hs(i,Pe(),e)&&(Se(),function(t,e,n,r,i,o){const s=ge(t,e),a=e[11];if(null==r)he(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?Jt(r):i(r,t.tagName||"",n);he(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Xe(),i,t,e,n,r)),fs}function ps(t,e,n,r){return hs(t,Pe(),n)?e+Jt(n)+r:Mr}function ds(t,e,n,r,i,o,s,a){const u=Te(),c=Se(),l=t+Bt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Zr(e,t,0,s||null,we(c,a));li(e,n,l,we(c,u)),Ye(e,l);const h=l.tViews=si(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];xe(h,!1);const f=u[11].createComment("");Hi(c,u,f,h),Or(f,u),Ii(u,u[l]=Ci(f,u,f,h)),Qt(h)&&ri(c,u,h),null!=s&&ii(u,h,a)}function gs(t,e=O.Default){const n=Te();return null===n?ft(t,e):wn(ke(),n,q(t),e)}function vs(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(sn(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ke(),t)}function ys(t,e,n){const r=Te();return hs(r,Pe(),e)&&ci(Se(),Xe(),r,t,e,r[11],n,!1),ys}function ms(t,e,n,r,i){const o=i?"class":"style";Ri(t,n,e.inputs[o],o,r)}function bs(t,e,n,r){const i=Te(),o=Se(),s=Bt+t,a=i[11],u=i[s]=Yr(e,a,Oe.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Zr(e,t,2,i,we(a,o));return li(e,n,u,we(a,s)),null!==u.attrs&&$o(u,u.attrs,!1),null!==u.mergedAttrs&&$o(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(t,o,i,0,e,n,r):o.data[s];xe(c,!0);const l=c.mergedAttrs;null!==l&&on(a,u,l);const h=c.classes;null!==h&&Qi(a,u,h);const f=c.styles;null!==f&&Gi(a,u,f),Hi(o,i,u,c),0===Oe.lFrame.elementDepthCount&&Or(u,i),Oe.lFrame.elementDepthCount++,Qt(c)&&(ri(o,i,c),function(t,e,n){if(Kt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ii(i,c)}function _s(){let t=ke();Ne()?Oe.lFrame.isParent=!1:(t=t.parent,xe(t,!1));const e=t;Oe.lFrame.elementDepthCount--;const n=Se();n.firstCreatePass&&(Ye(n,t),Kt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ms(n,e,Te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ms(n,e,Te(),e.stylesWithoutHost,!1)}function ws(t,e,n,r){bs(t,e,n,r),_s()}function Cs(){return Te()}function Es(t){return!!t&&"function"==typeof t.then}function Os(t){return!!t&&"function"==typeof t.subscribe}function Is(t,e,n=!1,r){const i=Te(),o=Se(),s=ke();return function(t,e,n,r,i,o,s=!1,a){const u=Qt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=Ni(e);let h=!0;if(2===r.type){const f=ge(r,e),p=a?a(f):St,d=p.target||f,g=l.length,v=a?t=>a(pe(t[r.index])).target:r.index;if(he(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Ss(r,e,o,!1);const t=n.listen(p.name||d,i,o);l.push(o,t),c&&c.push(i,v,g,g+1)}}else o=Ss(r,e,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,v,g,s)}const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Is}function Ts(t,e,n){try{return!1!==e(n)}catch(r){return ji(t,r),!1}}function Ss(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?ye(t.index,e):e;0==(32&e[2])&&Ti(s);let a=Ts(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Ts(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function As(t=1){return function(t){return(Oe.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Oe.lFrame.contextLView))[8]}(t)}const ks=[];function xs(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?zr(o):Kr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ns(t[a],e)&&(u=!0,t[a+1]=r?Qr(n):Wr(n)),a=r?zr(n):Kr(n)}u&&(t[n+1]=r?Wr(o):Qr(o))}function Ns(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ot(t,e)>=0}const js={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Rs(t){return t.substring(js.key,js.keyEnd)}function Ps(t,e){const n=js.textEnd;return n===e?-1:(e=js.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,js.key=e,n),Ds(t,e,n))}function Ds(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ms(t,e,n){return Us(t,e,n,!1),Ms}function Ls(t,e){return Us(t,e,null,!0),Ls}function Fs(t){qs(Ct,Vs,t,!0)}function Vs(t,e){for(let n=function(t){return function(t){js.key=0,js.keyEnd=0,js.value=0,js.valueEnd=0,js.textEnd=t.length}(t),Ps(t,Ds(t,0,js.textEnd))}(e);n>=0;n=Ps(e,n))Ct(t,Rs(e),!0)}function Us(t,e,n,r){const i=Te(),o=Se(),s=De(2);o.firstUpdatePass&&Hs(o,t,s,r),e!==Mr&&hs(i,s,e)&&Ks(o,o.data[Ge()+Bt],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=L(qn(t)))),t}(e,n),r,s)}function qs(t,e,n,r){const i=Se(),o=De(2);i.firstUpdatePass&&Hs(i,null,o,r);const s=Te();if(n!==Mr&&hs(s,o,n)){const a=i.data[Ge()+Bt];if(Xs(a,r)&&!Bs(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=F(t,n||"")),ms(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Mr&&(i=ks);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const f=u<i.length?i[u+1]:void 0,p=c<o.length?o[c+1]:void 0;let d=null,g=void 0;l===h?(u+=2,c+=2,f!==p&&(d=h,g=p)):null===h||null!==l&&l<h?(u+=2,d=l):(c+=2,d=h,g=p),null!==d&&Ks(t,e,n,r,d,g,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return ks;const r=[],i=qn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Bs(t,e){return e>=t.expandoStartIndex}function Hs(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Ge()+Bt],s=Bs(t,n);Xs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Oe.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ws(n=zs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=zs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Kr(r))return t[zr(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=zs(null,t,e,n[1],r),n=Ws(n,e.attrs,r),function(t,e,n,r){t[zr(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ws(r,t[o].hostAttrs,n);return Ws(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=zr(s),u=Kr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||Ot(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=zr(t[a+1]);t[r+1]=Hr(e,a),0!==e&&(t[e+1]=Gr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Hr(a,0),0!==a&&(t[a+1]=Gr(t[a+1],r)),a=r;else t[r+1]=Hr(u,0),0===a?a=r:t[u+1]=Gr(t[u+1],r),u=r;l&&(t[r+1]=Wr(t[r+1])),xs(t,c,r,!0),xs(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&Ot(o,e)>=0&&(n[r+1]=Qr(n[r+1]))}(e,c,t,r,o),s=Hr(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function zs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ws(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ws(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ct(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ks(t,e,n,r,i,o,s,a){if(2!==e.type)return;const u=t.data,c=u[a+1];Qs(1==(1&c)?Gs(u,e,n,i,Kr(c),s):void 0)||(Qs(o)||2==(2&c)&&(o=Gs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=he(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,de(Ge(),n),i,o))}function Gs(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Mr&&(l=c?ks:void 0);let h=c?Et(l,r):u===r?l:void 0;if(o&&!Qs(h)&&(h=Et(e,r)),Qs(h)&&(a=h,s))return a;const f=t[i+1];i=s?zr(f):Kr(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=Et(t,r))}return a}function Qs(t){return void 0!==t}function Xs(t,e){return 0!=(t.flags&(e?16:32))}function Ys(t,e=""){const n=Te(),r=Se(),i=t+Bt,o=r.firstCreatePass?Zr(r,t,2,null,null):r.data[i],s=n[i]=function(t,e){return he(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Hi(r,n,s,o),xe(o,!1)}function Js(t){return Zs("",t,""),Js}function Zs(t,e,n){const r=Te(),i=ps(r,t,e,n);return i!==Mr&&function(t,e,n){const r=de(e,t),i=t[11];he(i)?i.setValue(r,n):r.textContent=n}(r,Ge(),i),Zs}function $s(t,e,n){qs(Ct,Vs,ps(Te(),t,e,n),!0)}function ta(t,e,n){const r=Te();return hs(r,Pe(),e)&&ci(Se(),Xe(),r,t,e,r[11],n,!0),ta}const ea=void 0;var na=["en",[["a","p"],["AM","PM"],ea],[["AM","PM"],ea,ea],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ea,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ea,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ea,"{1} 'at' {0}",ea],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ra={};function ia(t,e,n){"string"!=typeof e&&(n=e,e=t[ca.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ra[e]=t,n&&(ra[e][ca.ExtraData]=n)}function oa(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ua(e);if(n)return n;const r=e.split("-")[0];if(n=ua(r),n)return n;if("en"===r)return na;throw new Error(`Missing locale data for the locale "${t}".`)}function sa(t){return oa(t)[ca.CurrencyCode]||null}function aa(t){return oa(t)[ca.PluralCase]}function ua(t){return t in ra||(ra[t]=G.ng&&G.ng.common&&G.ng.common.locales&&G.ng.common.locales[t]),ra[t]}var ca=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const la="en-US";let ha=la;function fa(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ha=t.toLowerCase().replace(/_/g,"-"))}function pa(t,e,n,r,i){if(t=q(t),Array.isArray(t))for(let o=0;o<t.length;o++)pa(t[o],e,n,r,i);else{const o=Se(),s=Te();let a=Ao(t)?t:q(t.provide),u=Io(t);const c=ke(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(Ao(t)||!t.multi){const r=new rn(u,i,gs),p=va(a,e,i?l:l+f,h);-1===p?(_n(vn(c,s),o,a),da(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[p]=r,s[p]=r)}else{const p=va(a,e,l+f,h),d=va(a,e,l,l+f),g=p>=0&&n[p],v=d>=0&&n[d];if(i&&!v||!i&&!g){_n(vn(c,s),o,a);const l=function(t,e,n,r,i){const o=new rn(t,n,gs);return o.multi=[],o.index=e,o.componentProviders=0,ga(o,i,r&&!n),o}(i?ma:ya,n.length,i,r,u);!i&&v&&(n[d].providerFactory=l),da(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else da(o,t,p>-1?p:d,ga(n[i?d:p],u,!i&&r));!i&&r&&v&&n[d].componentProviders++}}}function da(t,e,n,r){const i=Ao(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ga(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function va(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ya(t,e,n,r){return ba(this.multi,[])}function ma(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=In(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ba(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ba(i,o);return o}function ba(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function _a(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Se();if(r.firstCreatePass){const i=Xt(t);pa(n,r.data,r.blueprint,i,!0),pa(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class wa{}class Ca{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${L(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ea=(()=>{class t{}return t.NULL=new Ca,t})(),Oa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Ia(t),t})();const Ia=function(t){return to(t,ke(),Te())};class Ta{}var Sa=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ka(),t})();const ka=function(){const t=Te(),e=ye(ke().index,t);return function(t){const e=t[11];if(he(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(zt(e)?e:t)};let xa=(()=>{class t{}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>null}),t})();class Na{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ja=new Na("10.2.3");class Ra{constructor(){}supports(t){return cs(t)}create(t){return new Da(t)}}const Pa=(t,e)=>e;class Da{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Pa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Va(n,r,i)?e:n,s=Va(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!cs(t))throw new Error(`Error trying to diff '${L(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[as()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Ma(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Fa),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ma{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class La{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Fa{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new La,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Va(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ua{constructor(){}supports(t){return t instanceof Map||ls(t)}create(){return new qa}}class qa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||ls(t)))throw new Error(`Error trying to diff '${L(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ba(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ba{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Ha=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new E,new w]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>new t([new Ra])}),t})(),za=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new E,new w]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=S({token:t,providedIn:"root",factory:()=>new t([new Ua])}),t})();const Wa=[new Ua],Ka=new Ha([new Ra]),Ga=new za(Wa);let Qa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Xa(t,Oa),t})();const Xa=function(t,e){return eo(t,e,ke(),Te())};let Ya=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ja(t,Oa),t})();const Ja=function(t,e){return no(t,e,ke(),Te())},Za={};class $a extends Ea{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Vt(t);return new nu(e,this.ngModule)}}function tu(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const eu=new et("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>$t});class nu extends wa{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Dr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return tu(this.componentDef.inputs)}get outputs(){return tu(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Za,i);return o!==Za||r===Za?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ta,fe),s=i.get(xa,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(he(t))return t.selectRootElement(e,n===Tt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Yr(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:$t,clean:xi,playerHandler:null,flags:0},f=si(0,null,null,1,0,null,null,null,null,null),p=Jr(null,f,h,l,null,null,o,a,s,i);let d,g;qe(p);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Zr(s,0,2,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&($o(a,u,!0),null!==t&&(on(i,t,u),null!==a.classes&&Qi(i,t,a.classes),null!==a.styles&&Gi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Jr(n,oi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(_n(vn(a,n),s,e.type),gi(s,a),yi(a,n.length,1)),Ii(n,l),n[20]=l}(c,this.componentDef,p,o,a);if(c)if(n)on(a,c,["ng-version",ja.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Nr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&on(a,c,t),e&&e.length>0&&Qi(a,c,e.join(" "))}if(g=ve(f,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}d=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ke();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),di(t,r,1),mi(t,e,n));const i=In(e,t,e.length-1,r);Or(i,e);const o=ge(r,e);return o&&Or(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=ke();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Qe(a.index-Bt);const t=n[1];hi(t,e),fi(t,n,e.hostVars),pi(e,s)}return s}(t,this.componentDef,p,h,[ts]),$r(f,p,null)}finally{Ke()}return new ru(this.componentType,d,to(Oa,g,p),p,g)}}class ru extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Yi(r),this.componentType=t}get injector(){return new An(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const iu=new Map;class ou extends vt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $a(this);const n=qt(t),r=t[Z]||null;r&&fa(r),this._bootstrapComponents=ee(n.bootstrap),this._r3Injector=Co(t,e,[{provide:vt,useValue:this},{provide:Ea,useValue:this.componentFactoryResolver}],L(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=xo.THROW_IF_NOT_FOUND,n=O.Default){return t===xo||t===vt||t===nt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class su extends yt{constructor(t){super(),this.moduleType=t,null!==qt(t)&&function(t){const e=new Set;!function t(n){const r=qt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${L(e)} vs ${L(e.name)}`)}(i,iu.get(i),n),iu.set(i,n));const o=ee(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ou(this.moduleType,t)}}function au(t,e){const n=Se();let r;const i=t+Bt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=Ut(r.type)),s=lt(gs);try{const e=dn(!1),r=o();return dn(e),function(t,e,n,r){const i=n+Bt;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,Te(),t,r),r}finally{lt(s)}}function uu(t,e,n,r){const i=Te(),o=function(t,e){return t[e+Bt]}(i,t);return function(t,e){return us.isWrapped(e)&&(e=us.unwrap(e),t[Oe.lFrame.bindingIndex]=Mr),e}(i,function(t,e){return t[1].data[e+Bt].pure}(i,t)?function(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=hs(t,e,n);return hs(t,e+1,r)||i}(t,a,i,o)?function(t,e,n){return t[e]=n}(t,a+2,s?r.call(s,i,o):r(i,o)):function(t,e){const n=t[e];return n===Mr?void 0:n}(t,a+2)}(i,function(){const t=Oe.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,r,o):o.transform(n,r))}const cu=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function lu(){return this._results[as()]()}class hu{constructor(){this.dirty=!0,this._results=[],this.changes=new cu,this.length=0;const t=as(),e=hu.prototype;e[t]||(e[t]=lu)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class fu{constructor(t){this.queryList=t,this.matches=null}clone(){return new fu(this.queryList)}setDirty(){this.queryList.setDirty()}}class pu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new pu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Tu(t,e).matches&&this.queries[e].setDirty()}}class du{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class gu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new gu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class vu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new vu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&3===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,yu(e,i)),this.matchTNodeWithReadOption(t,e,On(e,t,i,!1,!1))}else n===Qa?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,On(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Oa||r===Ya||r===Qa&&0===e.type)this.addMatch(e.index,-2);else{const n=On(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function yu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function mu(t,e,n,r){return-1===n?function(t,e){return 2===t.type||3===t.type?to(Oa,t,e):0===t.type?eo(Qa,Oa,t,e):null}(e,t):-2===n?function(t,e,n){return n===Oa?to(Oa,e,t):n===Qa?eo(Qa,Oa,e,t):n===Ya?no(Ya,Oa,e,t):void 0}(t,e,r):In(t,t[1],n,e)}function bu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:mu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function _u(t){const e=Te(),n=Se(),r=Fe();Ve(r+1);const i=Tu(n,r);if(t.dirty&&be(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=bu(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=Ht;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):bu(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function wu(t,e,n){!function(t,e,n,r,i,o){t.firstCreatePass&&(Iu(t,new du(n,r,true,i),-1),t.staticViewQueries=!0),Ou(t,e)}(Se(),Te(),t,e,n)}function Cu(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(Iu(t,new du(n,r,false,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),Ou(t,e)}(Se(),Te(),e,n,r,0,ke(),t)}function Eu(){return t=Te(),e=Fe(),t[19].queries[e].queryList;var t,e}function Ou(t,e){const n=new hu;ai(t,e,n,n.destroy),null===e[19]&&(e[19]=new pu),e[19].queries.push(new fu(n))}function Iu(t,e,n){null===t.queries&&(t.queries=new gu),t.queries.track(new vu(e,n))}function Tu(t,e){return t.queries.getByIndex(e)}function Su(t=O.Default){const e=ro(!0);if(null!=e||t&O.Optional)return e;ne("ChangeDetectorRef")}const Au=new et("Application Initializer");let ku=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Es(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(ft(Au,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const xu=new et("AppId"),Nu={provide:xu,useFactory:function(){return`${ju()}${ju()}${ju()}`},deps:[]};function ju(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ru=new et("Platform Initializer"),Pu=new et("Platform ID"),Du=new et("appBootstrapListener");let Mu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Lu=new et("LocaleId"),Fu=new et("DefaultCurrencyCode");class Vu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Uu=function(t){return new su(t)},qu=Uu,Bu=function(t){return Promise.resolve(Uu(t))},Hu=function(t){const e=Uu(t),n=ee(qt(t).declarations).reduce((t,e)=>{const n=Vt(e);return n&&t.push(new nu(n)),t},[]);return new Vu(e,n)},zu=Hu,Wu=function(t){return Promise.resolve(Hu(t))};let Ku=(()=>{class t{constructor(){this.compileModuleSync=qu,this.compileModuleAsync=Bu,this.compileModuleAndAllComponentsSync=zu,this.compileModuleAndAllComponentsAsync=Wu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();const Gu=(()=>Promise.resolve(0))();function Qu(t){"undefined"==typeof Zone?Gu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Xu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new cu(!1),this.onMicrotaskEmpty=new cu(!1),this.onStable=new cu(!1),this.onError=new cu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=G.requestAnimationFrame,e=G.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(G,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,$u(t),Zu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),$u(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return tc(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),ec(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return tc(t),e.invoke(r,i,o,s,a)}finally{ec(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,$u(t),Zu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ju,Yu,Yu);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Yu(){}const Ju={};function Zu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $u(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function tc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ec(t){t._nesting--,Zu(t)}class nc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new cu,this.onMicrotaskEmpty=new cu,this.onStable=new cu,this.onError=new cu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let rc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xu.assertNotInAngularZone(),Qu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(ft(Xu))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})(),ic=(()=>{class t{constructor(){this._applications=new Map,uc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return uc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();class oc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function sc(t){uc=t}let ac,uc=new oc;const cc=new et("AllowMultipleToken");class lc{constructor(t,e){this.name=t,this.token=e}}function hc(t,e,n=[]){const r="Platform: "+e,i=new et(r);return(e=[])=>{let o=fc();if(!o||o.injector.get(cc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:vo,useValue:"platform"});!function(t){if(ac&&!ac.destroyed&&!ac.injector.get(cc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ac=t.get(pc);const e=t.get(Ru,null);e&&e.forEach(t=>t())}(xo.create({providers:t,name:r}))}return function(t){const e=fc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function fc(){return ac&&!ac.destroyed?ac:null}let pc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new nc:("zone.js"===t?void 0:t)||new Xu({enableLongStackTrace:Jn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Xu,useValue:n}];return n.run(()=>{const e=xo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Pn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>vc(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Es(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(ku);return t.runInitializers(),t.donePromise.then(()=>(fa(i.injector.get(Lu,la)||la),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=dc({},e);return function(t,e,n){const r=new su(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(gc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${L(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(ft(xo))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function dc(t,e){return Array.isArray(e)?e.reduce(dc,t):Object.assign(Object.assign({},t),e)}let gc=(()=>{class t{constructor(t,e,n,r,i,a){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Jn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Xu.assertNotInAngularZone(),Qu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Xu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(t=>{return u()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof wa?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(vt),i=n.create(xo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(rc,null);return o&&i.injector.get(ic).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Jn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;vc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Du,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),vc(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(ft(Xu),ft(Mu),ft(xo),ft(Pn),ft(Ea),ft(ku))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function vc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class yc{}class mc{}const bc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let _c=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||bc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>wc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>wc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(ft(Ku),ft(mc,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac}),t})();function wc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Cc=function(t){return null},Ec=hc(null,"core",[{provide:Pu,useValue:"unknown"},{provide:pc,deps:[xo]},{provide:ic,deps:[]},{provide:Mu,deps:[]}]),Oc=[{provide:gc,useClass:gc,deps:[Xu,Mu,xo,Pn,Ea,ku]},{provide:eu,deps:[Xu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:ku,useClass:ku,deps:[[new w,Au]]},{provide:Ku,useClass:Ku,deps:[]},Nu,{provide:Ha,useFactory:function(){return Ka},deps:[]},{provide:za,useFactory:function(){return Ga},deps:[]},{provide:Lu,useFactory:function(t){return fa(t=t||"undefined"!=typeof $localize&&$localize.locale||la),t},deps:[[new _(Lu),new w,new E]]},{provide:Fu,useValue:"USD"}];let Ic=(()=>{class t{constructor(t){}}return t.\u0275mod=Pt({type:t}),t.\u0275inj=A({factory:function(e){return new(e||t)(ft(gc))},providers:Oc}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){n(i=t[e].apply(t,r)).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return p}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return T})),n.d(e,"d",(function(){return U})),n.d(e,"e",(function(){return I})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return a})),n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return Y})),n.d(e,"k",(function(){return D})),n.d(e,"l",(function(){return q})),n.d(e,"m",(function(){return l})),n.d(e,"n",(function(){return h})),n.d(e,"o",(function(){return W})),n.d(e,"p",(function(){return p})),n.d(e,"q",(function(){return P})),n.d(e,"r",(function(){return v})),n.d(e,"s",(function(){return y})),n.d(e,"t",(function(){return b})),n.d(e,"u",(function(){return L})),n.d(e,"v",(function(){return _})),n.d(e,"w",(function(){return E})),n.d(e,"x",(function(){return d})),n.d(e,"y",(function(){return g})),n.d(e,"z",(function(){return C})),n.d(e,"A",(function(){return m})),n.d(e,"B",(function(){return w})),n.d(e,"C",(function(){return R})),n.d(e,"D",(function(){return x})),n.d(e,"E",(function(){return F})),n.d(e,"F",(function(){return V})),n.d(e,"G",(function(){return M})),n.d(e,"H",(function(){return X})),n.d(e,"I",(function(){return Q})),n.d(e,"J",(function(){return N})),n.d(e,"K",(function(){return z})),n.d(e,"L",(function(){return K})),n.d(e,"M",(function(){return G})),n.d(e,"N",(function(){return O}));var r=n("WVRz"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function _(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return p().indexOf("MSAppHost/")>=0}function C(){return!1}function E(){return"indexedDB"in self&&null!=indexedDB}function O(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function I(){return!(!navigator||!navigator.cookieEnabled)}var T=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,S.prototype.create),o}return Object(r.c)(e,t),e}(Error),S=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?A(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new T(i,a,r);return u},t}();function A(t,e){return t.replace(k,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var k=/\{\$([^}]+)}/g;function x(t){return JSON.parse(t)}function N(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=x(c(o[0])||""),n=x(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},P=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function L(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function V(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var U=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function H(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function K(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e,r)+"must be a valid function.")}function G(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},X=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Y(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},qgXg:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return y})),n.d(e,"f",(function(){return O})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return C}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class p{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function d(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],v=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.P("6.1.1");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));return JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`),o}const C=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function O(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s)return o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`),s;{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const I={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Jb({type:t}),t.\u0275inj=u.Ib({factory:function(e){return new(e||t)(u.Sb(u.B))},providers:[I]}),t})()}).call(this,n("3UD+")(t))},t6oF:function(t,e,n){"use strict";var r=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Pa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Pa(o(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++m)}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function C(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function O(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=k+t,this.message=e||x[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new T(e.substring(k.length),t.message,t.serverResponse):null}O(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var A,k="auth/",x={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function j(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function M(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}A=j("__EID__")?"__EID__":void 0,O(P,Error),P.prototype.name="CustomError",O(D,P),D.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new L((function(){return new B}),(function(t){t.reset()}));function q(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var H=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},W=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=H(t,e)}function X(t,e){var n;return(n=0<=(e=H(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var $,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=a.navigator;if(lt){var ht=lt.userAgent;if(ht){$=ht;break t}}$=""}function ft(t){return ut($,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Et&&e||"",this.b=Ct}function _t(t){return t instanceof bt&&t.constructor===bt&&t.b===Ct?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,Ct={},Et={};function Ot(){if(void 0===wt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){a.console&&a.console.error(n.message)}wt=t}else wt=t}return wt}function It(t,e){this.a=e===xt?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=_t(t);if(!kt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Ot();return new It(t=e?e.createScriptURL(t):t,xt)}(t=n.replace(At,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?_t(t):encodeURIComponent(String(t))})))}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var At=/%{(\w+)}/g,kt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,xt={};function Nt(t,e){this.a=e===Ft?t:""}function jt(t){return t instanceof Nt&&t.constructor===Nt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Nt.prototype.sa=!0,Nt.prototype.ra=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t))t=new Nt(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&Rt.test(e[1])?new Nt(t,Ft):null}return t}function Lt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Ft))}var Ft={},Vt=new Nt("about:invalid#zClosurez",Ft);function Ut(t,e,n){this.a=n===qt?t:""}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qt={};function Bt(t,e,n,r){return t=t instanceof Nt?t:Lt(t),e=e||a,n=n instanceof bt?_t(n):n||"",e.open(jt(t),n,r,void 0)}function Ht(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function zt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Wt(t){return Wt[" "](t),t}Wt[" "]=h;var Kt,Gt,Qt=ft("Opera"),Xt=ft("Trident")||ft("MSIE"),Yt=ft("Edge"),Jt=Yt||Xt,Zt=ft("Gecko")&&!(ut($.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),$t=ut($.toLowerCase(),"webkit")&&!ft("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Gt=$,Zt?/rv:([^\);]+)(\)|;)/.exec(Gt):Yt?/Edge\/([\d\.]+)/.exec(Gt):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):$t?/WebKit\/(\S+)/.exec(Gt):Qt?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ne&&(ee=ne?ne[1]:""),Xt){var re=te();if(null!=re&&re>parseFloat(ee)){Kt=String(re);break t}}Kt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=tt(String(Kt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var se=a.document&&Xt&&(te()||parseInt(Kt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var ae=!Xt||9<=Number(se);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){s="function"==typeof o.item;break t}}s=!1}z(s?Z(o):o,r)}}}function de(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout((function(){throw t}),0)}function ve(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(be)}}else he=function(){var t=be;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=de(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ye||(he(),ye=!0),me.add(t,e)}var ye=!1,me=new V;function be(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}F(U,t)}ye=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Re(n,Ce,t)}),(function(t){if(!(t instanceof Ue))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Re(n,Ee,t)}))}catch(r){Re(this,Ee,r)}}var we=0,Ce=2,Ee=3;function Oe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Oe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ie=new L((function(){return new Oe}),(function(t){t.reset()}));function Te(t,e,n){var r=Ie.get();return r.g=t,r.b=e,r.f=n,r}function Se(t){if(t instanceof _e)return t;var e=new _e(h);return Re(e,Ce,t),e}function Ae(t){return new _e((function(e,n){n(t)}))}function ke(t,e,n){Pe(t,e,n,null)||ve(C(e,t))}function xe(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],C(i,o,!0),C(i,o,!1));else e(r)}))}function Ne(t,e){t.b||t.a!=Ce&&t.a!=Ee||De(t),t.f?t.f.next=e:t.b=e,t.f=e}function je(t,e,n,r){var i=Te(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ue?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Ne(t,i),i.a}function Re(t,e,n){t.a==we&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Pe(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,De(t),e!=Ee||n instanceof Ue||function(t,e){t.g=!0,ve((function(){t.g&&Ve.call(null,e)}))}(t,n)))}function Pe(t,e,n,r){if(t instanceof _e)return Ne(t,Te(e||h,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function De(t){t.h||(t.h=!0,ve(t.fc,t))}function Me(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Le(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(i){Ve.call(null,i)}F(Ie,e)}function Fe(t,e,n){e==Ce?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return je(this,d(t)?t:null,d(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).na=function(t,e){return(t=Te(t,t,e)).c=!0,Ne(this,t),this},t.s=function(t,e){return je(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new Ue(t);ve((function(){!function t(e,n){if(e.a==we)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==we&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Me(r),Le(r,o,Ee,n)))}e.c=null}else Re(e,Ee,n)}(this,e)}),this)}},t.Zc=function(t){this.a=we,Re(this,Ce,t)},t.$c=function(t){this.a=we,Re(this,Ee,t)},t.fc=function(){for(var t;t=Me(this);)Le(this,t,this.a,this.i);this.h=!1};var Ve=ge;function Ue(t){P.call(this,t)}function qe(){0!=Be&&(He[v(this)]=this),this.xa=this.xa,this.oa=this.oa}O(Ue,P),Ue.prototype.name="cancel";var Be=0,He={};function ze(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Be)){var e=v(t);if(0!=Be&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete He[e]}}qe.prototype.xa=!1,qe.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var We=Object.freeze||function(t){return t},Ke=!Xt||9<=Number(se),Ge=Xt&&!oe("9"),Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",h,e),a.removeEventListener("test",h,e)}catch(n){}return t}();function Xe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if(Xe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Wt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Xe.prototype.preventDefault=function(){this.defaultPrevented=!0},O(Ye,Xe);var Je=We({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ye.prototype.g=function(){return this.a};var Ze="closure_listenable_"+(1e6*Math.random()|0),$e=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++$e,this.va=this.Oa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new tn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Ze]?wn(t,e,n,g(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=yn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=Ke?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Ze]?Cn(t,e,n,g(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=bn(n),t&&t[Ze]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Ze])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&fn(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!Ke){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Ye(e,this))}function yn(t){return(t=t[sn])instanceof nn?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function _n(){qe.call(this),this.v=new nn(this),this.$b=this,this.fb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Cn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Ua||s.src;s.Oa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function On(t,e,n){if(d(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function In(t){var e=null;return new _e((function(n,r){-1==(e=On((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw a.clearTimeout(e),t}))}function Tn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function kn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}O(_n,qe),_n.prototype[Ze]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Xe(t,n);else if(t instanceof Xe)t.target=t.target||n;else{var i=t;yt(t=new Xe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=En(s,r,!0,t)&&i}if(i=En(s=t.b=n,r,!0,t)&&i,i=En(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(s=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=An.prototype).V=function(){kn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return kn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return xn(this.b,t)?this.b[t]:e},t.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof jn?(this.i=void 0!==e?e:t.i,Rn(this,t.f),this.l=t.l,this.a=t.a,Pn(this,t.g),this.c=t.c,Dn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Nn))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),Pn(this,n[4]),this.c=Un(n[5]||"",!0),Dn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Rn(t,e,n){t.f=n?Un(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Pn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Dn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&(Xn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Jn(this,e),$n(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Kn)),t.b=new Qn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Ln(t,e){return t.b.get(e)}function Fn(t){return t instanceof jn?new jn(t):new jn(t,void 0)}function Vn(t,e,n,r){var i=new jn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&Pn(i,n),r&&(i.c=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}jn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Wn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Gn)),t.join("")},jn.prototype.resolve=function(t){var e=new jn(this),n=!!t.f;n?Rn(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Pn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?Dn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Hn=/[#\/\?@]/g,zn=/[#\?:]/g,Wn=/[#\?]/g,Kn=/[#\?@]/g,Gn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Xn(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=Sn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Tn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?$n(n,i,o):n.add(i,o)}return n}function Jn(t,e){Xn(t),e=er(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&kn(t)))}function Zn(t,e){return Xn(t),e=er(t,e),xn(t.a.b,e)}function $n(t,e,n){Jn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Z(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),sr(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":sr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new rr,t,e),e.join("")}function rr(){}(t=Qn.prototype).add=function(t,e){Xn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Xn(this),this.a.forEach((function(n,r){z(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Xn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Xn(this);var e=[];if("string"==typeof t)Zn(this,t)&&(e=J(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return Xn(this),this.c=null,Zn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function ar(){var t=Tr();return Xt&&!!se&&11==se||/Edge\/\d+/.test(t)}function ur(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||a.window;var n="about:blank";t&&(n=jt(Mt(t)||Vt)),e.location.href=n}function lr(t){return!!((t=(t||Tr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function hr(t){t=t||a.window;try{t.close()}catch(e){}}function fr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Tr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Er(Tr())==wr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Mt(void 0!==n.href?n.href:String(n))||Vt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(mt(s=de(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Lt(e),s.href=jt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Bt("",r,n,s),t=jt(e),s&&(Jt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+zt(t)+'">',t=new Ut(t=(r=Ot())?r.createHTML(t):t,null,qt),r=s.document)&&(r.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Bt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var pr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new _e((function(e){"complete"==a.document.readyState?e():(t=function(){e()},ln(window,"load",t))})).s((function(e){throw hn(window,"load",t),e}))}function vr(t){return t=t||Tr(),!("file:"!==Nr()&&"ionic:"!==Nr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function mr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function br(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":mr()?"Worker":"Browser"}function _r(){var t=br();return"ReactNative"===t||"Node"===t}var wr="Firefox",Cr="Chrome";function Er(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?wr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Cr:"Safari"}var Or={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Ir(t,e){e=e||[];var n,r=[],i={};for(n in Or)i[Or[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=br())?r=Er(i=Tr()):"Worker"===r&&(r=Er(i=Tr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Tr(){return a.navigator&&a.navigator.userAgent||""}function Sr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ar(){try{var t=a.localStorage,e=Mr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ar()||!!a.indexedDB}catch(n){return mr()&&!!a.indexedDB}return!1}function kr(){return(xr()||"chrome-extension:"===Nr()||vr())&&!_r()&&Ar()&&!mr()}function xr(){return"http:"===Nr()||"https:"===Nr()}function Nr(){return a.location&&a.location.protocol||null}function jr(t){return!lr(t=t||Tr())&&Er(t)!=wr}function Rr(t){return void 0===t?null:nr(t)}function Pr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Dr(t){if(null!==t)return JSON.parse(t)}function Mr(t){return t||Math.floor(1e9*Math.random()).toString()}function Lr(t){return"Safari"!=Er(t=t||Tr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Fr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Tr(),e=br(),this.b=lr(t)||"ReactNative"===e}function Ur(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function qr(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Br(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Hr(){return!(!Sr("fireauth.oauthhelper",a)&&!Sr("fireauth.iframe",a))}Vr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!xr()&&"chrome-extension:"!==Nr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var zr,Wr={};function Kr(t){Wr[t]||(Wr[t]=!0,qr(t))}try{var Gr={};Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Gr,"abcd",{configurable:!0,enumerable:!0,value:2}),zr=2==Gr.abcd}catch(Gt){zr=!1}function Qr(t,e,n){zr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Yr(t){var e={};return Xr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ri]?"phone":null);if(!(e&&t&&t[ni]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ni]),Qr(this,"displayName",t[ti]||null);var n=null;t[ei]&&(n=new Date(t[ei]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function $r(t){try{var e=new ii(t)}catch(n){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ti="displayName",ei="enrolledAt",ni="mfaEnrollmentId",ri="phoneInfo";function ii(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ri])}function oi(t){var e={},n=t[ci],r=t[hi],i=t[fi];if(t=$r(t[li]),!i||i!=ai&&i!=ui&&!n||i==ui&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ui?(e[di]=n||null,e[vi]=n||null,e[pi]=r):(e[di]=r||null,e[vi]=r||null,e[pi]=n||null),e[gi]=t||null,Qr(this,mi,i),Qr(this,yi,Jr(e))}O(ii,Zr),ii.prototype.w=function(){var t=ii.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ai="EMAIL_SIGNIN",ui="VERIFY_AND_CHANGE_EMAIL",ci="email",li="mfaInfo",hi="newEmail",fi="requestType",pi="email",di="fromEmail",gi="multiFactorInfo",vi="previousEmail",yi="data",mi="operation";function bi(t){var e=Ln(t=Fn(t),_i)||null,n=Ln(t,wi)||null,r=Ln(t,Oi)||null;if(r=r&&Ti[r]||null,!e||!n||!r)throw new T("argument-error",_i+", "+wi+"and "+Oi+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Ln(t,Ci)||null,languageCode:Ln(t,Ei)||null,tenantId:Ln(t,Ii)||null})}var _i="apiKey",wi="oobCode",Ci="continueUrl",Ei="languageCode",Oi="mode",Ii="tenantId",Ti={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ai,verifyAndChangeEmail:ui,verifyEmail:"VERIFY_EMAIL"};function Si(t){try{return new bi(t)}catch(e){return null}}function Ai(t){var e=t[Ri];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ki];if(n&&"object"==typeof n){e=n[Mi];var r=n[Pi];if(n=n[Di],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Pi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Di+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",ki+" property must be a non null object when specified.");if(this.f=null,(e=t[ji])&&"object"==typeof e){if("string"==typeof(e=e[Li])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Li+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",ji+" property must be a non null object when specified.");if(void 0!==(e=t[Ni])&&"boolean"!=typeof e)throw new T("argument-error",Ni+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var ki="android",xi="dynamicLinkDomain",Ni="handleCodeInApp",ji="iOS",Ri="url",Pi="installApp",Di="minimumVersion",Mi="packageName",Li="bundleId";function Fi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function Ui(t){var e=Bi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,E(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function qi(t){try{return new Ui(t)}catch(e){return null}}function Bi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(r){}return null}Ui.prototype.S=function(){return this.f},Ui.prototype.i=function(){return this.b},Ui.prototype.toString=function(){return this.g};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),zi=["client_id","response_type","scope","redirect_uri","state"],Wi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:zi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:zi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:zi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Hi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Ki(t){for(var e in Wi)if(Wi[e].fa==t)return Wi[e];return null}function Gi(t){var e={};e["facebook.com"]=Zi,e["google.com"]=to,e["github.com"]=$i,e["twitter.com"]=eo;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[Qi])return new Yi(t)}catch(r){}return null}var Qi="idToken",Xi="providerId";function Yi(t){var e=t[Xi];if(!e&&t[Qi]){var n=qi(t[Qi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Ji(t){Yi.call(this,t),Qr(this,"profile",Jr((t=Dr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function $i(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function to(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function no(t){var e=Fn(t),n=Ln(e,"link"),r=Ln(Fn(n),"link");return e=Ln(e,"deep_link_id"),Ln(Fn(e),"link")||e||r||n||t}function ro(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?io:oo}O(Ji,Yi),O(Zi,Ji),O($i,Ji),O(to,Ji),O(eo,Ji);var io="enroll",oo="signin";function so(){}function ao(t,e){return t.then((function(t){if(t[Gs]){var n=qi(t[Gs]);if(!n||e!=n.h)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==k+"user-not-found"?new T("user-mismatch"):t}))}function uo(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function co(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function lo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new uo(t.providerId,t.pendingToken)}catch(e){}return null}function ho(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function fo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function po(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ho(t.providerId,e,t.signInMethod)}catch(n){}}return null}function go(t,e){this.Pc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Ki(t)||{}).Ja||null,this.nb=null}function vo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function yo(t){go.call(this,t,zi),this.a=[]}function mo(){yo.call(this,"facebook.com")}function bo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new mo).credential({accessToken:e})}function _o(){yo.call(this,"github.com")}function wo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Co(){yo.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Co).credential({idToken:n,accessToken:e})}function Oo(){go.call(this,"twitter.com",Hi)}function Io(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ho("twitter.com",n,"twitter.com")}function To(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function So(t){return t&&t.email&&t.password?new To(t.email,t.password,t.signInMethod):null}function Ao(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function ko(t,e){if(!(e=xo(e)))throw new T("argument-error","Invalid email link!");return new To(t,e.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Si(t=no(t)))&&t.operation===ai?t:null}function No(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new T("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function jo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new No(e)}return null}function Ro(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Po(t){try{this.a=t||r.a.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Do(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new No({cb:t,bb:e})}function Mo(t){if(t.temporaryProof&&t.phoneNumber)return new No({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return bo(n);case"github.com":return wo(n);case"twitter.com":return Io(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new uo(e,s):new ho(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new yo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Lo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Fo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new Fo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function Uo(){this.b=null,this.a=[]}ro.prototype.Ha=function(){return Se(this.a?this.a:this.b)},ro.prototype.w=function(){return this.type==io?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},so.prototype.ja=function(){},so.prototype.b=function(){},so.prototype.c=function(){},so.prototype.w=function(){},uo.prototype.ja=function(t){return da(t,co(this))},uo.prototype.b=function(t,e){var n=co(this);return n.idToken=e,ga(t,n)},uo.prototype.c=function(t,e){return ao(va(t,co(this)),e)},uo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ho.prototype.ja=function(t){return da(t,fo(this))},ho.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,ga(t,n)},ho.prototype.c=function(t,e){return ao(va(t,fo(this)),e)},ho.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Hb=gt(t),this},O(vo,go),O(yo,go),yo.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},yo.prototype.Pb=function(){return Z(this.a)},yo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new ho(this.providerId,n,this.providerId)},O(mo,yo),Qr(mo,"PROVIDER_ID","facebook.com"),Qr(mo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),O(_o,yo),Qr(_o,"PROVIDER_ID","github.com"),Qr(_o,"GITHUB_SIGN_IN_METHOD","github.com"),O(Co,yo),Qr(Co,"PROVIDER_ID","google.com"),Qr(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),O(Oo,go),Qr(Oo,"PROVIDER_ID","twitter.com"),Qr(Oo,"TWITTER_SIGN_IN_METHOD","twitter.com"),To.prototype.ja=function(t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?Ja(t,Oa,{email:this.a,oobCode:this.f}):Ja(t,Ka,{email:this.a,password:this.f})},To.prototype.b=function(t,e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?Ja(t,Ia,{idToken:e,email:this.a,oobCode:this.f}):Ja(t,Fa,{idToken:e,email:this.a,password:this.f})},To.prototype.c=function(t,e){return ao(this.ja(t),e)},To.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Ao,{PROVIDER_ID:"password"}),Xr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),No.prototype.ja=function(t){return t.eb(Ro(this))},No.prototype.b=function(t,e){var n=Ro(this);return n.idToken=e,Ja(t,Qa,n)},No.prototype.c=function(t,e){var n=Ro(this);return n.operation="REAUTH",ao(t=Ja(t,Xa,n),e)},No.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Po.prototype.eb=function(t,e){var n=this.a.a;return Se(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==io?i.Ha().then((function(t){return function(t,e){return Ja(t,Ua,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==oo?i.Ha().then((function(e){return function(t,e){return Ja(t,qa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return Ja(t,Ma,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Po,{PROVIDER_ID:"phone"}),Xr(Po,{PHONE_SIGN_IN_METHOD:"phone"}),Fo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Fo.prototype.S=function(){return this.h},Fo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var qo,Bo=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Ht("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ht("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function zo(t,e,n){T.call(this,t,n),(t=e||{}).Ib&&Qr(this,"email",t.Ib),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.Yb&&Qr(this,"tenantId",t.Yb)}function Wo(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Mo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new zo(e,n,t.message)}return null}function Ko(){}function Go(){}function Qo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Xo(){}function Yo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.pc,this),this.a.onerror=w(this.Rb,this),this.a.onprogress=w(this.qc,this),this.a.ontimeout=w(this.uc,this)}function Jo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function $o(t){this.f=t,this.b=this.c=this.a=null}function ts(t,e){this.name=t,this.value=e}O(Ho,T),O(zo,T),zo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},zo.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,O(Go,Ko),Go.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Go.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},qo=new Go,O(Xo,Ko),Xo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Yo;throw Error("Unsupported browser")},Xo.prototype.b=function(){return{}},(t=Yo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Jo(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",Jo(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,Jo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Zo.prototype.a=null,Zo.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},ts.prototype.toString=function(){return this.name};var es=new ts("SEVERE",1e3),ns=new ts("WARNING",900),rs=new ts("CONFIG",700),is=new ts("FINE",500);$o.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(M("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var os={},ss=null;function as(t){var e;if(ss||(ss=new $o(""),os[""]=ss,ss.c=rs),!(e=os[t])){e=new $o(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=as(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,os[t]=e}return e}function us(t,e){t&&t.log(is,e,void 0)}function cs(t){this.f=t}function ls(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=hs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.o="GET",this.f="",this.a=!1,this.i=as("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}O(cs,Ko),cs.prototype.a=function(){return new ls(this.f)},cs.prototype.b=function(t){return function(){return t}}({}),O(ls,_n);var hs=0;function fs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ps(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ds(t)}function ds(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function gs(t){_n.call(this),this.headers=new An,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=vs,this.u=this.R=!1}(t=ls.prototype).open=function(t,e){if(this.readyState!=hs)throw this.abort(),Error("Error reopening a connection");this.o=t,this.f=e,this.readyState=1,ds(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.o,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ps(this)),this.readyState=hs},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ds(this)),this.a&&(this.readyState=3,ds(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,fs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ps(this):ds(this),3==this.readyState&&fs(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,ps(this))},t.rc=function(t){this.a&&(this.response=t,ps(this))},t.Ta=function(t){var e=this.i;e&&e.log(ns,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ps(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ns,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ns,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),O(gs,_n);var vs="";gs.prototype.b=as("goog.net.XhrIo");var ys=/^https?$/i,ms=["POST","PUT"];function bs(t){return"content-type"==t.toLowerCase()}function _s(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ws(t),Es(t)}function ws(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Cs(t){if(t.c&&void 0!==s)if(t.A[1]&&4==Is(t)&&2==Ts(t))us(t.b,Ss(t,"Local request error detected and ignored"));else if(t.i&&4==Is(t))On(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Is(t)){us(t.b,Ss(t,"Request complete")),t.c=!1;try{var e,n=Ts(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Nn)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!ys.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Is(t)?t.a.statusText:""}catch(l){us(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Ts(t)+"]",ws(t)}}finally{Es(t)}}}function Es(t,e){if(t.a){Os(t);var n=t.a,r=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(es,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Os(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(a.clearTimeout(t.o),t.o=null)}function Is(t){return t.a?t.a.readyState:0}function Ts(t){try{return 2<Is(t)?t.a.status:-1}catch(e){return-1}}function Ss(t,e){return e+" ["+t.P+" "+t.l+" "+Ts(t)+"]"}function As(t){var e=Vs;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function ks(t,e,n){t.a=!0,t.c=n,t.f=!e,Rs(t)}function xs(t){if(t.a){if(!t.m)throw new Ps(t);t.m=!1}}function Ns(t,e,n,r){t.g.push([e,n,r]),t.a&&Rs(t)}function js(t){return G(t.g,(function(t){return d(t[1])}))}function Rs(t){if(t.h&&t.a&&js(t)){var e=t.h,n=Ls[e];n&&(a.clearTimeout(n.a),delete Ls[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.o,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,js(t)||(n=!0)}}t.c=e,r&&(u=w(t.v,t,!0),r=w(t.v,t,!1),e instanceof As?(Ns(e,u,r),e.A=!0):e.then(u,r)),n&&(e=new Ms(e),Ls[e.a]=e,t.h=e.a)}function Ps(){P.call(this)}function Ds(){P.call(this)}function Ms(t){this.a=a.setTimeout(w(this.c,this),0),this.b=t}(t=gs.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",us(this.b,Ss(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(us(this.b,Ss(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Es(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Es(this,!0)),gs.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?Cs(this):this.Ic())},t.Ic=function(){Cs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case vs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(es,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return us(this.b,"Can not get response: "+e.message),null}},As.prototype.cancel=function(t){if(this.a)this.c instanceof As&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Ds(this),xs(this),ks(this,!1,t))}},As.prototype.v=function(t,e){this.i=!1,ks(this,t,e)},As.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Ns(this,r,(function(t){t instanceof Ds?o.cancel():i(t)})),o.then(t,e,n)},As.prototype.$goog_Thenable=!0,O(Ps,P),Ps.prototype.message="Deferred has already fired",Ps.prototype.name="AlreadyCalledError",O(Ds,P),Ds.prototype.message="Deferred was canceled",Ds.prototype.name="CanceledError",Ms.prototype.c=function(){throw delete Ls[this.a],this.b};var Ls={};function Fs(t){var e={},n=e.document||document,r=Tt(t).toString(),i=de(document,"SCRIPT"),o={Vb:i,Ma:void 0},s=new As(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){Us(i,!0);var t=new Hs(Bs,"Timeout reached for loading script "+r);xs(s),ks(s,!1,t)}),h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Us(i,e.wd||!1,u),xs(s),ks(s,!0,null))},i.onerror=function(){Us(i,!0,u);var t=new Hs(qs,"Error while loading script "+r);xs(s),ks(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){mt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=l(e.document):(null===c&&(c=l(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Vs(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Us(t,!0,this.Ma)}}function Us(t,e,n){null!=n&&a.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var qs=0,Bs=1;function Hs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function zs(t){this.f=t}function Ws(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Qs,this.g=gt(t.secureTokenHeaders||Xs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||Ys,this.a=gt(t.firebaseHeaders||Js),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==br(),!(n=a.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!mr())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=mr()?new cs(self):_r()?new zs(n):new Xo,this.b=null}O(Hs,P),O(zs,Ko),zs.prototype.a=function(){return new this.f},zs.prototype.b=function(){return{}};var Ks,Gs="idToken",Qs=new Vr(3e4,6e4),Xs={"Content-Type":"application/x-www-form-urlencoded"},Ys=new Vr(3e4,6e4),Js={"Content-Type":"application/json"};function Zs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function $s(t,e){e&&(t.l=ta("https://securetoken.googleapis.com/v1/token",e),t.h=ta("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ta("https://identitytoolkit.googleapis.com/v2/",e))}function ta(t,e){return t=Fn(t),e=Fn(e.url),t.c=t.a+t.c,Rn(t,e.f),t.a=e.a,Pn(t,e.g),t.toString()}function ea(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function na(t,e,n,r,i,o,s){(function(){var t=Tr();return!((t=Er(t)!=Cr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Xt&&se&&!(9<se))})()||mr()?t=w(t.u,t):(Ks||(Ks=new _e((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[ia]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ns(t,null,e,void 0)}(Fs(St(ra,{onload:ia})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=w(t.o,t)),t(e,n,r,i,o,s)}Ws.prototype.S=function(){return this.b},Ws.prototype.u=function(t,e,n,r,i,o){if(mr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new gs(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}wn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return us(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),Cn(s,"ready",(function(){u&&clearTimeout(u),ze(this)})),Cn(s,"timeout",(function(){u&&clearTimeout(u),ze(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():qo.a(),t.A=function(t){return t.c||(t.c=t.b())}(t.O?t.O:qo),t.a.onreadystatechange=w(t.Ub,t);try{us(t.b,Ss(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return us(t.b,Ss(t,"Error opening Xhr: "+s.message)),void _s(t,s)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)z(t,e,void 0);else for(var n=Sn(t),r=Tn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=bs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!Q(ms,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Os(t),0<t.g&&(t.u=function(t){return Xt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),us(t.b,Ss(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.o=On(t.Ma,t.g,t)),us(t.b,Ss(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){us(t.b,Ss(t,"Send error: "+s.message)),_s(t,s)}}(s,t,n,r,i)};var ra=new bt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),ia="__fcb"+Math.floor(1e6*Math.random()).toString();function oa(t){if("string"!=typeof(t=t.email)||!dr.test(t))throw new T("invalid-email")}function sa(t){"email"in t&&oa(t)}function aa(t){if(!t[Gs]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,gt(t));throw new T("internal-error")}}function ua(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Ws.prototype.o=function(t,e,n,r,i){var o=this;Ks.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ws.prototype.yb=function(){return Ja(this,Va,{})},Ws.prototype.Ab=function(t,e){return Ja(this,La,{idToken:t,email:e})},Ws.prototype.Bb=function(t,e){return Ja(this,Fa,{idToken:t,password:e})};var ca={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function la(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ha(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function fa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Zn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function pa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Wo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Wo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Wo(t)):t.errorMessage&&(e=Za(t.errorMessage)),e)throw e;aa(t)}function da(t,e){return e.returnIdpCredential=!0,Ja(t,Ba,e)}function ga(t,e){return e.returnIdpCredential=!0,Ja(t,za,e)}function va(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ja(t,Ha,e)}function ya(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Ws.prototype).Cb=function(t,e){var n={idToken:t},r=[];return pt(ca,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ja(this,La,n)},t.ub=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),Ja(this,ja,t)},t.vb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ja(this,ka,t)},t.tb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ja(this,xa,t)},t.Db=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ja(this,Na,t)},t.eb=function(t){return Ja(this,Ga,t)},t.mb=function(t,e){return Ja(this,Da,{oobCode:t,newPassword:e})},t.Qa=function(t){return Ja(this,ba,{oobCode:t})},t.ib=function(t){return Ja(this,ma,{oobCode:t})};var ma={endpoint:"setAccountInfo",B:ya,Z:"email",C:!0},ba={endpoint:"resetPassword",B:ya,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},C:!0},_a={endpoint:"signupNewUser",B:function(t){if(oa(t),!t.password)throw new T("weak-password")},F:aa,U:!0,C:!0},wa={endpoint:"createAuthUri",C:!0},Ca={endpoint:"deleteAccount",M:["idToken"]},Ea={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Oa={endpoint:"emailLinkSignin",M:["email","oobCode"],B:oa,F:aa,U:!0,C:!0},Ia={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:oa,F:aa,U:!0},Ta={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:la,F:aa,C:!0,Na:!0},Sa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:la,F:aa,C:!0,Na:!0},Aa={endpoint:"getAccountInfo"},ka={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");oa(t)},Z:"email",C:!0},xa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",C:!0},ja={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");oa(t)},Z:"email",C:!0},Ra={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Pa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},Da={endpoint:"resetPassword",B:ya,Z:"email",C:!0},Ma={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},La={endpoint:"setAccountInfo",M:["idToken"],B:sa,U:!0},Fa={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(sa(t),!t.password)throw new T("weak-password")},F:aa,U:!0},Va={endpoint:"signupNewUser",F:aa,U:!0,C:!0},Ua={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},C:!0,Na:!0},qa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},C:!0,Na:!0},Ba={endpoint:"verifyAssertion",B:ha,Xa:fa,F:pa,U:!0,C:!0},Ha={endpoint:"verifyAssertion",B:ha,Xa:fa,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw Za(t.errorMessage);aa(t)},U:!0,C:!0},za={endpoint:"verifyAssertion",B:function(t){if(ha(t),!t.idToken)throw new T("internal-error")},Xa:fa,F:pa,U:!0},Wa={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new T("invalid-custom-token")},F:aa,U:!0,C:!0},Ka={endpoint:"verifyPassword",B:function(t){if(oa(t),!t.password)throw new T("wrong-password")},F:aa,U:!0,C:!0},Ga={endpoint:"verifyPhoneNumber",B:ua,F:aa,C:!0},Qa={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new T("internal-error");ua(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Wo(t);aa(t)}},Xa={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:ua,F:aa,C:!0},Ya={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Gs]^!!t.refreshToken)throw new T("internal-error")},C:!0,Na:!0};function Ja(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Ae(new T("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Se(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Fn(e+n);Mn(a,"key",t.c),s&&Mn(a,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(a,c,i[c]);return new _e((function(e,n){na(t,a.toString(),(function(t){t?t.error?n($a(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Pr(i)),t.a,t.m.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function Za(t){return $a({error:{errors:[{message:t}],code:400,message:t}})}function $a(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Rr(t)),new T("internal-error",e)}function tu(t){this.b=t,this.a=null,this.qb=function(t){return(iu||(iu=new _e((function(t,e){function n(){Fr(),Sr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Fr(),e(Error("Network Error"))},timeout:nu.get()})}if(Sr("gapi.iframes.Iframe"))t();else if(Sr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Sr("gapi.load")?n():e(Error("Network Error"))},Se(Fs(r=St(eu,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw iu=null,t})))).then((function(){return new _e((function(e,n){Sr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ru.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var eu=new bt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),nu=new Vr(3e4,6e4),ru=new Vr(5e3,15e3),iu=null;function ou(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Vn((t=Fn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function su(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function au(t){try{return r.a.app(t).auth().Ga()}catch(e){return[]}}function uu(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function cu(t){var e=ur();return function(t){return Ja(t,Ra,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:pr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ho(ur())}))}function lu(t){return t.v||(t.v=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=au(t.b),i=new ou(t.o,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.m=new tu(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Se(n)}return n.status="ERROR",Se(n)}))}(t)}))),t.v}function hu(t){return t.l||(t.A=t.c?Ir(t.c,au(t.b)):null,t.l=new Ws(t.g,j(t.i),t.A),t.f&&$s(t.l,t.f)),t.l}function fu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new su(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.xb(l).toString()}function pu(t){if(this.a=t||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function du(t){this.b=t,this.a={},this.f=w(this.c,this)}ou.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):Jn(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):Jn(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):Jn(this.a.b,"fw"),this.a.toString()},su.prototype.xb=function(t){return this.h=t,this},su.prototype.toString=function(){if(this.m){var t=Fn(this.m.url);t=Vn(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.o),Mn(t,"appName",this.c),Mn(t,"authType",this.v),this.a.isOAuthProvider){var e=this.a;try{var n=r.a.app(this.c).auth().ka()}catch(u){n=null}for(var i in e.nb=n,Mn(t,"providerId",this.a.providerId),e=Pr((n=this.a).Hb))e[i]=e[i].toString();i=n.Pc,e=gt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.ob&&n.nb&&!e[n.ob]&&(e[n.ob]=n.nb),dt(e)||Mn(t,"customParameters",Rr(e))}if("function"==typeof this.a.Pb&&(n=this.a.Pb()).length&&Mn(t,"scopes",n.join(",")),this.l?Mn(t,"redirectUrl",this.l):Jn(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):Jn(t.b,"eventId"),this.i?Mn(t,"v",this.i):Jn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Ln(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):Jn(t.b,"tid"),this.f?Mn(t,"eid",this.f):Jn(t.b,"eid"),(a=au(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=uu.prototype).Nb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return lu(t).then((function(){return function(t,e){return t.qb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,Sr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&hr(t),e(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(t){return new _e((function(e){return function n(){In(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return In(n).then((function(){e(r)}))}))},t.Wb=function(){var t=Tr();return!jr(t)&&!Lr(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,s,a){if(!t)return Ae(new T("popup-blocked"));if(s&&!jr())return this.la().s((function(e){hr(t),i(e)})),r(),Se();this.a||(this.a=cu(hu(this)));var u=this;return this.a.then((function(){var e=u.la().s((function(e){throw hr(t),i(e),e}));return r(),e})).then((function(){Lo(n),s||cr(fu(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=cu(hu(this)));var i=this;return this.a.then((function(){Lo(e),cr(fu(i.o,i.g,i.b,t,e,ur(),n,i.c,void 0,i.i,r,i.f))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return lu(this).then((function(){return t.m.qb})).s((function(){throw t.a=null,new T("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){Y(this.h,(function(e){return e==t}))},(t=pu.prototype).get=function(t){return Se(this.a.getItem(t)).then((function(t){return t&&Dr(t)}))},t.set=function(t,e){return Se(this.a.setItem(t,Rr(e)))},t.T=function(t){return Se(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var gu,vu=[];function yu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function mu(t){this.a=t}function bu(t){this.c=t,this.b=!1,this.a=[]}function _u(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return wu(t,c),e})).s((function(e){throw wu(t,c),e}))}function wu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Cu(){if(!Iu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=a.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.o=!1,this.h=null;var t=this;mr()&&self?(this.m=function(){var t=mr()?self:null;if(z(vu,(function(n){n.b==t&&(e=n)})),!e){var e=new du(t);vu.push(e)}return e}(),yu(this.m,"keyChanged",(function(e,n){return xu(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),yu(this.m,"ping",(function(){return Se(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Se().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Se(null)}().then((function(e){(t.h=e)&&(t.g=new bu(new mu(e)),_u(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Eu(t){return t.i||(t.i=function t(e){return new _e((function(n,r){var i=e.v.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new _e((function(e,n){var r=t.v.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).s((function(t){r(t)}))}}))}(t)),t.i}function Ou(t,e){var n=0;return new _e((function r(i,o){Eu(t).then(e).then(i).s((function(e){if(!(3<++n))return Eu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)}));o(e)}))}))}function Iu(){try{return!!a.indexedDB}catch(Gt){return!1}}function Tu(t){return t.objectStore("firebaseLocalStorage")}function Su(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Au(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function ku(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?_u(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Se()}function xu(t){return Eu(t).then((function(t){var e=Tu(Su(t,!1));return e.getAll?Au(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Nu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Se().then((function(){if(Iu()){var t=Mr(),r="__sak"+t;return gu||(gu=new Cu),(n=gu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){z(e.a,(function(e){e(t)}))})),t}))}function Ru(){this.a={},this.type="inMemory"}function Pu(){if(!function(){var t="Node"==br();if(!(t=Du()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Du()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function Du(){try{var t=a.localStorage,e=Mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Mu(){this.type="nullStorage"}function Lu(){if(!function(){var t="Node"==br();if(!(t=Fu()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Fu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Fu(){try{var t=a.sessionStorage,e=Mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Vu(){var t={};t.Browser=Bu,t.Node=Hu,t.ReactNative=zu,t.Worker=Wu,this.a=t[br()]}du.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];z(r,(function(e){i.push(Se().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];z(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},mu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},bu.prototype.close=function(){for(;0<this.a.length;)wu(this,this.a[0]);this.b=!0},(t=Cu.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Au((e=Tu(Su(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Tu(Su(o,!0)),i)return i.value=e,Au(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Au(o.add(s))}))})).then((function(){return n.c[t]=e,ku(n,t)})).na((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Au(Tu(Su(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Au(Tu(Su(r,!0)).delete(t))})).then((function(){return delete e.c[t],ku(e,t)})).na((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Nu(t),function e(){t.f=setTimeout((function(){t.l=xu(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Nu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=Ru.prototype).get=function(t){return Se(this.a[t])},t.set=function(t,e){return this.a[t]=e,Se()},t.T=function(t){return delete this.a[t],Se()},t.ca=function(){},t.ia=function(){},(t=Pu.prototype).get=function(t){var e=this;return Se().then((function(){return Dr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Se().then((function(){var r=Rr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Se().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&hn(a.window,"storage",t)},(t=Mu.prototype).get=function(){return Se(null)},t.set=function(){return Se()},t.T=function(){return Se()},t.ca=function(){},t.ia=function(){},(t=Lu.prototype).get=function(t){var e=this;return Se().then((function(){return Dr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Se().then((function(){var r=Rr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Se().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Uu,qu,Bu={D:Pu,ab:Lu},Hu={D:Pu,ab:Lu},zu={D:pu,ab:Mu},Wu={D:Pu,ab:Mu},Ku={qd:"local",NONE:"none",sd:"session"};function Gu(){var t=!(Lr(Tr())||!yr()),e=jr(),n=Ar();this.v=t,this.h=e,this.l=n,this.a={},Uu||(Uu=new Vu),t=Uu;try{this.g=!ar()&&Hr()||!a.indexedDB?new t.a.D:new ju(mr()?new Ru:new t.a.D)}catch(r){this.g=new Ru,this.h=!0}try{this.i=new t.a.ab}catch(r){this.i=new Ru}this.m=new Ru,this.f=w(this.Xb,this),this.b={}}function Qu(){return qu||(qu=new Gu),qu}function Xu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function Yu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ju(t,e,n){return n=Yu(e,n),"local"==e.D&&(t.b[n]=null),Xu(t,e.D).T(n)}function Zu(t){t.c&&(clearInterval(t.c),t.c=null)}function $u(t){this.a=t,this.b=Qu()}(t=Gu.prototype).get=function(t,e){return Xu(this,t.D).get(Yu(t,e))},t.set=function(t,e,n){var r=Yu(t,n),i=this,o=Xu(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=Yu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),dt(this.a)&&(Xu(this,"local").ca(this.f),this.h||(ar()||!Hr())&&a.indexedDB||!this.l||function(t){Zu(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Yu(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(Xu(this,"local").ia(this.f),Zu(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Xu(this,"local").ia(this.f):Zu(this),this.v)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.lb(e))},Xt&&se&&10==se&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,w(this.lb,this))},t.lb=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var tc,ec={name:"authEvent",D:"local"};function nc(){this.a=Qu()}function rc(t,e){this.b=ic,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===tc&&(tc=a.Int32Array?new Int32Array(hc):hc),this.reset()}O(rc,(function(){this.b=-1}));for(var ic=64,oc=ic-1,sc=[],ac=0;ac<oc;ac++)sc[ac]=0;var uc=J(128,sc);function cc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|tc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function lc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(cc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(cc(t),i=0)}}t.c=i,t.g+=n}rc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Z(this.h)};var hc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function fc(){rc.call(this,8,pc)}O(fc,rc);var pc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function dc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new nc,this.g=new $u(this.h),this.f=null,this.b=[],this.a=this.c=null}function gc(t){return new T("invalid-cordova-configuration",t)}function vc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function yc(t){return t.f||(t.f=t.la().then((function(){return new _e((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),mc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=no(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Dr(Ln(o=Fn(i),"firebaseError")||null))?S(o):null)?new Fo(r.c,r.b,null,null,o,null,r.S()):new Fo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}vc(t,i)}))}var n=new Fo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=In(500).then((function(){return mc(t).then((function(){r||vc(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Sr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Bo||(Bo=new Uo),function(t){var e=Bo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Sr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function mc(t){var e=null;return function(t){return t.b.get(ec,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,Ju((n=t.g).b,ec,n.a)})).then((function(){return e}))}function bc(t){this.a=t,this.b=Qu()}(t=dc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(vr(void 0)?gr().then((function(){return new _e((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Sr("universalLinks.subscribe",a))throw gc("cordova-universal-links-plugin-fix is not installed");if(void 0===Sr("BuildInfo.packageName",a))throw gc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Sr("cordova.plugins.browsertab.openUrl",a))throw gc("cordova-plugin-browsertab is not installed");if("function"!=typeof Sr("cordova.InAppBrowser.open",a))throw gc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Nb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Se()},t.Lb=function(){return Ae(new T("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return Ae(new T("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Se().then((function(){return Lo(e),yc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Fo(e,r,null,o,new T("no-auth-event"),null,i),u=Sr("BuildInfo.packageName",a);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Sr("BuildInfo.displayName",a),l={};if(Tr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Tr().toLowerCase().match(/android/))return Ae(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new fc;lc(e,t),t=[];var n=8*e.g;lc(e,uc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(cc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=fu(t.m,t.i,t.l,e,n,null,r,t.v,l,t.u,i,t.o);return t.la().then((function(){var e=t.h;return t.A.a.set(ec,s.w(),e)})).then((function(){var e=Sr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Sr("cordova.plugins.browsertab.openUrl",a)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Sr("cordova.InAppBrowser.open",a)))throw new T("invalid-cordova-configuration");e=Tr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){u=function(){var e=Sr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Ur()&&c()},o.addEventListener("resume",c=function(){s||(s=In(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},!1),Tr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(t){return mc(i).then((function(){throw t}))}))})).na((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Ra(u),i.c=null}))},t.Ea=function(t){this.b.push(t),yc(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Fo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ra=function(t){Y(this.b,(function(e){return e==t}))};var _c={name:"pendingRedirect",D:"session"};function wc(t){return Ju(t.b,_c,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=w(this.o,this),this.b=new Lc,this.A=new Bc,this.g=new bc(Dc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Ec(this.O,this.m,this.v,A,this.G)}function Ec(t,e,n,i,o){var s=r.a.SDK_VERSION||null;return vr()?new dc(t,e,n,s,i,o):new uu(t,e,n,s,i,o)}function Oc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s((function(n){throw t.a==e&&t.reset(),n}))}function Ic(t){t.a.Wb()&&Oc(t).s((function(e){var n=new Fo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Nc(e)&&t.o(n)})),t.a.Sb()||Fc(t.b)}function Tc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(_c,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?wc(t.g).then((function(){Oc(t).s((function(e){var n=new Fo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Nc(e)&&t.o(n)}))})):Ic(t)})).s((function(){Ic(t)}))}function Sc(t,e){Y(t.h,(function(t){return t==e}))}Cc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Ec(this.O,this.m,this.v,null,this.G),this.i={}},Cc.prototype.o=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=E())),e=!0;break}}return Fc(this.b),e};var Ac=new Vr(2e3,1e4),kc=new Vr(3e4,6e4);function xc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Nc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(_c,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).s((function(e){if(Nc(e))throw new T("operation-not-supported-in-this-environment");return o=e,wc(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new _e((function(){})):wc(t.g).then((function(){return t.qa()})).then((function(){})).s((function(){}))}))}))}function Rc(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Ac.get())}Cc.prototype.qa=function(){return this.b.qa()};var Pc={};function Dc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Mc(t,e,n,r){var i=Dc(e,n,r);return Pc[i]||(Pc[i]=new Cc(t,e,n,r)),Pc[i]}function Lc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Fc(t){t.g||(t.g=!0,qc(t,!1,null,null))}function Vc(t){t.g&&!t.i&&qc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return Se(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function Bc(){}function Hc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function zc(t,e){this.a=e,Qr(this,"verificationId",t)}function Wc(t,e,n,r){return new Po(t).eb(e,n).then((function(t){return new zc(t,r)}))}function Kc(t){var e=Bi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Br(1e3*e.exp),authTime:Br(1e3*e.auth_time),issuedAtTime:Br(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Gc(t,e,n){var r=e&&e[Xc];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new ro(null,r),this.b=[];var i=this;z(e[Qc]||[],(function(t){(t=$r(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Lc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Lc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(qc(this,!0,null,t.a),Se()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){qc(t,a,e,null)})).s((function(e){qc(t,a,null,e)}))}(this,t,e):Ae(new T("invalid-auth-event")):(qc(this,!1,null,null),Se())}else Ae(new T("invalid-auth-event"))},Lc.prototype.qa=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=In(kc.get()).then((function(){t.b||(t.g=!0,qc(t,!0,null,e))}))}(t))}))},Bc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Se()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(r,t,null,n)})).s((function(t){e.ma(r,null,t,n)}))}(t,e):Ae(new T("invalid-auth-event"))}else Ae(new T("invalid-auth-event"))},zc.prototype.confirm=function(t){return t=Do(this.verificationId,t),this.a(t)};var Qc="mfaInfo",Xc="mfaPendingCredential";function Yc(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new Gc(t,e,n),Qr(this,"resolver",this.b)}function Jc(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Yc(e,t.serverResponse,n,t.message)}catch(r){}return null}function Zc(){}function $c(t){Qr(this,"factorId",t.fa),this.a=t}function tl(t){if($c.call(this,t),this.a.fa!=Po.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function el(t,e){for(var n in Xe.call(this,t),e)this[n]=e[n]}function nl(t,e){this.a=t,this.b=[],this.c=w(this.xc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ni]=t.uid),t.displayName&&(r[ti]=t.displayName),t.enrollmentTime&&(r[ei]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ri]=t.phoneNumber);try{e=new ii(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),rl(this,n)}function rl(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function il(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ol(t){this.c=t,this.b=this.a=null}function sl(t){return t.b&&1e3*t.b.c||0}function al(t,e){var n=e.refreshToken;t.b=qi(e[Gs]||""),t.a=n}function ul(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Br(e||null),creationTime:Br(t||null)})}function cl(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function ll(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var i=r.a.SDK_VERSION?Ir(r.a.SDK_VERSION):null;this.a=new Ws(this.l,j(A),i),t.emulatorConfig&&$s(this.a,t.emulatorConfig),this.b=new ol(this.a),ml(this,e[Gs]),al(this.b,e),Qr(this,"refreshToken",this.b.a),wl(this,n||{}),_n.call(this),this.P=!1,this.o&&kr()&&(this.i=Mc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new il((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=sl(t.b)-E()-3e5;return 0<e?e:0}))}(this),this.$=w(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){$s(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){pl(o,t.f)},this.aa=null,this.N=new nl(this,n),Qr(this,"multiFactor",this.N)}function hl(t,e){t.ba&&hn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&un(e,"languageCodeChanged",t.Ba)}function fl(t,e){t.W&&hn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&un(e,"emulatorConfigChanged",t.za)}function pl(t,e){t.X=e,ea(t.a,r.a.SDK_VERSION?Ir(r.a.SDK_VERSION,t.X):null)}function dl(t,e){t.aa&&hn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&un(e,"frameworkChanged",t.Aa)}function gl(t){try{return r.a.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function vl(t){t.A||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.$),un(t,"tokenChanged",t.$))}function yl(t){hn(t,"tokenChanged",t.$),t.u.stop()}function ml(t,e){t.ya=e,Qr(t,"_lat",e)}function bl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return xe(e).then((function(){return t}))}function _l(t){t.i&&!t.P&&(t.P=!0,Tc(t.i,t))}function wl(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ul(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Cl(){}function El(t){return Se().then((function(){if(t.A)throw new T("app-deleted")}))}function Ol(t){return K(t.providerData,(function(t){return t.providerId}))}function Il(t,e){e&&(Tl(t,e.providerId),t.providerData.push(e))}function Tl(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Sl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Al(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Qr(t,"metadata",e.metadata?function(t){return new ul(t.a,t.b)}(e.metadata):new ul),z(e.providerData,(function(e){Il(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Qr(t,"refreshToken",t.b.a),rl(t.N,e.N.b))}function kl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Ja(t.a,Aa,{idToken:e}).then(w(t.Jc,t))}(t,e).then((function(){return n||Sl(t,"isAnonymous",!1),e}))}))}function xl(t,e){e[Gs]&&t.ya!=e[Gs]&&(al(t.b,e),t.dispatchEvent(new el("tokenChanged")),ml(t,e[Gs]),Sl(t,"refreshToken",t.b.a))}function Nl(t,e){return kl(t).then((function(){if(Q(Ol(t),e))return bl(t).then((function(){throw new T("provider-already-linked")}))}))}function jl(t,e,n){return Yr({user:t,credential:Mo(e),additionalUserInfo:e=Gi(e),operationType:n})}function Rl(t,e){return xl(t,e),t.reload().then((function(){return t}))}function Pl(t,e,n,i,o){if(!kr())return Ae(new T("operation-not-supported-in-this-environment"));if(t.f&&!o)return Ae(t.f);var s=Ki(n.providerId),a=Mr(t.uid+":::"),u=null;(!jr()||yr())&&t.o&&n.isOAuthProvider&&(u=fu(t.o,t.l,t.m,e,n,null,a,r.a.SDK_VERSION||null,null,null,t.tenantId));var c=fr(u,s&&s.ua,s&&s.ta);return i=i().then((function(){if(Ml(t),!o)return t.I().then((function(){}))})).then((function(){return xc(t.i,c,e,n,a,!!u,t.tenantId)})).then((function(){return new _e((function(n,r){t.ma(e,null,new T("cancelled-popup-request"),t.h||null),t.g=n,t.O=r,t.h=a,t.c=Rc(t.i,t,e,c,a)}))})).then((function(t){return c&&hr(c),t?Yr(t):null})).s((function(t){throw c&&hr(c),t})),Ll(t,i,o)}function Dl(t,e,n,r,i){if(!kr())return Ae(new T("operation-not-supported-in-this-environment"));if(t.f&&!i)return Ae(t.f);var o=null,s=Mr(t.uid+":::");return r=r().then((function(){if(Ml(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,bl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Ul,t.w(),e.a)),e})).then((function(){return jc(t.i,e,n,s,t.tenantId)})).s((function(e){if(o=e,t.ha)return ql(t.ha);throw o})).then((function(){if(o)throw o})),Ll(t,r,i)}function Ml(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Ll(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Ae(t.f)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new el("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){X(t.G,r)})),r.s((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Jc(e.w(),gl(t),w(t.ic,t))),n||e}))}function Fl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Gs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new ll(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&Il(r,Yr(t))})),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Vl(t){this.a=t,this.b=Qu()}Gc.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[Qc],delete n[Xc],yt(n,t),e.g(n)}))},O(Yc,T),Zc.prototype.rb=function(t,e,n){return e.type==io?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),yt(n,{phoneVerificationInfo:Ro(t.a)}),Ja(e,Ta,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:Ro(t.a)}),Ja(e,Sa,n)}))}(this,t,e)},O($c,Zc),O(tl,$c),O(el,Xe),(t=nl.prototype).xc=function(t){rl(this,function(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=$r(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new ro(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return xl(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Ja(r,Ya,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=W(e.b,(function(t){return t.uid!=n}));return rl(e,r),xl(e.a,t),e.a.reload().s((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},il.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=In(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=a.document,e=null;return Ur()||!t?Se():new _e((function(n){e=function(){Ur()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},il.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ol.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:sl(this)}},ol.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new T("user-token-expired")):t||!this.b||E()>sl(this)-3e4?this.a?function(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?na(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r($a(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.v.get()):r(new T("internal-error"))}))}(t.c,e).then((function(e){return t.b=qi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Se(null):Se({accessToken:this.b.toString(),refreshToken:this.a})},ul.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},O(ll,_n),ll.prototype.wa=function(t){this.pa=t,Zs(this.a,t)},ll.prototype.ka=function(){return this.pa},ll.prototype.Ga=function(){return Z(this.X)},ll.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Qr(ll.prototype,"providerId","firebase"),(t=ll.prototype).reload=function(){var t=this;return Ll(this,El(this).then((function(){return kl(t).then((function(){return bl(t)})).then(Cl)})))},t.nc=function(t){return this.I(t).then((function(t){return new Kc(t)}))},t.I=function(t){var e=this;return Ll(this,El(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.ya&&(ml(e,t.accessToken),e.dispatchEvent(new el("tokenChanged"))),Sl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");wl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new cl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Il(this,e[n]);Sl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new el("userReloaded",{gd:t}))},t.Kc=function(t){return Kr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Ll(this,t.c(this.a,this.uid).then((function(t){return xl(e,t),n=jl(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return Kr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Ll(this,Nl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=jl(e,t,"link"),Rl(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return Ll(this,Nl(this,"phone").then((function(){return Wc(gl(n),t,e,w(n.pb,n))})))},t.Lc=function(t,e){var n=this;return Ll(this,Se().then((function(){return Wc(gl(n),t,e,w(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return Ll(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return xl(e,t),e.reload()})))},t.dd=function(t){var e=this;return Ll(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return xl(e,t),e.reload()})))},t.Bb=function(t){var e=this;return Ll(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return xl(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return El(this);var e=this;return Ll(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return xl(e,t),Sl(e,"displayName",t.displayName||null),Sl(e,"photoURL",t.photoUrl||null),z(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),bl(e)})).then(Cl))},t.bd=function(t){var e=this;return Ll(this,kl(this).then((function(n){return Q(Ol(e),t)?function(t,e,n){return Ja(t,Ea,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(Ol(e),(function(t){n[t]||Tl(e,t)})),n[Po.PROVIDER_ID]||Qr(e,"phoneNumber",null),bl(e)})):bl(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Ll(this,this.I().then((function(e){return Ja(t.a,Ca,{idToken:e})})).then((function(){t.dispatchEvent(new el("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");hl(t,null),fl(t,null),dl(t,null),t.G=[],t.A=!0,yl(t),Qr(t,"refreshToken",null),t.i&&Sc(t.i,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?w(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?w(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Kb,this):null},t.Dc=function(t){var e=this;return Pl(this,"linkViaPopup",t,(function(){return Nl(e,t.providerId).then((function(){return bl(e)}))}),!1)},t.Mc=function(t){return Pl(this,"reauthViaPopup",t,(function(){return Se()}),!0)},t.Ec=function(t){var e=this;return Dl(this,"linkViaRedirect",t,(function(){return Nl(e,t.providerId)}),!1)},t.Nc=function(t){return Dl(this,"reauthViaRedirect",t,(function(){return Se()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ll(this,this.I().then((function(n){return ga(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=jl(i,t,"link"),Rl(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ll(this,Se().then((function(){return ao(va(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=jl(i,t,"reauthenticate"),xl(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return Ll(this,this.I().then((function(e){return n=e,void 0===t||dt(t)?{}:Fi(new Ai(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return Ll(this,this.I().then((function(t){return r=t,void 0===e||dt(e)?{}:Fi(new Ai(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return Ll(this,t=ao(Se(t),n.uid).then((function(t){return e=jl(n,t,"reauthenticate"),xl(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),z(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.N.w()),t};var Ul={name:"redirectUser",D:"session"};function ql(t){return Ju(t.b,Ul,t.a)}function Bl(t){this.a=t,this.b=Qu(),this.c=null,this.f=function(t){var e=Wl("local"),n=Wl("session"),r=Wl("none");return function(t,e,n){var r=Yu(e,n),i=Xu(t,e.D);return t.get(e,n).then((function(o){var s=null;try{s=Dr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(zl,t.a).then((function(t){return t?Wl(t):e}))}))}))})).then((function(e){return t.c=e,Hl(t,e.D)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Wl("local"),this.a,w(this.g,this))}function Hl(t,e){var n,r=[];for(n in Ku)Ku[n]!==e&&r.push(Ju(t.b,Wl(Ku[n]),t.a));return r.push(Ju(t.b,zl,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],C(o,a),s);else e(i)}))}(r)}Bl.prototype.g=function(){var t=this,e=Wl("local");Xl(this,(function(){return Se().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Hl(t,"local").then((function(){t.c=e}))}))}))};var zl={name:"persistence",D:"session"};function Wl(t){return{name:"authUser",D:t}}function Kl(t,e){return Xl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Gl(t){return Xl(t,(function(){return Ju(t.b,t.c,t.a)}))}function Ql(t,e,n){return Xl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Fl(t||{})}))}))}function Xl(t,e){return t.f=t.f.then(e,e),t.f}function Yl(t){if(this.m=!1,Qr(this,"settings",new Hc),Qr(this,"app",t),!ih(this).options||!ih(this).options.apiKey)throw new T("invalid-api-key");t=r.a.SDK_VERSION?Ir(r.a.SDK_VERSION):null,this.a=new Ws(ih(this).options&&ih(this).options.apiKey,j(A),t),this.R=[],this.u=[],this.P=[],this.ac=r.a.INTERNAL.createSubscribe(w(this.yc,this)),this.X=void 0,this.bc=r.a.INTERNAL.createSubscribe(w(this.zc,this)),nh(this,null),this.l=new Bl(ih(this).options.apiKey+":"+ih(this).name),this.G=new Vl(ih(this).options.apiKey+":"+ih(this).name),this.$=uh(this,function(t){var e=ih(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Ul,t.a).then((function(t){return t&&e&&(t.authDomain=e),Fl(t||{})}))}(t.G,ih(t).options.authDomain).then((function(e){return(t.o=e)&&(e.ha=t.G),ql(t.G)}));return uh(t,e)}(t).then((function(){return Ql(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Kl(t.l,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:Gl(t.l)}))):null})).then((function(e){nh(t,e||null)}));return uh(t,n)}(this)),this.i=uh(this,function(t){return t.$.then((function(){return eh(t)})).s((function(){})).then((function(){if(!t.m)return t.pa()})).s((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Wl("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=w(this.Yc,this),this.Ba=w(this.da,this),this.ya=w(this.kc,this),this.za=w(this.vc,this),this.Aa=w(this.wc,this),this.b=null,function(t){var e=ih(t).options.authDomain,n=ih(t).options.apiKey;e&&kr()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=Mc(e,n,ih(t).name,t.f),Tc(t.b,t),oh(t)&&_l(oh(t)),t.o){_l(t.o);var r=t.o;r.wa(t.ka()),hl(r,t),pl(r=t.o,t.N),dl(r,t),$s((r=t.o).a,t.f),fl(r,t),t.o=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Fc,this),this.A=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function Jl(t){Xe.call(this,"languageCodeChanged"),this.h=t}function Zl(t){Xe.call(this,"emulatorConfigChanged"),this.c=t}function $l(t){Xe.call(this,"frameworkChanged"),this.f=t}function th(t){return t.gb||Ae(new T("auth-domain-config-required"))}function eh(t){if(!kr())return Ae(new T("operation-not-supported-in-this-environment"));var e=th(t).then((function(){return t.b.qa()})).then((function(t){return t?Yr(t):null}));return uh(t,e)}function nh(t,e){oh(t)&&(function(t,e){Y(t.R,(function(t){return t==e}))}(oh(t),t.Ba),hn(oh(t),"tokenChanged",t.ya),hn(oh(t),"userDeleted",t.za),hn(oh(t),"userInvalidated",t.Aa),yl(oh(t))),e&&(e.R.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.A&&vl(e)),Qr(t,"currentUser",e),e&&(e.wa(t.ka()),hl(e,t),pl(e,t.N),dl(e,t),$s(e.a,t.f),fl(e,t))}function rh(t,e){var n=null,r=null;return uh(t,e.then((function(e){return n=Mo(e),r=Gi(e),function(t,e){var n={};return n.apiKey=ih(t).options.apiKey,n.authDomain=ih(t).options.authDomain,n.appName=ih(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new ll(t,e);return n&&(i.ha=n),r&&pl(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return oh(t)&&e.uid==oh(t).uid?(Al(oh(t),e),t.da(e)):(nh(t,e),_l(e),t.da(e))})).then((function(){ah(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Jc(e.w(),t,w(t.jc,t))),n||e})).then((function(){return Yr({user:oh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ih(t){return t.app}function oh(t){return t.currentUser}function sh(t){return oh(t)&&oh(t)._lat||null}function ah(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](sh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](sh(t))}}function uh(t,e){return t.R.push(e),e.na((function(){X(t.R,e)})),e}function ch(){}function lh(){this.a={},this.b=1e12}Bl.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Ku)if(Ku[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(br()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Iu()&&"none"!==t)throw n;break;default:if(!Ar()&&"none"!==t)throw n}}(t),Xl(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Hl(n,t)})).then((function(){if(n.c=Wl(t),e)return n.b.set(n.c,e,n.a)})):Se()}))},O(Yl,_n),O(Jl,Xe),O(Zl,Xe),O($l,Xe),(t=Yl.prototype).wb=function(t){return uh(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,Zs(this.a,this.aa),this.dispatchEvent(new Jl(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");qr("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&gr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})),this.f={url:t},this.settings.hb=!0,$s(this.a,this.f),this.dispatchEvent(new Zl(this.f))}},t.Fc=function(t){this.N.push(t),ea(this.a,r.a.SDK_VERSION?Ir(r.a.SDK_VERSION,this.N):null),this.dispatchEvent(new $l(this.N))},t.Ga=function(){return Z(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:ih(this).options.apiKey,authDomain:ih(this).options.authDomain,appName:ih(this).name,currentUser:oh(this)&&oh(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?w(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return rh(i,da(i.a,o))}))},t.Wc=function(t){if(!kr())return Ae(new T("operation-not-supported-in-this-environment"));var e=this,n=Ki(t.providerId),i=Mr(),o=null;(!jr()||yr())&&ih(this).options.authDomain&&t.isOAuthProvider&&(o=fu(ih(this).options.authDomain,ih(this).options.apiKey,ih(this).name,"signInViaPopup",t,null,i,r.a.SDK_VERSION||null,null,null,this.S(),this.f));var s=fr(o,n&&n.ua,n&&n.ta);return uh(this,n=th(this).then((function(n){return xc(n,s,"signInViaPopup",t,i,!!o,e.S())})).then((function(){return new _e((function(t,n){e.ma("signInViaPopup",null,new T("cancelled-popup-request"),e.h),e.g=t,e.O=n,e.h=i,e.c=Rc(e.b,e,"signInViaPopup",s,i)}))})).then((function(t){return s&&hr(s),t?Yr(t):null})).s((function(t){throw s&&hr(s),t})))},t.Xc=function(t){if(!kr())return Ae(new T("operation-not-supported-in-this-environment"));var e=this;return uh(this,th(this).then((function(){return function(t){return Xl(t,(function(){return t.b.set(zl,t.c.D,t.a)}))}(e.l)})).then((function(){return jc(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return eh(this).then((function(e){return t.b&&Vc(t.b.b),e})).s((function(e){throw t.b&&Vc(t.b.b),e}))},t.cd=function(t){if(!t)return Ae(new T("null-user"));if(this.W!=t.tenantId)return Ae(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=ih(this).options.apiKey,n.authDomain=ih(this).options.authDomain,n.appName=ih(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Gs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new ll(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),r&&pl(e,r),Al(e,t),e}(t,n,e.G,e.Ga());return uh(this,this.i.then((function(){if(ih(e).options.apiKey!=t.l)return r.reload()})).then((function(){return oh(e)&&t.uid==oh(e).uid?(Al(oh(e),t),e.da(t)):(nh(e,r),_l(r),e.da(r))})).then((function(){ah(e)})))},t.zb=function(){var t=this;return uh(this,this.i.then((function(){return t.b&&Vc(t.b.b),oh(t)?(nh(t,null),Gl(t.l).then((function(){ah(t)}))):Se()})))},t.Yc=function(){var t=this;return Ql(this.l,ih(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=oh(t)&&e){n=oh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Al(oh(t),e),oh(t).I();(oh(t)||e)&&(nh(t,e),e&&(_l(e),e.ha=t.G),t.b&&Tc(t.b,t),ah(t))}}))},t.da=function(t){return Kl(this.l,t)},t.kc=function(){ah(this),this.da(oh(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then((function(){return rh(e,Se(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(oh(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),uh(t,t.i.then((function(){!t.m&&Q(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(sh(t)))})))}(this,(function(){t.next(oh(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(oh(r)):"function"==typeof t.next&&t.next(oh(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(oh(r)):"function"==typeof t.next&&t.next(oh(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return uh(this,this.i.then((function(){return oh(e)?oh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.i.then((function(){return rh(e,Ja(e.a,Wa,{token:t}))})).then((function(t){var n=t.user;return Sl(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.i.then((function(){return rh(n,Ja(n.a,Ka,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.i.then((function(){return rh(n,Ja(n.a,_a,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.i.then((function(){return rh(e,t.ja(e.a))}))},t.Rc=function(t){return Kr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then((function(){var e=oh(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return rh(t,t.a.yb()).then((function(e){var n=e.user;return Sl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return oh(this)&&oh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&oh(this)&&vl(oh(this))},t.Oc=function(t){var e=this;z(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&oh(this)&&yl(oh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),uh(this,this.i.then((function(){e.m||Q(e.u,t)&&t(sh(e))})))},t.removeAuthTokenListener=function(t){Y(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Wl("local"),t.a,this.pa),this.b&&(Sc(this.b,this),Vc(this.b.b)),Promise.resolve()},t.gc=function(t){return uh(this,function(t,e){return Ja(t,wa,{identifier:e,continueUri:xr()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!xo(t)},t.vb=function(t,e){var n=this;return uh(this,Se().then((function(){var t=new Ai(e);if(!t.c)throw new T("argument-error",Ni+" must be true when sending sign in link to email");return Fi(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return uh(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return uh(this,this.a.Qa(t).then((function(t){return new oi(t)})))},t.ib=function(t){return uh(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return uh(this,Se().then((function(){return void 0===e||dt(e)?{}:Fi(new Ai(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return uh(this,Wc(this,t,e,w(this.Za,this)))},t.Uc=function(t,e){var n=this;return uh(this,Se().then((function(){var r=e||ur(),i=ko(t,r);if(!(r=xo(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new T("tenant-id-mismatch");return n.Za(i)})))},ch.prototype.render=function(){},ch.prototype.reset=function(){},ch.prototype.getResponse=function(){},ch.prototype.execute=function(){};var hh=null;function fh(t,e){return(e=ph(e))&&t.a[e]||null}function ph(t){return(t=void 0===t?1e12:t)?t.toString():null}function dh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function gh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function vh(){}function yh(){}lh.prototype.render=function(t,e){return this.a[this.b.toString()]=new dh(t,e),this.b++},lh.prototype.reset=function(t){var e=fh(this,t);t=ph(t),e&&t&&(e.delete(),delete this.a[t])},lh.prototype.getResponse=function(t){return(t=fh(this,t))?t.getResponse():null},lh.prototype.execute=function(t){(t=fh(this,t))&&t.execute()},dh.prototype.getResponse=function(){return gh(this),this.b},dh.prototype.execute=function(){gh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},dh.prototype.delete=function(){gh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Qr(vh,"FACTOR_ID","phone"),yh.prototype.g=function(){return hh||(hh=new lh),Se(hh)},yh.prototype.c=function(){};var mh=null;function bh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var _h=new bt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),wh=new Vr(3e4,6e4);bh.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),wh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete a[e.a]},Se(Fs(St(_h,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},bh.prototype.c=function(){this.b--};var Ch=null;function Eh(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s?(mh||(mh=new yh),s=mh):(Ch||(Ch=new bh),s=Ch),this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Th])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sh],!a.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ws(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Oh];this.a[Oh]=function(t){if(Ah(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Sr(c,a);"function"==typeof e&&e(t)}};var l=this.a[Ih];this.a[Ih]=function(){if(Ah(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Sr(l,a);"function"==typeof t&&t()}}}var Oh="callback",Ih="expired-callback",Th="sitekey",Sh="size";function Ah(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function kh(t,e){return t.h.push(e),e.na((function(){X(t.h,e)})),e}function xh(t){if(t.A)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Nh(t,e,n){var i=!1;try{this.b=n||r.a.app()}catch(a){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=r.a.SDK_VERSION?Ir(r.a.SDK_VERSION,s):null,Eh.call(this,n,t,e,(function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t}),s,j(A),i)}function jh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=Rh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Rh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Eh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=kh(this,Se().then((function(){if(xr()&&!mr())return gr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,Ja(t.o,Pa,{})})).then((function(e){t.a[Th]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){xh(this);var t=this;return kh(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ae&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',zt(s.name),'"'),s.type){o.push(' type="',zt(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=de(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ce(o,s)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){xh(this);var t=this;return kh(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){xh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){xh(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},O(Nh,Eh);var Rh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ph(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Dh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Mh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:g}}function Lh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Fh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Vh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){return!!e&&!(!e.ja||t&&e.providerId!==t)}}}function Uh(t,e){return g(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function qh(t){return g(t)&&"string"==typeof t.uid}function Bh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Hh(t,e){for(var n in e){var r=e[n].name;t[r]=Kh(r,t[n],e[n].j)}}function zh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:C((function(t){return this[t]}),n),set:C((function(t,e,n,r){jh(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function Wh(t,e,n,r){t[e]=Kh(e,n,r)}function Kh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Hh(Yl.prototype,{ib:{name:"applyActionCode",j:[Ph("code")]},Qa:{name:"checkActionCode",j:[Ph("code")]},mb:{name:"confirmPasswordReset",j:[Ph("code"),Ph("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Ph("email"),Ph("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Ph("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Ph("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Bh(Mh(),Lh(),"nextOrObserver"),Lh("opt_error",!0),Lh("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Bh(Mh(),Lh(),"nextOrObserver"),Lh("opt_error",!0),Lh("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Ph("email"),Bh(Mh("opt_actionCodeSettings",!0),Fh(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Ph("email"),Mh("actionCodeSettings")]},wb:{name:"setPersistence",j:[Ph("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Vh()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Vh()]},Sc:{name:"signInWithCustomToken",j:[Ph("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Ph("email"),Ph("password")]},Uc:{name:"signInWithEmailLink",j:[Ph("email"),Ph("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Ph("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Bh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof ll)}},Fh(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ph(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Ph("url")]},hd:{name:"verifyPasswordResetCode",j:[Ph("code")]}}),zh(Yl.prototype,{lc:{name:"languageCode",jb:Bh(Ph(),Fh(),"languageCode")},ti:{name:"tenantId",jb:Bh(Ph(),Fh(),"tenantId")}}),(Yl.Persistence=Ku).LOCAL="local",Yl.Persistence.SESSION="session",Yl.Persistence.NONE="none",Hh(ll.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Dh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dh("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Vh()]},pb:{name:"linkWithCredential",j:[Vh()]},Cc:{name:"linkWithPhoneNumber",j:[Ph("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vh()]},sb:{name:"reauthenticateWithCredential",j:[Vh()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Ph("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Bh(Mh("opt_actionCodeSettings",!0),Fh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ph(null,!0)]},bd:{name:"unlink",j:[Ph("provider")]},Ab:{name:"updateEmail",j:[Ph("email")]},Bb:{name:"updatePassword",j:[Ph("password")]},dd:{name:"updatePhoneNumber",j:[Vh("phone")]},Cb:{name:"updateProfile",j:[Mh("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Ph("email"),Bh(Mh("opt_actionCodeSettings",!0),Fh(null,!0),"opt_actionCodeSettings",!0)]}}),Hh(lh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hh(ch.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hh(_e.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),zh(Hc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Dh("appVerificationDisabledForTesting")}}),Hh(zc.prototype,{confirm:{name:"confirm",j:[Ph("verificationCode")]}}),Wh(so,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[po,So,jo,lo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Bh(Ph(),Mh(),"json")]),Wh(Ao,"credential",(function(t,e){return new To(t,e)}),[Ph("email"),Ph("password")]),Hh(To.prototype,{w:{name:"toJSON",j:[Ph(null,!0)]}}),Hh(mo.prototype,{Ca:{name:"addScope",j:[Ph("scope")]},Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Wh(mo,"credential",bo,[Bh(Ph(),Mh(),"token")]),Wh(Ao,"credentialWithLink",ko,[Ph("email"),Ph("emailLink")]),Hh(_o.prototype,{Ca:{name:"addScope",j:[Ph("scope")]},Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Wh(_o,"credential",wo,[Bh(Ph(),Mh(),"token")]),Hh(Co.prototype,{Ca:{name:"addScope",j:[Ph("scope")]},Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Wh(Co,"credential",Eo,[Bh(Ph(),Bh(Mh(),Fh()),"idToken"),Bh(Ph(),Fh(),"accessToken",!0)]),Hh(Oo.prototype,{Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Wh(Oo,"credential",Io,[Bh(Ph(),Mh(),"token"),Ph("secret",!0)]),Hh(yo.prototype,{Ca:{name:"addScope",j:[Ph("scope")]},credential:{name:"credential",j:[Bh(Ph(),Bh(Mh(),Fh()),"optionsOrIdToken"),Bh(Ph(),Fh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Hh(ho.prototype,{w:{name:"toJSON",j:[Ph(null,!0)]}}),Hh(uo.prototype,{w:{name:"toJSON",j:[Ph(null,!0)]}}),Wh(Po,"credential",Do,[Ph("verificationId"),Ph("verificationCode")]),Hh(Po.prototype,{eb:{name:"verifyPhoneNumber",j:[Bh(Ph(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Uh(t.session,io)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Uh(t.session,oo)&&qh(t.multiFactorHint):t.session&&t.multiFactorUid?Uh(t.session,oo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Hh(No.prototype,{w:{name:"toJSON",j:[Ph(null,!0)]}}),Hh(T.prototype,{toJSON:{name:"toJSON",j:[Ph(null,!0)]}}),Hh(zo.prototype,{toJSON:{name:"toJSON",j:[Ph(null,!0)]}}),Hh(Ho.prototype,{toJSON:{name:"toJSON",j:[Ph(null,!0)]}}),Hh(Yc.prototype,{toJSON:{name:"toJSON",j:[Ph(null,!0)]}}),Hh(Gc.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Hh(nl.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Ph("displayName",!0)]},ad:{name:"unenroll",j:[Bh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:qh},Ph(),"multiFactorInfoIdentifier")]}}),Hh(Nh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Wh(bi,"parseLink",Si,[Ph("link")]),Wh(vh,"assertion",(function(t){return new tl(t)}),[Vh("phone")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ai,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ui,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Yl,AuthCredential:so,Error:T};Wh(t,"EmailAuthProvider",Ao,[]),Wh(t,"FacebookAuthProvider",mo,[]),Wh(t,"GithubAuthProvider",_o,[]),Wh(t,"GoogleAuthProvider",Co,[]),Wh(t,"TwitterAuthProvider",Oo,[]),Wh(t,"OAuthProvider",yo,[Ph("providerId")]),Wh(t,"SAMLAuthProvider",vo,[Ph("providerId")]),Wh(t,"PhoneAuthProvider",Po,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Yl)}}]),Wh(t,"RecaptchaVerifier",Nh,[Bh(Ph(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Mh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof r.a.app.App)}}]),Wh(t,"ActionCodeURL",bi,[]),Wh(t,"PhoneMultiFactorGenerator",vh,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Yl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.mc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.15.2"),r.a.INTERNAL.extendNamespace({User:ll})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const p=new f(l);var d=n("DH7j");class g extends r.a{constructor(t,e=0,n=p){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(d.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=p)}static create(t,e=0,n=p){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function v(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("WVRz"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.m)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return u}),"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.n)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var p=Object(o.h)(Object.keys(e)),g=p.next();!g.done;g=p.next())e[g.value]._addComponent(a)}catch(v){u={error:v}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.n)(e,t)},createSubscribe:s.l,ErrorFactory:s.b,deepExtend:s.n}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.y)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.13",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.q("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Sb)(l)}const c=new r.q("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s))},t.\u0275prov=Object(r.Hb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Sb)(s))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function d(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Hb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Sb)(s).location;return new b(Object(r.Sb)(a),e&&e.origin||"")}const m=new r.q("appBaseHref");let b=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a),r.Sb(m,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(a),r.Sb(m,8))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=d(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(v),r.Sb(a))},t.normalizeQueryParams=g,t.joinWithSlash=p,t.stripTrailingSlash=d,t.\u0275prov=Object(r.Hb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Sb)(v),Object(r.Sb)(a))}function E(t){return t.replace(/\/index.html$/,"")}var O=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),I=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}({}),T=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}({}),S=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}({}),A=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function k(t,e){return D(Object(r.jb)(t)[r.ab.DateFormat],e)}function x(t,e){return D(Object(r.jb)(t)[r.ab.TimeFormat],e)}function N(t,e){return D(Object(r.jb)(t)[r.ab.DateTimeFormat],e)}function j(t,e){const n=Object(r.jb)(t),i=n[r.ab.NumberSymbols][e];if(void 0===i){if(e===A.CurrencyDecimal)return n[r.ab.NumberSymbols][A.Decimal];if(e===A.CurrencyGroup)return n[r.ab.NumberSymbols][A.Group]}return i}const R=r.mb;function P(t){if(!t[r.ab.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.ab.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function D(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function M(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const L=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,F={},V=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var U=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}({}),q=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}({}),B=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}({});function H(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t}function z(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function W(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case q.FullYear:return e.getFullYear();case q.Month:return e.getMonth();case q.Date:return e.getDate();case q.Hours:return e.getHours();case q.Minutes:return e.getMinutes();case q.Seconds:return e.getSeconds();case q.FractionalSeconds:return e.getMilliseconds();case q.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===q.Hours)0===a&&-12===n&&(a=12);else if(t===q.FractionalSeconds)return u=e,z(a,3).substr(0,u);var u;const c=j(s,A.MinusSign);return z(a,e,c,r,i)}}function K(t,e,n=I.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case B.Months:return function(t,e,n){const i=Object(r.jb)(t),o=D([i[r.ab.MonthsFormat],i[r.ab.MonthsStandalone]],e);return D(o,n)}(e,o,i)[t.getMonth()];case B.Days:return function(t,e,n){const i=Object(r.jb)(t),o=D([i[r.ab.DaysFormat],i[r.ab.DaysStandalone]],e);return D(o,n)}(e,o,i)[t.getDay()];case B.DayPeriods:const a=t.getHours(),u=t.getMinutes();if(s){const t=function(t){const e=Object(r.jb)(t);return P(e),(e[r.ab.ExtraData][2]||[]).map(t=>"string"==typeof t?M(t):[M(t[0]),M(t[1])])}(e),n=function(t,e,n){const i=Object(r.jb)(t);P(i);const o=D([i[r.ab.ExtraData][0],i[r.ab.ExtraData][1]],e)||[];return D(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&u>=e.minutes,i=a<n.hours||a===n.hours&&u<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===u)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=Object(r.jb)(t),o=D([i[r.ab.DayPeriodsFormat],i[r.ab.DayPeriodsStandalone]],e);return D(o,n)}(e,o,i)[a<12?0:1];case B.Eras:return function(t,e){return D(Object(r.jb)(t)[r.ab.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(o,s,t,e,n,i)}}function G(t){return function(e,n,r){const i=-1*r,o=j(n,A.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case U.Short:return(i>=0?"+":"")+z(s,2,o)+z(Math.abs(i%60),2,o);case U.ShortGMT:return"GMT"+(i>=0?"+":"")+z(s,1,o);case U.Long:return"GMT"+(i>=0?"+":"")+z(s,2,o)+":"+z(Math.abs(i%60),2,o);case U.Extended:return 0===r?"Z":(i>=0?"+":"")+z(s,2,o)+":"+z(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function Q(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(4-o.getDay()))),e=function(t){const e=new Date(t,0,1).getDay();return new Date(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}var o;return z(i,t,j(r,A.MinusSign))}}const X={};function Y(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function J(t){return t instanceof Date&&!isNaN(t.valueOf())}class Z{}let $=(()=>{class t extends Z{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(R(e||this.locale)(t)){case O.Zero:return"zero";case O.One:return"one";case O.Two:return"two";case O.Few:return"few";case O.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.u))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class tt{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let et=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.V)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new tt(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new nt(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new nt(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L),r.Lb(r.s))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class nt{constructor(t,e){this.record=t,this.view=e}}let rt=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new it,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ot("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ot("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.Q),r.Lb(r.L))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class it{constructor(){this.$implicit=null,this.ngIf=null}}function ot(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.ub)(e)}'.`)}let st=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,o){if(null==e||""===e||e!=e)return null;try{return function(t,e,n,i){let o=function(t){if(J(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){t=t.trim();const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(t)){const[e,n,r]=t.split("-").map(t=>+t);return new Date(e,n-1,r)}let n;if(n=t.match(L))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),c=Math.round(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,u,c),e}(n)}const e=new Date(t);if(!J(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=function t(e,n){const i=function(t){return Object(r.jb)(t)[r.ab.LocaleId]}(e);if(F[i]=F[i]||{},F[i][n])return F[i][n];let o="";switch(n){case"shortDate":o=k(e,S.Short);break;case"mediumDate":o=k(e,S.Medium);break;case"longDate":o=k(e,S.Long);break;case"fullDate":o=k(e,S.Full);break;case"shortTime":o=x(e,S.Short);break;case"mediumTime":o=x(e,S.Medium);break;case"longTime":o=x(e,S.Long);break;case"fullTime":o=x(e,S.Full);break;case"short":const n=t(e,"shortTime"),r=t(e,"shortDate");o=H(N(e,S.Short),[n,r]);break;case"medium":const i=t(e,"mediumTime"),s=t(e,"mediumDate");o=H(N(e,S.Medium),[i,s]);break;case"long":const a=t(e,"longTime"),u=t(e,"longDate");o=H(N(e,S.Long),[a,u]);break;case"full":const c=t(e,"fullTime"),l=t(e,"fullDate");o=H(N(e,S.Full),[c,l])}return o&&(F[i][n]=o),o}(n,e)||e;let s,a=[];for(;e;){if(s=V.exec(e),!s){a.push(e);break}{a=a.concat(s.slice(1));const t=a.pop();if(!t)break;e=t}}let u=o.getTimezoneOffset();i&&(u=Y(i,u),o=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(Y(e,r)-r))}(o,i));let c="";return a.forEach(t=>{const e=function(t){if(X[t])return X[t];let e;switch(t){case"G":case"GG":case"GGG":e=K(B.Eras,T.Abbreviated);break;case"GGGG":e=K(B.Eras,T.Wide);break;case"GGGGG":e=K(B.Eras,T.Narrow);break;case"y":e=W(q.FullYear,1,0,!1,!0);break;case"yy":e=W(q.FullYear,2,0,!0,!0);break;case"yyy":e=W(q.FullYear,3,0,!1,!0);break;case"yyyy":e=W(q.FullYear,4,0,!1,!0);break;case"M":case"L":e=W(q.Month,1,1);break;case"MM":case"LL":e=W(q.Month,2,1);break;case"MMM":e=K(B.Months,T.Abbreviated);break;case"MMMM":e=K(B.Months,T.Wide);break;case"MMMMM":e=K(B.Months,T.Narrow);break;case"LLL":e=K(B.Months,T.Abbreviated,I.Standalone);break;case"LLLL":e=K(B.Months,T.Wide,I.Standalone);break;case"LLLLL":e=K(B.Months,T.Narrow,I.Standalone);break;case"w":e=Q(1);break;case"ww":e=Q(2);break;case"W":e=Q(1,!0);break;case"d":e=W(q.Date,1);break;case"dd":e=W(q.Date,2);break;case"E":case"EE":case"EEE":e=K(B.Days,T.Abbreviated);break;case"EEEE":e=K(B.Days,T.Wide);break;case"EEEEE":e=K(B.Days,T.Narrow);break;case"EEEEEE":e=K(B.Days,T.Short);break;case"a":case"aa":case"aaa":e=K(B.DayPeriods,T.Abbreviated);break;case"aaaa":e=K(B.DayPeriods,T.Wide);break;case"aaaaa":e=K(B.DayPeriods,T.Narrow);break;case"b":case"bb":case"bbb":e=K(B.DayPeriods,T.Abbreviated,I.Standalone,!0);break;case"bbbb":e=K(B.DayPeriods,T.Wide,I.Standalone,!0);break;case"bbbbb":e=K(B.DayPeriods,T.Narrow,I.Standalone,!0);break;case"B":case"BB":case"BBB":e=K(B.DayPeriods,T.Abbreviated,I.Format,!0);break;case"BBBB":e=K(B.DayPeriods,T.Wide,I.Format,!0);break;case"BBBBB":e=K(B.DayPeriods,T.Narrow,I.Format,!0);break;case"h":e=W(q.Hours,1,-12);break;case"hh":e=W(q.Hours,2,-12);break;case"H":e=W(q.Hours,1);break;case"HH":e=W(q.Hours,2);break;case"m":e=W(q.Minutes,1);break;case"mm":e=W(q.Minutes,2);break;case"s":e=W(q.Seconds,1);break;case"ss":e=W(q.Seconds,2);break;case"S":e=W(q.FractionalSeconds,1);break;case"SS":e=W(q.FractionalSeconds,2);break;case"SSS":e=W(q.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=G(U.Short);break;case"ZZZZZ":e=G(U.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=G(U.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=G(U.Long);break;default:return null}return X[t]=e,e}(t);c+=e?e(o,n,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}(e,n,o||this.locale,i)}catch(s){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.ub)(t)}'`)}(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.u))},t.\u0275pipe=r.Kb({name:"date",type:t,pure:!0}),t})(),at=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},providers:[{provide:Z,useClass:$}]}),t})(),ut=(()=>{class t{}return t.\u0275prov=Object(r.Hb)({token:t,providedIn:"root",factory:()=>new ct(Object(r.Sb)(s),window,Object(r.Sb)(r.m))}),t})();class ct{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=lt(this.window.history)||lt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function lt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class ht extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new ht,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=pt||(pt=document.querySelector("base"),pt)?pt.getAttribute("href"):null;return null==e?null:(n=e,ft||(ft=document.createElement("a")),ft.setAttribute("href",n),"/"===ft.pathname.charAt(0)?ft.pathname:"/"+ft.pathname);var n}resetBaseElement(){pt=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let ft,pt=null;const dt=new r.q("TRANSITION_ID"),gt=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[dt,s,r.r],multi:!0}];class vt{static init(){Object(r.X)(new vt)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const yt=new r.q("EventManagerPlugins");let mt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(yt),r.Sb(r.z))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class bt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let _t=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),wt=(()=>{class t extends _t{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const Ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Et=/%COMP%/g;function Ot(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ot(t,i,n):(i=i.replace(Et,t),n.push(i))}return n}function It(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Tt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new St(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new At(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.R.Native:case r.R.ShadowDom:return new kt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Ot(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(mt),r.Sb(wt),r.Sb(r.c))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();class St{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Ct[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Ct[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Ct[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.G.DashCase?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,It(n)):this.eventManager.addEventListener(t,e,It(n))}}class At extends St{constructor(t,e,n,r){super(t),this.component=n;const i=Ot(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Et,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Et,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class kt extends St{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.R.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=Ot(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let xt=(()=>{class t extends bt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const Nt=["alt","control","meta","shift"],jt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Dt=(()=>{class t extends bt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(Nt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Rt.hasOwnProperty(e)&&(e=Rt[e]))}return jt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Nt.forEach(r=>{r!=n&&(0,Pt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(s))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const Mt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){ht.makeCurrent(),vt.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.tb)(document),document},deps:[]}],Lt=Object(r.S)(r.W,"browser",Mt),Ft=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:yt,useClass:xt,multi:!0,deps:[s,r.z,r.B]},{provide:yt,useClass:Dt,multi:!0,deps:[s]},[],{provide:Tt,useClass:Tt,deps:[mt,wt,r.c]},{provide:r.F,useExisting:Tt},{provide:_t,useExisting:wt},{provide:wt,useClass:wt,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.z]},{provide:mt,useClass:mt,deps:[yt,r.z]},[]];let Vt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:dt,useExisting:r.c},gt]}}}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)(r.Sb(t,12))},providers:Ft,imports:[at,r.f]}),t})();"undefined"!=typeof window&&window;var Ut=n("LRne"),qt=n("Cfvw"),Bt=n("XNiG"),Ht=n("9ppp");class zt extends Bt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ht.a;return this._value}next(t){super.next(this._value=t)}}var Wt=n("z+Ro"),Kt=n("DH7j"),Gt=n("7o/Q");class Qt extends Gt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Xt extends Gt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Yt=n("SeVD"),Jt=n("HDdC");function Zt(t,e,n,r,i=new Xt(t,n,r)){if(!i.closed)return e instanceof Jt.a?e.subscribe(i):Object(Yt.a)(e)(i)}var $t=n("yCtX");const te={};class ee{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new ne(t,this.resultSelector))}}class ne extends Qt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(te),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Zt(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===te?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const re=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var ie=n("EY2u");function oe(t){return new Jt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(qt.a)(n):Object(ie.b)()).subscribe(e)})}var se=n("lJxs"),ae=n("bHdf");function ue(){return Object(ae.a)(1)}function ce(t,e){return function(n){return n.lift(new le(t,e))}}class le{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new he(t,this.predicate,this.thisArg))}}class he extends Gt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const fe=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function pe(t){return function(e){return 0===t?Object(ie.b)():e.lift(new de(t))}}class de{constructor(t){if(this.total=t,this.total<0)throw new fe}call(t,e){return e.subscribe(new ge(t,this.total))}}class ge extends Gt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ve(t=be){return e=>e.lift(new ye(t))}class ye{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new me(t,this.errorFactory))}}class me extends Gt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function be(){return new re}function _e(t=null){return e=>e.lift(new we(t))}class we{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ce(t,this.defaultValue))}}class Ce extends Gt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Ee=n("SpAZ"),Oe=n("zx2A");function Ie(t,e){return"function"==typeof e?n=>n.pipe(Ie((n,r)=>Object(qt.a)(t(n,r)).pipe(Object(se.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Te(t))}class Te{constructor(t){this.project=t}call(t,e){return e.subscribe(new Se(t,this.project))}}class Se extends Oe.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Oe.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Oe.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}function Ae(t){return e=>0===t?Object(ie.b)():e.lift(new ke(t))}class ke{constructor(t){if(this.total=t,this.total<0)throw new fe}call(t,e){return e.subscribe(new xe(t,this.total))}}class xe extends Gt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ne(...t){return ue()(Object(Ut.a)(...t))}function je(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Re(t,e,n))}}class Re{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Pe(t,this.accumulator,this.seed,this.hasSeed))}}class Pe extends Gt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function De(t){return function(e){const n=new Me(t),r=e.lift(n);return n.caught=r}}class Me{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Le(t,this.selector,this.caught))}}class Le extends Oe.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Oe.a(this);this.add(r);const i=Object(Oe.c)(n,r);i!==r&&this.add(i)}}}var Fe=n("5+tZ");function Ve(t,e){return Object(Fe.a)(t,e,1)}function Ue(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ce((e,n)=>t(e,n,r)):Ee.a,Ae(1),n?_e(e):ve(()=>new re))}var qe=n("vkgz"),Be=n("quSY");class He{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ze(t,this.callback))}}class ze extends Gt.a{constructor(t,e){super(t),this.add(new Be.a(e))}}class We{constructor(t,e){this.id=t,this.url=e}}class Ke extends We{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ge extends We{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qe extends We{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Xe extends We{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ye extends We{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Je extends We{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ze extends We{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $e extends We{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tn extends We{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class en{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class nn{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class on{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class an{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class un{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const cn="primary";class ln{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function hn(t){return new ln(t)}function fn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function pn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function dn(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!gn(t[i],e[i]))return!1;return!0}function gn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function vn(t){return Array.prototype.concat.apply([],t)}function yn(t){return t.length>0?t[t.length-1]:null}function mn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function bn(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(qt.a)(Promise.resolve(t)):Object(Ut.a)(t)}function _n(t,e,n){return n?function(t,e){return dn(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!On(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>gn(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!On(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!On(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!On(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class wn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hn(this.queryParams)),this._queryParamMap}toString(){return An.serialize(this)}}class Cn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,mn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kn(this)}}class En{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=hn(this.parameters)),this._parameterMap}toString(){return Dn(this)}}function On(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function In(t,e){let n=[];return mn(t.children,(t,r)=>{r===cn&&(n=n.concat(e(t,r)))}),mn(t.children,(t,r)=>{r!==cn&&(n=n.concat(e(t,r)))}),n}class Tn{}class Sn{parse(t){const e=new Un(t);return new wn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return kn(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return mn(e.children,(e,n)=>{n!==cn&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=In(e,(n,r)=>r===cn?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${kn(e)}/${n[0]}`:`${kn(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Nn(e)}=${Nn(t)}`).join("&"):`${Nn(e)}=${Nn(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const An=new Sn;function kn(t){return t.segments.map(t=>Dn(t)).join("/")}function xn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nn(t){return xn(t).replace(/%3B/gi,";")}function jn(t){return xn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rn(t){return decodeURIComponent(t)}function Pn(t){return Rn(t.replace(/\+/g,"%20"))}function Dn(t){return`${jn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${jn(t)}=${jn(e[t])}`).join("")}`;var e}const Mn=/^[^\/()?;=#]+/;function Ln(t){const e=t.match(Mn);return e?e[0]:""}const Fn=/^[^=?&#]+/,Vn=/^[^?&#]+/;class Un{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cn([],{}):new Cn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Cn(t,e)),n}parseSegment(){const t=Ln(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new En(Rn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ln(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Ln(this.remaining);t&&(n=t,this.capture(n))}t[Rn(e)]=Rn(n)}parseQueryParam(t){const e=function(t){const e=t.match(Fn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Vn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Pn(e),i=Pn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ln(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=cn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Cn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class qn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Bn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Bn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Hn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Hn(t,this._root).map(t=>t.value)}}function Bn(t,e){if(t===e.value)return e;for(const n of e.children){const e=Bn(t,n);if(e)return e}return null}function Hn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Hn(t,n);if(r.length)return r.unshift(e),r}return[]}class zn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Wn(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Kn extends qn{constructor(t,e){super(t),this.snapshot=e,Zn(this,t)}toString(){return this.snapshot.toString()}}function Gn(t,e){const n=function(t,e){const n=new Yn([],{},{},"",{},cn,e,null,t.root,-1,{});return new Jn("",new zn(n,[]))}(t,e),r=new zt([new En("",{})]),i=new zt({}),o=new zt({}),s=new zt({}),a=new zt(""),u=new Qn(r,i,s,a,o,cn,e,n.root);return u.snapshot=n.root,new Kn(new zn(u,[]),n)}class Qn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(se.a)(t=>hn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(se.a)(t=>hn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Yn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=hn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=hn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jn extends qn{constructor(t,e){super(e),this.url=t,Zn(this,e)}toString(){return $n(this._root)}}function Zn(t,e){e.value._routerState=t,e.children.forEach(e=>Zn(t,e))}function $n(t){const e=t.children.length>0?` { ${t.children.map($n).join(", ")} } `:"";return`${t.value}${e}`}function tr(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),dn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),dn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function er(t,e){return dn(t.params,e.params)&&function(t,e){return On(t,e)&&t.every((t,n)=>dn(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||er(t.parent,e.parent))}function nr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function rr(t){return"object"==typeof t&&null!=t&&t.outlets}function ir(t,e,n,r,i){let o={};return r&&mn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new wn(n.root===t?e:function t(e,n,r){const i={};return mn(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Cn(e.segments,i)}(n.root,t,e),o,i)}class or{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&nr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(rr);if(r&&r!==yn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ar(t,e,n){if(t||(t=new Cn([],{})),0===t.segments.length&&t.hasChildren())return ur(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(rr(s))break;const a=""+s,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!fr(a,u,e))return o;r+=2}else{if(!fr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Cn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Cn(t.segments.slice(r.pathIndex),t.children),ur(e,0,i)}return r.match&&0===i.length?new Cn(t.segments,{}):r.match&&!t.hasChildren()?cr(t,e,n):r.match?ur(t,0,i):cr(t,e,n)}function ur(t,e,n){if(0===n.length)return new Cn(t.segments,{});{const r=function(t){return rr(t[0])?t[0].outlets:{[cn]:t}}(n),i={};return mn(r,(n,r)=>{null!==n&&(i[r]=ar(t.children[r],e,n))}),mn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Cn(t.segments,i)}}function cr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(rr(o)){const t=lr(o.outlets);return new Cn(r,t)}if(0===i&&nr(n[0])){r.push(new En(t.segments[e].path,n[0])),i++;continue}const s=rr(o)?o.outlets.primary:""+o,a=i<n.length-1?n[i+1]:null;s&&a&&nr(a)?(r.push(new En(s,hr(a))),i+=2):(r.push(new En(s,{})),i++)}return new Cn(r,{})}function lr(t){const e={};return mn(t,(t,n)=>{null!==t&&(e[n]=cr(new Cn([],{}),0,t))}),e}function hr(t){const e={};return mn(t,(t,n)=>e[n]=""+t),e}function fr(t,e,n){return t==n.path&&dn(e,n.parameters)}class pr{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),tr(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Wn(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),mn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=Wn(t),i=t.value.component?n.children:e;mn(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=Wn(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new an(t.value.snapshot))}),t.children.length&&this.forwardEvent(new on(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(tr(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),dr(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function dr(t){tr(t.value),t.children.forEach(dr)}class gr{constructor(t,e){this.routes=t,this.module=e}}function vr(t){return"function"==typeof t}function yr(t){return t instanceof wn}const mr=Symbol("INITIAL_VALUE");function br(){return Ie(t=>function(...t){let e=void 0,n=void 0;return Object(Wt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Kt.a)(t[0])&&(t=t[0]),Object($t.a)(t,n).lift(new ee(e))}(...t.map(t=>t.pipe(Ae(1),function(...t){const e=t[t.length-1];return Object(Wt.a)(e)?(t.pop(),n=>Ne(t,n,e)):e=>Ne(t,e)}(mr)))).pipe(je((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==mr)return t;if(r===mr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||yr(r))return r}return t},t)},mr),ce(t=>t!==mr),Object(se.a)(t=>yr(t)?t:!0===t),Ae(1)))}class _r{constructor(t){this.segmentGroup=t||null}}class wr{constructor(t){this.urlTree=t}}function Cr(t){return new Jt.a(e=>e.error(new _r(t)))}function Er(t){return new Jt.a(e=>e.error(new wr(t)))}function Or(t){return new Jt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ir{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,cn).pipe(Object(se.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(De(t=>{if(t instanceof wr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof _r)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,cn).pipe(Object(se.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(De(t=>{if(t instanceof _r)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Cn([],{[cn]:t}):t;return new wn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(se.a)(t=>new Cn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(Ut.a)({});const n=[],r=[],i={};return mn(t,(t,o)=>{const s=e(o,t).pipe(Object(se.a)(t=>i[o]=t));o===cn?n.push(s):r.push(s)}),Ut.a.apply(null,n.concat(r)).pipe(ue(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ce((e,n)=>t(e,n,r)):Ee.a,pe(1),n?_e(e):ve(()=>new re))}(),Object(se.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(Ut.a)(...n).pipe(Ve(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(De(t=>{if(t instanceof _r)return Object(Ut.a)(null);throw t}))),Ue(t=>!!t),De((t,n)=>{if(t instanceof re||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(Ut.a)(new Cn([],{}));throw new _r(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return kr(r)!==o?Cr(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Cr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Er(i):this.lineralizeSegments(n,i).pipe(Object(Fe.a)(n=>{const i=new Cn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Tr(e,r,i);if(!s)return Cr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Er(l):this.lineralizeSegments(r,l).pipe(Object(Fe.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(se.a)(t=>(n._loadedConfig=t,new Cn(r,{})))):Object(Ut.a)(new Cn(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Tr(e,n,r);if(!i)return Cr(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(Fe.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Ar(t,e,n)&&kr(n)!==cn)}(t,n,r)?{segmentGroup:Sr(new Cn(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&kr(r)!==cn&&(n[kr(r)]=new Cn([],{}));return n}(r,new Cn(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Ar(t,e,n))}(t,n,r)?{segmentGroup:Sr(new Cn(t.segments,function(t,e,n,r){const i={};for(const o of n)Ar(t,e,o)&&!r[kr(o)]&&(i[kr(o)]=new Cn([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(se.a)(t=>new Cn(o,t))):0===r.length&&0===s.length?Object(Ut.a)(new Cn(o,{})):this.expandSegment(n,i,r,s,cn,!0).pipe(Object(se.a)(t=>new Cn(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Ut.a)(new gr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Ut.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Fe.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(se.a)(t=>(e._loadedConfig=t,t))):function(t){return new Jt.a(e=>e.error(fn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Ut.a)(new gr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(Ut.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&vr(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!vr(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return bn(o)});return Object(Ut.a)(i).pipe(br(),Object(qe.a)(t=>{if(!yr(t))return;const e=fn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(se.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ut.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Or(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new wn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return mn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return mn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Cn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Tr(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||pn)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Sr(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Cn(t.segments.concat(e.segments),e.children)}return t}function Ar(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function kr(t){return t.outlet||cn}class xr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Nr{constructor(t,e){this.component=t,this.route=e}}function jr(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=Wn(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!On(t.url,e.url);case"pathParamsOrQueryParamsChange":return!On(t.url,e.url)||!dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!er(t,e)||!dn(t.queryParams,e.queryParams);case"paramsChange":default:return!er(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new xr(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&u&&u.outlet&&u.outlet.isActivated&&o.canDeactivateChecks.push(new Nr(u.outlet.component,a))}else a&&Pr(n,u,o),o.canActivateChecks.push(new xr(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),mn(s,(t,e)=>Pr(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Rr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Pr(t,e,n){const r=Wn(t),i=t.value;mn(r,(t,r)=>{Pr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Nr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Dr(t,e){return null!==t&&e&&e(new sn(t)),Object(Ut.a)(!0)}function Mr(t,e){return null!==t&&e&&e(new rn(t)),Object(Ut.a)(!0)}function Lr(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ut.a)(!0);const i=r.map(r=>oe(()=>{const i=Rr(r,e,n);let o;if(function(t){return t&&vr(t.canActivate)}(i))o=bn(i.canActivate(e,t));else{if(!vr(i))throw new Error("Invalid CanActivate guard");o=bn(i(e,t))}return o.pipe(Ue())}));return Object(Ut.a)(i).pipe(br())}function Fr(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>oe(()=>{const i=e.guards.map(i=>{const o=Rr(i,e.node,n);let s;if(function(t){return t&&vr(t.canActivateChild)}(o))s=bn(o.canActivateChild(r,t));else{if(!vr(o))throw new Error("Invalid CanActivateChild guard");s=bn(o(r,t))}return s.pipe(Ue())});return Object(Ut.a)(i).pipe(br())}));return Object(Ut.a)(i).pipe(br())}class Vr{}class Ur{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Hr(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,cn),n=new Yn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new zn(n,e),i=new Jn(this.url,r);return this.inheritParamsAndData(i._root),Object(Ut.a)(i)}catch(t){return new Jt.a(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=Xn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=In(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>t.value.outlet===cn?-1:e.value.outlet===cn?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof Vr))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Vr}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Vr;if((t.outlet||cn)!==r)throw new Vr;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?yn(n).parameters:{};i=new Yn(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Kr(t),r,t.component,t,qr(e),Br(e)+n.length,Gr(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Vr;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||pn)(n,t,e);if(!r)throw new Vr;const i={};mn(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new Yn(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Kr(t),r,t.component,t,qr(e),Br(e)+o.length,Gr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Hr(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new zn(i,t)]}if(0===a.length&&0===c.length)return[new zn(i,[])];const l=this.processSegment(a,u,c,cn);return[new zn(i,l)]}}function qr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Br(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Hr(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>zr(t,e,n)&&Wr(n)!==cn)}(t,n,r)){const i=new Cn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&Wr(o)!==cn){const n=new Cn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[Wr(o)]=n}return i}(t,e,r,new Cn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>zr(t,e,n))}(t,n,r)){const o=new Cn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(zr(t,n,a)&&!i[Wr(a)]){const n=new Cn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[Wr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Cn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function zr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function Wr(t){return t.outlet||cn}function Kr(t){return t.data||{}}function Gr(t){return t.resolve||{}}function Qr(t){return function(e){return e.pipe(Ie(e=>{const n=t(e);return n?Object(qt.a)(n).pipe(Object(se.a)(()=>e)):Object(qt.a)([e])}))}}class Xr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}let Yr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Fb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Mb(0,"router-outlet")},directives:function(){return[li]},encapsulation:2}),t})();function Jr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Zr(r,$r(e,r))}}function Zr(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&t.outlet!==cn)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Jr(t.children,e)}function $r(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function ti(t){const e=t.children&&t.children.map(ti),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==cn&&(n.component=Yr),n}const ei=new r.q("ROUTES");class ni{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(se.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new gr(vn(r.injector.get(ei)).map(ti),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(qt.a)(this.loader.load(t)):bn(t()).pipe(Object(Fe.a)(t=>t instanceof r.v?Object(Ut.a)(t):Object(qt.a)(this.compiler.compileModuleAsync(t))))}}class ri{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ii,this.attachRef=null}}class ii{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ri,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class oi{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function si(t){throw t}function ai(t,e,n){return e.parse("/")}function ui(t,e){return Object(Ut.a)(null)}let ci=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Bt.a,this.errorHandler=si,this.malformedUriErrorHandler=ai,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ui,afterPreactivation:ui},this.urlHandlingStrategy=new oi,this.routeReuseStrategy=new Xr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.Y);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new wn(new Cn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ni(s,a,t=>this.triggerEvent(new en(t)),t=>this.triggerEvent(new nn(t))),this.routerState=Gn(this.currentUrlTree,this.rootComponentType),this.transitions=new zt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ce(t=>0!==t.id),Object(se.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Ie(t=>{let n=!1,r=!1;return Object(Ut.a)(t).pipe(Object(qe.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ie(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Ut.a)(t).pipe(Ie(t=>{const n=this.transitions.getValue();return e.next(new Ke(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ie.a:[t]}),Ie(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(Ie(t=>function(t,e,n,r,i){return new Ir(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(se.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(qe.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(Fe.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Ur(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(se.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(qe.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(qe.a)(t=>{const n=new Ye(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ke(n,this.serializeUrl(r),i,o);e.next(a);const u=Gn(r,this.rootComponentType).snapshot;return Object(Ut.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ie.a}),Qr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(qe.a)(t=>{const e=new Je(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(se.a)(t=>Object.assign(Object.assign({},t),{guards:jr(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(Fe.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Ut.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(qt.a)(t).pipe(Object(Fe.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Ut.a)(!0);const s=o.map(o=>{const s=Rr(o,e,i);let a;if(function(t){return t&&vr(t.canDeactivate)}(s))a=bn(s.canDeactivate(t,e,n,r));else{if(!vr(s))throw new Error("Invalid CanDeactivate guard");a=bn(s(t,e,n,r))}return a.pipe(Ue())});return Object(Ut.a)(s).pipe(br())}(t.component,t.route,n,e,r)),Ue(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Fe.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(qt.a)(e).pipe(Ve(e=>Object(qt.a)([Mr(e.route.parent,r),Dr(e.route,r),Fr(t,e.path,n),Lr(t,e.route,n)]).pipe(ue(),Ue(t=>!0!==t,!0))),Ue(t=>!0!==t,!0))}(r,o,t,e):Object(Ut.a)(n)),Object(se.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(qe.a)(t=>{if(yr(t.guardsResult)){const e=fn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(qe.a)(t=>{const e=new Ze(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ce(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Qe(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Qr(t=>{if(t.guards.canActivateChecks.length)return Object(Ut.a)(t).pipe(Object(qe.a)(t=>{const e=new $e(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Ie(t=>{let n=!1;return Object(Ut.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(Fe.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Ut.a)(t);let o=0;return Object(qt.a)(n).pipe(Ve(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Ut.a)({});const o={};return Object(qt.a)(i).pipe(Object(Fe.a)(i=>function(t,e,n,r){const i=Rr(t,e,r);return bn(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(qe.a)(t=>{o[i]=t}))),pe(1),Object(Fe.a)(()=>Object.keys(o).length===i.length?Object(Ut.a)(o):ie.a))}(t._resolve,t,e,r).pipe(Object(se.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Xn(t,n).resolve),null)))}(t.route,e,r,i)),Object(qe.a)(()=>o++),pe(1),Object(Fe.a)(e=>o===n.length?Object(Ut.a)(t):ie.a))}))}),Object(qe.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Qe(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(qe.a)(t=>{const e=new tn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Qr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(se.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new zn(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new Qn(new zt((i=n.value).url),new zt(i.params),new zt(i.queryParams),new zt(i.fragment),new zt(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new zn(r,o)}}var i}(t,e._root,n?n._root:void 0);return new Kn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(qe.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(se.a)(t=>(new pr(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(qe.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Qe(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new He(i))),De(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=yr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Qe(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Xe(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return ie.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Jr(t),this.config=t.map(ti),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.V)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return ir(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new or(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return mn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new or(n,e,r)}(n);if(o.toRoot())return ir(e.root,new Cn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new sr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new sr(t,t===e.root,0)}const r=nr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new sr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?ur(s.segmentGroup,s.index,o.commands):ar(s.segmentGroup,s.index,o.commands);return ir(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.V)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=yr(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(yr(t))return _n(this.currentUrlTree,t,e);const n=this.parseUrl(t);return _n(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ge(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.N),r.Sb(Tn),r.Sb(ii),r.Sb(w),r.Sb(r.r),r.Sb(r.w),r.Sb(r.i),r.Sb(void 0))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),li=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||cn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new hi(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(ii),r.Lb(r.Q),r.Lb(r.j),r.Tb("name"),r.Lb(r.h))},t.\u0275dir=r.Gb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class hi{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Qn?this.route:t===ii?this.childContexts:this.parent.get(t,e)}}class fi{}class pi{preload(t,e){return Object(Ut.a)(null)}}let di=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ni(e,n,e=>t.triggerEvent(new en(e)),e=>t.triggerEvent(new nn(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ce(t=>t instanceof Ge),Ve(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(qt.a)(n).pipe(Object(ae.a)(),Object(se.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Fe.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(ci),r.Sb(r.w),r.Sb(r.i),r.Sb(r.r),r.Sb(fi))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),gi=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ke?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ge&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof un&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new un(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(ci),r.Sb(ut),r.Sb(void 0))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();const vi=new r.q("ROUTER_CONFIGURATION"),yi=new r.q("ROUTER_FORROOT_GUARD"),mi=[w,{provide:Tn,useClass:Sn},{provide:ci,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new ci(null,t,e,n,r,i,s,vn(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[Tn,ii,w,r.r,r.w,r.i,ei,vi,[class{},new r.A],[class{},new r.A]]},ii,{provide:Qn,useFactory:function(t){return t.routerState.root},deps:[ci]},{provide:r.w,useClass:r.K},di,pi,class{preload(t,e){return e().pipe(De(()=>Object(Ut.a)(null)))}},{provide:vi,useValue:{enableTracing:!1}}];function bi(){return new r.y("Router",ci)}let _i=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[mi,Oi(e),{provide:yi,useFactory:Ei,deps:[[ci,new r.A,new r.J]]},{provide:vi,useValue:n||{}},{provide:v,useFactory:Ci,deps:[a,[new r.p(m),new r.A],vi]},{provide:gi,useFactory:wi,deps:[ci,ut,vi]},{provide:fi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:pi},{provide:r.y,multi:!0,useFactory:bi},[Ii,{provide:r.d,multi:!0,useFactory:Ti,deps:[Ii]},{provide:Ai,useFactory:Si,deps:[Ii]},{provide:r.b,multi:!0,useExisting:Ai}]]}}static forChild(e){return{ngModule:t,providers:[Oi(e)]}}}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)(r.Sb(yi,8),r.Sb(ci,8))}}),t})();function wi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new gi(t,e,n)}function Ci(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function Ei(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Oi(t){return[{provide:r.a,multi:!0,useValue:t},{provide:ei,multi:!0,useValue:t}]}let Ii=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new Bt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ci),r=this.injector.get(vi);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(Ut.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(vi),n=this.injector.get(di),i=this.injector.get(gi),o=this.injector.get(ci),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(r.r))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})();function Ti(t){return t.appInitializer.bind(t)}function Si(t){return t.bootstrapListener.bind(t)}const Ai=new r.q("Router Initializer"),ki=[];let xi=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},imports:[[_i.forRoot(ki)],_i]}),t})();var Ni=n("zIRd"),ji=(n("t6oF"),n("6Uf2"),n("WVRz")),Ri=n("q/0M"),Pi=n("qOnz"),Di=function(t,e){return(Di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Mi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Li,Fi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vi=Vi||{},Ui=Fi||self;function qi(){}function Bi(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Hi(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var zi="closure_uid_"+(1e9*Math.random()>>>0),Wi=0;function Ki(t,e,n){return t.call.apply(t.bind,arguments)}function Gi(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Qi(t,e,n){return(Qi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ki:Gi).apply(null,arguments)}function Xi(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Yi(){return Date.now()}function Ji(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Zi(){this.j=this.j,this.i=this.i}Zi.prototype.j=!1,Zi.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,zi)&&t[zi]||(t[zi]=++Wi)}(this)},Zi.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var $i=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},to=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function eo(t){return Array.prototype.concat.apply([],arguments)}function no(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ro(t){return/^[\s\xa0]*$/.test(t)}var io,oo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function so(t,e){return-1!=t.indexOf(e)}function ao(t,e){return t<e?-1:t>e?1:0}t:{var uo=Ui.navigator;if(uo){var co=uo.userAgent;if(co){io=co;break t}}io=""}function lo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ho(t){var e={};for(var n in t)e[n]=t[n];return e}var fo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function po(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<fo.length;o++)n=fo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function go(t){return go[" "](t),t}go[" "]=qi;var vo,yo,mo=so(io,"Opera"),bo=so(io,"Trident")||so(io,"MSIE"),_o=so(io,"Edge"),wo=_o||bo,Co=so(io,"Gecko")&&!(so(io.toLowerCase(),"webkit")&&!so(io,"Edge"))&&!(so(io,"Trident")||so(io,"MSIE"))&&!so(io,"Edge"),Eo=so(io.toLowerCase(),"webkit")&&!so(io,"Edge");function Oo(){var t=Ui.document;return t?t.documentMode:void 0}t:{var Io="",To=(yo=io,Co?/rv:([^\);]+)(\)|;)/.exec(yo):_o?/Edge\/([\d\.]+)/.exec(yo):bo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(yo):Eo?/WebKit\/(\S+)/.exec(yo):mo?/(?:Version)[ \/]?(\S+)/.exec(yo):void 0);if(To&&(Io=To?To[1]:""),bo){var So=Oo();if(null!=So&&So>parseFloat(Io)){vo=String(So);break t}}vo=Io}var Ao={};function ko(t){return function(t,e){var n=Ao;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=oo(String(vo)).split("."),r=oo(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ao(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ao(0==s[2].length,0==a[2].length)||ao(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var xo=Ui.document&&bo&&(Oo()||parseInt(vo,10))||void 0,No=!bo||9<=Number(xo),jo=bo&&!ko("9"),Ro=function(){if(!Ui.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ui.addEventListener("test",qi,e),Ui.removeEventListener("test",qi,e)}catch(n){}return t}();function Po(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Do(t,e){if(Po.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Co){t:{try{go(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Mo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Po.prototype.b=function(){this.defaultPrevented=!0},Ji(Do,Po);var Mo={2:"touch",3:"pen",4:"mouse"};Do.prototype.b=function(){Do.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,jo)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Lo="closure_listenable_"+(1e6*Math.random()|0),Fo=0;function Vo(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Fo,this.Y=this.Z=!1}function Uo(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function qo(t){this.src=t,this.a={},this.b=0}function Bo(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=$i(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Uo(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ho(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}qo.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ho(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Vo(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var zo="closure_lm_"+(1e6*Math.random()|0),Wo={};function Ko(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=ts(r),e&&e[Lo]?e.wa(n,r,Hi(i)?!!i.capture:!!i,o):Go(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ko(t,e[o],n,r,i);return null}return n=ts(n),t&&t[Lo]?t.va(e,n,Hi(r)?!!r.capture:!!r,i):Go(t,e,n,!1,r,i)}function Go(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Hi(i)?!!i.capture:!!i;if(s&&!No)return null;var a=Zo(t);if(a||(t[zo]=a=new qo(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Jo,e=No?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ro||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xo(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Qo(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Lo])Bo(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xo(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Zo(e))?(Bo(n,t),0==n.b&&(n.src=null,e[zo]=null)):Uo(t)}}}function Xo(t){return t in Wo?Wo[t]:Wo[t]="on"+t}function Yo(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Qo(t),n.call(r,e)}function Jo(t,e){if(t.Y)return!0;if(!No){if(!e)t:{e=["window","event"];for(var n=Ui,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Yo(t,e=new Do(e,this))}return Yo(t,new Do(e,this))}function Zo(t){return(t=t[zo])instanceof qo?t:null}var $o="__closure_events_fn_"+(1e9*Math.random()>>>0);function ts(t){return"function"==typeof t?t:(t[$o]||(t[$o]=function(e){return t.handleEvent(e)}),t[$o])}function es(){Zi.call(this),this.c=new qo(this),this.J=this,this.C=null}function ns(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Po(e,t);else if(e instanceof Po)e.target=e.target||t;else{var i=e;po(e=new Po(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=rs(s,r,!0,e)&&i}if(i=rs(s=e.a=t,r,!0,e)&&i,i=rs(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=rs(s=e.a=n[o],r,!1,e)&&i}function rs(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Bo(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ji(es,Zi),es.prototype[Lo]=!0,(Li=es.prototype).addEventListener=function(t,e,n,r){Ko(this,t,e,n,r)},Li.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Hi(i)?!!i.capture:!!i,r=ts(r),e&&e[Lo]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Ho(s=e.a[n],r,i,o))&&(Uo(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Zo(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Ho(n,r,i,o)),(r=-1<e?n[e]:null)&&Qo(r))}(this,t,e,n,r)},Li.G=function(){if(es.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Uo(n[r]);delete e.a[t],e.b--}}this.C=null},Li.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Li.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var is=Ui.JSON.stringify;function os(){this.b=this.a=null}var ss,as=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new cs}),(function(t){t.reset()}));function us(){var t=ps,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function cs(){this.next=this.b=this.a=null}function ls(t){Ui.setTimeout((function(){throw t}),0)}function hs(t,e){ss||function(){var t=Ui.Promise.resolve(void 0);ss=function(){t.then(ds)}}(),fs||(ss(),fs=!0),ps.add(t,e)}os.prototype.add=function(t,e){var n=as.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},cs.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},cs.prototype.reset=function(){this.next=this.b=this.a=null};var fs=!1,ps=new os;function ds(){for(var t;t=us();){try{t.a.call(t.b)}catch(n){ls(n)}var e=as;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}fs=!1}function gs(t,e){es.call(this),this.b=t||1,this.a=e||Ui,this.f=Qi(this.Za,this),this.g=Yi()}function vs(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ys(t,e,n){if("function"==typeof t)n&&(t=Qi(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Qi(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ui.setTimeout(t,e||0)}function ms(t){t.a=ys((function(){t.a=null,t.c&&(t.c=!1,ms(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Ji(gs,es),(Li=gs.prototype).aa=!1,Li.M=null,Li.Za=function(){if(this.aa){var t=Yi()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ns(this,"tick"),this.aa&&(vs(this),this.start()))}},Li.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Yi())},Li.G=function(){gs.X.G.call(this),vs(this),delete this.a};var bs=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Di(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ms(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ui.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Zi);function _s(t){Zi.call(this),this.b=t,this.a={}}Ji(_s,Zi);var ws=[];function Cs(t,e,n,r){Array.isArray(n)||(n&&(ws[0]=n.toString()),n=ws);for(var i=0;i<n.length;i++){var o=Ko(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Es(t){lo(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Qo(t)}),t),t.a={}}function Os(){this.a=!0}function Is(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return is(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}_s.prototype.G=function(){_s.X.G.call(this),Es(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Os.prototype.info=function(){};var Ts={},Ss=null;function As(){return Ss=Ss||new es}function ks(t){Po.call(this,Ts.Fa,t)}function xs(t){var e=As();ns(e,new ks(e,t))}function Ns(t,e){Po.call(this,Ts.STAT_EVENT,t),this.stat=e}function js(t){var e=As();ns(e,new Ns(e,t))}function Rs(t){Po.call(this,Ts.Ga,t)}function Ps(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ui.setTimeout((function(){t()}),e)}Ts.Fa="serverreachability",Ji(ks,Po),Ts.STAT_EVENT="statevent",Ji(Ns,Po),Ts.Ga="timingevent",Ji(Rs,Po);var Ds={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ms={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ls(){}function Fs(){}Ls.prototype.a=null;var Vs,Us={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function qs(){Po.call(this,"d")}function Bs(){Po.call(this,"c")}function Hs(){}function zs(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new _s(this),this.P=Ws,this.R=new gs(t=wo?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Ji(qs,Po),Ji(Bs,Po),Ji(Hs,Ls),Vs=new Hs;var Ws=45e3,Ks={},Gs={};function Qs(t,e,n){t.H=1,t.i=va(la(e)),t.j=n,t.I=!0,Xs(t,null)}function Xs(t,e){t.u=Yi(),Zs(t),t.l=la(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),ka(n.b,"t",r),t.D=0,t.a=Eu(t.g,t.g.C?e:null),0<t.O&&(t.F=new bs(Qi(t.Ca,t,t.a),t.O)),Cs(t.J,t.a,"readystatechange",t.Xa),e=t.B?ho(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),xs(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ys(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Js(t,n);if(i==Gs){4==e&&(t.h=4,js(14),r=!1),Is(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ks){t.h=4,js(15),Is(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Is(t.c,t.f,i,null),ra(t,i)}4==e&&0==n.length&&(t.h=1,js(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),gu(e),e.F=!0,js(11))):(Is(t.c,t.f,n,"[Invalid Chunked Response]"),na(t),ea(t))}function Js(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Gs:(n=Number(e.substring(n,r)),isNaN(n)?Ks:(r+=1)+n>e.length?Gs:(e=e.substr(r,n),t.D=r+n,e))}function Zs(t){t.T=Yi()+t.P,$s(t,t.P)}function $s(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ps(Qi(t.Va,t),e)}function ta(t){t.o&&(Ui.clearTimeout(t.o),t.o=null)}function ea(t){0==t.g.v||t.A||mu(t.g,t)}function na(t){ta(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,vs(t.R),Es(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ra(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ma(n.b,t)))if(n.I=t.N,!t.C&&Ma(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(cm){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;yu(n),su(n)}du(n),js(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ps(Qi(n.Sa,n),6e3));if(1>=Da(n.b)&&n.ea){try{n.ea()}catch(cm){}n.ea=void 0}}else _u(n,11)}else if((t.C||n.a==t)&&yu(n),!ro(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(so(l,"spdy")||so(l,"quic")||so(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(La(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,ga(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Yi()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Cu(u,u.C?u.ga:null,u.fa),p.C){Fa(u.b,p);var d=p,g=u.D;g&&d.setTimeout(g),d.o&&(ta(d),Zs(d)),u.a=p}else pu(u);0<n.g.length&&cu(n)}else"stop"!=i[0]&&"close"!=i[0]||_u(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?_u(n,7):ou(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);xs(4)}catch(cm){}}function ia(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Bi(t)||"string"==typeof t)to(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Bi(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Bi(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function oa(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof oa)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function sa(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];aa(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)aa(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function aa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Li=zs.prototype).setTimeout=function(t){this.P=t},Li.Xa=function(t){t=t.target;var e=this.F;e&&3==eu(t)?e.f():this.Ca(t)},Li.Ca=function(t){try{if(t==this.a)t:{var e=eu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!wo&&!this.a.$())){this.A||4!=e||7==n||xs(8==n||0>=r?3:2),ta(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ro(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,js(12),na(this),ea(this);break t}Is(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ra(this,u)}this.I?(Ys(this,e,o),wo&&this.b&&3==e&&(Cs(this.J,this.R,"tick",this.Wa),this.R.start())):(Is(this.c,this.f,o,null),ra(this,o)),4==e&&na(this),this.b&&!this.A&&(4==e?mu(this.g,this):(this.b=!1,Zs(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,js(12)):(this.h=0,js(13)),na(this),ea(this)}}}catch(c){}},Li.Wa=function(){if(this.a){var t=eu(this.a),e=this.a.$();this.D<e.length&&(ta(this),Ys(this,t,e),this.b&&4!=t&&Zs(this))}},Li.cancel=function(){this.A=!0,na(this)},Li.Va=function(){this.o=null;var t=Yi();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(xs(3),js(17)),na(this),this.h=2,ea(this)):$s(this,this.T-t)},(Li=oa.prototype).K=function(){sa(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Li.L=function(){return sa(this),this.a.concat()},Li.get=function(t,e){return aa(this.b,t)?this.b[t]:e},Li.set=function(t,e){aa(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Li.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ua=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ca(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ca){this.a=void 0!==e?e:t.a,ha(this,t.f),this.j=t.j,fa(this,t.c),pa(this,t.h),this.g=t.g,e=t.b;var n=new Ia;n.c=e.c,e.a&&(n.a=new oa(e.a),n.b=e.b),da(this,n),this.i=t.i}else t&&(n=String(t).match(ua))?(this.a=!!e,ha(this,n[1]||"",!0),this.j=ya(n[2]||""),fa(this,n[3]||"",!0),pa(this,n[4]),this.g=ya(n[5]||"",!0),da(this,n[6]||"",!0),this.i=ya(n[7]||"")):(this.a=!!e,this.b=new Ia(null,this.a))}function la(t){return new ca(t)}function ha(t,e,n){t.f=n?ya(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function fa(t,e,n){t.c=n?ya(e,!0):e}function pa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function da(t,e,n){e instanceof Ia?(t.b=e,function(t,e){e&&!t.f&&(Ta(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Sa(this,e),ka(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ma(e,Ea)),t.b=new Ia(e,t.a))}function ga(t,e,n){t.b.set(e,n)}function va(t){return ga(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Yi()).toString(36)),t}function ya(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ma(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ba),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ba(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ca.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ma(e,_a,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ma(e,_a,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ma(n,"/"==n.charAt(0)?Ca:wa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ma(n,Oa)),t.join("")};var _a=/[#\/\?@]/g,wa=/[#\?:]/g,Ca=/[#\?]/g,Ea=/[#\?@]/g,Oa=/#/g;function Ia(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ta(t){t.a||(t.a=new oa,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Sa(t,e){Ta(t),e=xa(t,e),aa(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,aa((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&sa(t)))}function Aa(t,e){return Ta(t),e=xa(t,e),aa(t.a.b,e)}function ka(t,e,n){Sa(t,e),0<n.length&&(t.c=null,t.a.set(xa(t,e),no(n)),t.b+=n.length)}function xa(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Li=Ia.prototype).add=function(t,e){Ta(this),this.c=null,t=xa(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Li.forEach=function(t,e){Ta(this),this.a.forEach((function(n,r){to(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Li.L=function(){Ta(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Li.K=function(t){Ta(this);var e=[];if("string"==typeof t)Aa(this,t)&&(e=eo(e,this.a.get(xa(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=eo(e,t[n])}return e},Li.set=function(t,e){return Ta(this),this.c=null,Aa(this,t=xa(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Li.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Li.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Na=function(){return function(t,e){this.b=t,this.a=e}}();function ja(t){this.g=t||Ra,t=Ui.PerformanceNavigationTiming?0<(t=Ui.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ui.ia&&Ui.ia.ya&&Ui.ia.ya()&&Ui.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ra=10;function Pa(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Da(t){return t.b?1:t.a?t.a.size:0}function Ma(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function La(t,e){t.a?t.a.add(e):t.b=e}function Fa(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Va(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Mi(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return no(t.c)}function Ua(){}function qa(){this.a=new Ua}function Ba(t,e,n){var r=n||"";try{ia(t,(function(t,n){var i=t;Hi(t)&&(i=is(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ha(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}ja.prototype.cancel=function(){var t,e;if(this.c=Va(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Mi(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ua.prototype.stringify=function(t){return Ui.JSON.stringify(t,void 0)},Ua.prototype.parse=function(t){return Ui.JSON.parse(t,void 0)};var za=Ui.JSON.parse;function Wa(t){es.call(this),this.headers=new oa,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ka,this.D=this.F=!1}Ji(Wa,es);var Ka="",Ga=/^https?$/i,Qa=["POST","PUT"];function Xa(t){return"content-type"==t.toLowerCase()}function Ya(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ja(t),$a(t)}function Ja(t){t.u||(t.u=!0,ns(t,"complete"),ns(t,"error"))}function Za(t){if(t.b&&void 0!==Vi&&(!t.s[1]||4!=eu(t)||2!=t.W()))if(t.l&&4==eu(t))ys(t.za,0,t);else if(ns(t,"readystatechange"),4==eu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ua)[1]||null;if(!o&&Ui.self&&Ui.self.location){var s=Ui.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ga.test(o?o.toLowerCase():"")}e=i}if(e)ns(t,"complete"),ns(t,"success");else{t.h=6;try{var a=2<eu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Ja(t)}}finally{$a(t)}}}function $a(t,e){if(t.a){tu(t);var n=t.a,r=t.s[0]?qi:null;t.a=null,t.s=null,e||ns(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function tu(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ui.clearTimeout(t.m),t.m=null)}function eu(t){return t.a?t.a.readyState:0}function nu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return lo(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ga(t,e,n))}function ru(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function iu(t){this.pa=0,this.g=[],this.c=new Os,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ru("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ru("baseRetryDelayMs",5e3,t),this.Ra=ru("retryDelaySeedMs",1e4,t),this.Ma=ru("forwardChannelMaxRetries",2,t),this.ma=ru("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ja(t&&t.concurrentRequestLimit),this.ka=new qa,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function ou(t){if(au(t),3==t.v){var e=t.R++,n=la(t.B);ga(n,"SID",t.J),ga(n,"RID",e),ga(n,"TYPE","terminate"),hu(t,n),(e=new zs(t,t.c,e,void 0)).H=2,e.i=va(la(n)),n=!1,Ui.navigator&&Ui.navigator.sendBeacon&&(n=Ui.navigator.sendBeacon(e.i.toString(),"")),!n&&Ui.Image&&((new Image).src=e.i,n=!0),n||(e.a=Eu(e.g,null),e.a.ba(e.i)),e.u=Yi(),Zs(e)}wu(t)}function su(t){t.a&&(gu(t),t.a.cancel(),t.a=null)}function au(t){su(t),t.j&&(Ui.clearTimeout(t.j),t.j=null),yu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ui.clearTimeout(t.h),t.h=null)}function uu(t,e){t.g.push(new Na(t.Oa++,e)),3==t.v&&cu(t)}function cu(t){Pa(t.b)||t.h||(t.h=!0,hs(t.Ba,t),t.u=0)}function lu(t,e){var n;n=e?e.f:t.R++;var r=la(t.B);ga(r,"SID",t.J),ga(r,"RID",n),ga(r,"AID",t.P),hu(t,r),t.i&&t.l&&nu(r,t.i,t.l),n=new zs(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=fu(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),La(t.b,n),Qs(n,r,e)}function hu(t,e){t.f&&ia({},(function(t,n){ga(e,n,t)}))}function fu(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Qi(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Ba(l,s,"req"+c+"_")}catch(nc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function pu(t){t.a||t.j||(t.T=1,hs(t.Aa,t),t.o=0)}function du(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ps(Qi(t.Aa,t),bu(t,t.o)),t.o++,0))}function gu(t){null!=t.s&&(Ui.clearTimeout(t.s),t.s=null)}function vu(t){t.a=new zs(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=la(t.la);ga(e,"RID","rpc"),ga(e,"SID",t.J),ga(e,"CI",t.H?"0":"1"),ga(e,"AID",t.P),hu(t,e),ga(e,"TYPE","xmlhttp"),t.i&&t.l&&nu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=va(la(e)),n.j=null,n.I=!0,Xs(n,t)}function yu(t){null!=t.m&&(Ui.clearTimeout(t.m),t.m=null)}function mu(t,e){var n=null;if(t.a==e){yu(t),gu(t),t.a=null;var r=2}else{if(!Ma(t.b,e))return;n=e.s,Fa(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Yi()-e.u;var i=t.u;ns(r=As(),new Rs(r,n,e,i)),cu(t)}else pu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Da(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ps(Qi(t.Ba,t,e),bu(t,t.u)),t.u++,0)))}(t,e)||2==r&&du(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:_u(t,5);break;case 4:_u(t,10);break;case 3:_u(t,6);break;default:_u(t,2)}}function bu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function _u(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Qi(t.Ya,t);n||(n=new ca("//www.google.com/images/cleardot.gif"),Ui.location&&"http"==Ui.location.protocol||ha(n,"https"),va(n)),function(t,e){var n=new Os;if(Ui.Image){var r=new Image;r.onload=Xi(Ha,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Xi(Ha,n,r,"TestLoadImage: error",!1,e),r.onabort=Xi(Ha,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xi(Ha,n,r,"TestLoadImage: timeout",!1,e),Ui.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else js(2);t.v=0,t.f&&t.f.ra(e),wu(t),au(t)}function wu(t){t.v=0,t.I=-1,t.f&&(0==Va(t.b).length&&0==t.g.length||(t.b.c.length=0,no(t.g),t.g.length=0),t.f.qa())}function Cu(t,e,n){var r=function(t){return t instanceof ca?la(t):new ca(t,void 0)}(n);if(""!=r.c)e&&fa(r,e+"."+r.c),pa(r,r.h);else{var i=Ui.location;r=function(t,e,n,r){var i=new ca(null,void 0);return t&&ha(i,t),e&&fa(i,e),n&&pa(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&lo(t.V,(function(t,e){ga(r,e,t)})),n=t.na,(e=t.A)&&n&&ga(r,e,n),ga(r,"VER",t.ha),hu(t,r),r}function Eu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Wa(t.Na)).F=t.C,e}function Ou(){}function Iu(){if(bo&&!(10<=Number(xo)))throw Error("Environmental error: no available transport.")}function Tu(t,e){es.call(this),this.a=new iu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ro(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ro(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ku(this)}function Su(t){qs.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Au(){Bs.call(this),this.status=1}function ku(t){this.a=t}(Li=Wa.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Vs),this.a.onreadystatechange=Qi(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Ya(this,o)}t=n||"";var i=new oa(this.headers);r&&ia(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Xa,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ui.FormData&&t instanceof Ui.FormData,!(0<=$i(Qa,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{tu(this),0<this.o&&((this.D=function(t){return bo&&ko(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Qi(this.xa,this)):this.m=ys(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Ya(this,o)}},Li.xa=function(){void 0!==Vi&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ns(this,"timeout"),this.abort(8))},Li.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ns(this,"complete"),ns(this,"abort"),$a(this))},Li.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),$a(this,!0)),Wa.X.G.call(this)},Li.za=function(){this.j||(this.A||this.l||this.g?Za(this):this.Ua())},Li.Ua=function(){Za(this)},Li.W=function(){try{return 2<eu(this)?this.a.status:-1}catch(yo){return-1}},Li.$=function(){try{return this.a?this.a.responseText:""}catch(yo){return""}},Li.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),za(e)}},Li.ua=function(){return this.h},Li.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Li=iu.prototype).ha=8,Li.v=1,Li.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new zs(this,this.c,t,void 0),r=this.l;if(this.O&&(r?po(r=ho(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=fu(this,n,e),ga(i=la(this.B),"RID",t),ga(i,"CVER",22),this.A&&ga(i,"X-HTTP-Session-Id",this.A),hu(this,i),this.i&&r&&nu(i,this.i,r),La(this.b,n),this.Ia&&ga(i,"TYPE","init"),this.da?(ga(i,"$req",e),ga(i,"SID","null"),n.U=!0,Qs(n,i,null)):Qs(n,i,e),this.v=2}}else 3==this.v&&(t?lu(this,t):0==this.g.length||Pa(this.b)||lu(this))},Li.Aa=function(){if(this.j=null,vu(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ps(Qi(this.Ta,this),t)}},Li.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,js(10),su(this),vu(this))},Li.Sa=function(){null!=this.m&&(this.m=null,su(this),du(this),js(19))},Li.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),js(2)):(this.c.info("Failed to ping google.com"),js(1))},(Li=Ou.prototype).ta=function(){},Li.sa=function(){},Li.ra=function(){},Li.qa=function(){},Li.Ja=function(){},Iu.prototype.a=function(t,e){return new Tu(t,e)},Ji(Tu,es),Tu.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;js(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Cu(t,null,t.fa),cu(t)},Tu.prototype.close=function(){ou(this.a)},Tu.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,uu(this.a,e)}else this.l?((e={}).__data__=is(t),uu(this.a,e)):uu(this.a,t)},Tu.prototype.G=function(){this.a.f=null,delete this.f,ou(this.a),delete this.a,Tu.X.G.call(this)},Ji(Su,qs),Ji(Au,Bs),Ji(ku,Ou),ku.prototype.ta=function(){ns(this.a,"a")},ku.prototype.sa=function(t){ns(this.a,new Su(t))},ku.prototype.ra=function(t){ns(this.a,new Au(t))},ku.prototype.qa=function(){ns(this.a,"b")},Iu.prototype.createWebChannel=Iu.prototype.a,Tu.prototype.send=Tu.prototype.h,Tu.prototype.open=Tu.prototype.g,Tu.prototype.close=Tu.prototype.close,Ds.NO_ERROR=0,Ds.TIMEOUT=8,Ds.HTTP_ERROR=6,Ms.COMPLETE="complete",Fs.EventType=Us,Us.OPEN="a",Us.CLOSE="b",Us.ERROR="c",Us.MESSAGE="d",es.prototype.listen=es.prototype.va,Wa.prototype.listenOnce=Wa.prototype.wa,Wa.prototype.getLastError=Wa.prototype.Qa,Wa.prototype.getLastErrorCode=Wa.prototype.ua,Wa.prototype.getStatus=Wa.prototype.W,Wa.prototype.getResponseJson=Wa.prototype.Pa,Wa.prototype.getResponseText=Wa.prototype.$,Wa.prototype.send=Wa.prototype.ba;var xu=Ds,Nu=Ms,ju=Ts,Ru=Fs,Pu=Wa,Du=n("/6Yf"),Mu=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Lu=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Fu=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Fu.UNAUTHENTICATED=new Fu(null),Fu.l=new Fu("google-credentials-uid"),Fu._=new Fu("first-party-uid");var Vu=new Ri.b("@firebase/firestore");function Uu(){return Vu.logLevel}function qu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vu.logLevel<=Ri.a.DEBUG){var r=e.map(zu);Vu.debug.apply(Vu,Object(ji.g)(["Firestore (8.1.1): "+t],r))}}function Bu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vu.logLevel<=Ri.a.ERROR){var r=e.map(zu);Vu.error.apply(Vu,Object(ji.g)(["Firestore (8.1.1): "+t],r))}}function Hu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Vu.logLevel<=Ri.a.WARN){var r=e.map(zu);Vu.warn.apply(Vu,Object(ji.g)(["Firestore (8.1.1): "+t],r))}}function zu(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function Wu(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.1) INTERNAL ASSERTION FAILED: "+t;throw Bu(e),new Error(e)}function Ku(t,e){t||Wu()}function Gu(t,e){return t}var Qu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xu=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(ji.c)(e,t),e}(Error),Yu=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},Ju=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(Fu.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),Zu=function(){function t(t){var e=this;this.P=null,this.currentUser=Fu.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then((function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.V!==e?(qu("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ku("string"==typeof n.accessToken),new Yu(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return Ku(null===t||"string"==typeof t),new Fu(t)},t}(),$u=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=Fu._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),tc=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new $u(this.v,this.S))},t.prototype.A=function(t){t(Fu._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();function ec(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var nc=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ec(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function rc(t,e){return t<e?-1:t>e?1:0}function ic(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function oc(t){return t+"\0"}var sc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Xu(Qu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Xu(Qu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Xu(Qu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xu(Qu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?rc(this.nanoseconds,t.nanoseconds):rc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ac=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new sc(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),uc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Wu(),void 0===n?n=t.length-e:n>t.length-e&&Wu(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return this.L(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.prototype.J=function(){return this.H().join("/")},e.prototype.toString=function(){return this.J()},e.Y=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.X=function(){return new e([])},e}(uc),lc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,hc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.Z=function(t){return lc.test(t)},e.prototype.J=function(){return this.H().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.Z(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.J()},e.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},e.et=function(){return new e(["__name__"])},e.nt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Xu(Qu.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Xu(Qu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Xu(Qu.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.X=function(){return new e([])},e}(uc),fc=function(){function t(t){this.path=t}return t.st=function(e){return new t(cc.Y(e))},t.it=function(e){return new t(cc.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===cc.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return cc.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new cc(e.slice()))},t}();function pc(t){return null==t}function dc(t){return 0===t&&1/t==-1/0}function gc(t){return"number"==typeof t&&Number.isInteger(t)&&!dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var vc=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function yc(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new vc(t,e,n,r,i,o,s)}function mc(t){var e=Gu(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.J()+t.op.toString()+fl(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.J()+t.dir}(t)})).join(","),pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=pf(e.startAt)),e.endAt&&(n+="|ub:",n+=pf(e.endAt)),e.ut=n}return e.ut}function bc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!mf(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!ul(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gf(t.startAt,e.startAt)&&gf(t.endAt,e.endAt)}function _c(t){return fc.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var wc=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.at)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return rc(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();wc.lt=new wc("");var Cc,Ec,Oc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ac.min()),void 0===o&&(o=ac.min()),void 0===s&&(s=wc.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),Ic=function(t){this.count=t};function Tc(t){switch(t){case Qu.OK:return Wu();case Qu.CANCELLED:case Qu.UNKNOWN:case Qu.DEADLINE_EXCEEDED:case Qu.RESOURCE_EXHAUSTED:case Qu.INTERNAL:case Qu.UNAVAILABLE:case Qu.UNAUTHENTICATED:return!1;case Qu.INVALID_ARGUMENT:case Qu.NOT_FOUND:case Qu.ALREADY_EXISTS:case Qu.PERMISSION_DENIED:case Qu.FAILED_PRECONDITION:case Qu.ABORTED:case Qu.OUT_OF_RANGE:case Qu.UNIMPLEMENTED:case Qu.DATA_LOSS:return!0;default:return Wu()}}function Sc(t){if(void 0===t)return Bu("GRPC error has no .code"),Qu.UNKNOWN;switch(t){case Cc.OK:return Qu.OK;case Cc.CANCELLED:return Qu.CANCELLED;case Cc.UNKNOWN:return Qu.UNKNOWN;case Cc.DEADLINE_EXCEEDED:return Qu.DEADLINE_EXCEEDED;case Cc.RESOURCE_EXHAUSTED:return Qu.RESOURCE_EXHAUSTED;case Cc.INTERNAL:return Qu.INTERNAL;case Cc.UNAVAILABLE:return Qu.UNAVAILABLE;case Cc.UNAUTHENTICATED:return Qu.UNAUTHENTICATED;case Cc.INVALID_ARGUMENT:return Qu.INVALID_ARGUMENT;case Cc.NOT_FOUND:return Qu.NOT_FOUND;case Cc.ALREADY_EXISTS:return Qu.ALREADY_EXISTS;case Cc.PERMISSION_DENIED:return Qu.PERMISSION_DENIED;case Cc.FAILED_PRECONDITION:return Qu.FAILED_PRECONDITION;case Cc.ABORTED:return Qu.ABORTED;case Cc.OUT_OF_RANGE:return Qu.OUT_OF_RANGE;case Cc.UNIMPLEMENTED:return Qu.UNIMPLEMENTED;case Cc.DATA_LOSS:return Qu.DATA_LOSS;default:return Wu()}}(Ec=Cc||(Cc={}))[Ec.OK=0]="OK",Ec[Ec.CANCELLED=1]="CANCELLED",Ec[Ec.UNKNOWN=2]="UNKNOWN",Ec[Ec.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ec[Ec.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ec[Ec.NOT_FOUND=5]="NOT_FOUND",Ec[Ec.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ec[Ec.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ec[Ec.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ec[Ec.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ec[Ec.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ec[Ec.ABORTED=10]="ABORTED",Ec[Ec.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ec[Ec.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ec[Ec.INTERNAL=13]="INTERNAL",Ec[Ec.UNAVAILABLE=14]="UNAVAILABLE",Ec[Ec.DATA_LOSS=15]="DATA_LOSS";var Ac=function(){function t(t,e){this.$=t,this.root=e||xc.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,xc.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,xc.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Pt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new kc(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new kc(this.root,t,this.$,!1)},t.prototype.vt=function(){return new kc(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new kc(this.root,t,this.$,!0)},t}(),kc=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),xc=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw Wu();if(this.right.Mt())throw Wu();var t=this.left.Qt();if(t!==this.right.Qt())throw Wu();return t+(this.Mt()?0:1)},t}();xc.EMPTY=null,xc.RED=!0,xc.It=!1,xc.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Wu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Wu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Wu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Wu()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Wu()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new xc(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());var Nc=function(){function t(t){this.$=t,this.data=new Ac(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt((function(e,n){return t(e),!1}))},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new jc(this.data.yt())},t.prototype.Vt=function(t){return new jc(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),jc=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),Rc=new Ac(fc.$);function Pc(){return Rc}function Dc(){return Pc()}var Mc=new Ac(fc.$);function Lc(){return Mc}var Fc=new Ac(fc.$),Vc=new Nc(fc.$);function Uc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Vc,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var qc=new Nc(rc);function Bc(){return qc}var Hc=function(){function t(t){this.$=t?function(e,n){return t(e,n)||fc.$(e.key,n.key)}:function(t,e){return fc.$(t.key,e.key)},this.Ht=Lc(),this.Jt=new Ac(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),zc=function(){function t(){this.Xt=new Ac(fc.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):Wu():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt((function(e,n){t.push(n)})),t},t}(),Wc=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=a}return t.ie=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Hc.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&Jh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Kc=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,Gc.he(e,n)),new t(ac.min(),r,Bc(),Pc(),Uc())},t}(),Gc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t(wc.lt,n,Uc(),Uc(),Uc())},t}(),Qc=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},Xc=function(t,e){this.targetId=t,this.Te=e},Yc=function(t,e,n,r){void 0===n&&(n=wc.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Jc=function(){function t(){this.Ie=0,this.me=tl(),this.Ae=wc.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=Uc(),e=Uc(),n=Uc();return this.me.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Wu()}})),new Gc(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=tl()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),Zc=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=Pc(),this.Me=$c(),this.ke=new Nc(rc)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof Lh?this.Le(r,t.Ee):t.Ee instanceof Fh&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Be(o[i],t.key,t.Ee)},t.prototype.qe=function(t){var e=this;this.Ue(t,(function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:Wu()}}))},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach((function(t,r){n.Ke(r)&&e(r)}))},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(_c(i))if(0===n){var o=new fc(i.path);this.Be(e,o,new Fh(o,ac.min()))}else Ku(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach((function(r,i){var o=e.Ge(i);if(o){if(r.le&&_c(o.target)){var s=new fc(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new Fh(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}}));var r=Uc();this.Me.forEach((function(t,n){var i=!0;n.Wt((function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Kc(t,n,this.ke,this.Oe,r);return this.Oe=Pc(),this.Me=$c(),this.ke=new Nc(rc),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new Jc,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new Nc(rc),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||qu("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new Jc),this.xe.Xe(t).forEach((function(n){e.Be(t,n,null)}))},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();function $c(){return new Ac(fc.$)}function tl(){return new Ac(fc.$)}function el(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function il(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ol(t){var e=pl(t.mapValue.fields.__local_write_time__.timestampValue);return new sc(e.seconds,e.nanos)}var sl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function al(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?il(t)?4:10:Wu()}function ul(t,e){var n=al(t);if(n!==al(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ol(t).isEqual(ol(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=pl(t.timestampValue),r=pl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return gl(t.bytesValue).isEqual(gl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return dl(t.geoPointValue.latitude)===dl(e.geoPointValue.latitude)&&dl(t.geoPointValue.longitude)===dl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return dl(t.integerValue)===dl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=dl(t.doubleValue),r=dl(e.doubleValue);return n===r?dc(n)===dc(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ic(t.arrayValue.values||[],e.arrayValue.values||[],ul);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(el(n)!==el(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ul(n[i],r[i])))return!1;return!0}(t,e);default:return Wu()}}function cl(t,e){return void 0!==(t.values||[]).find((function(t){return ul(t,e)}))}function ll(t,e){var n=al(t),r=al(e);if(n!==r)return rc(n,r);switch(n){case 0:return 0;case 1:return rc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=dl(t.integerValue||t.doubleValue),r=dl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return hl(t.timestampValue,e.timestampValue);case 4:return hl(ol(t),ol(e));case 5:return rc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=gl(t),r=gl(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=rc(n[i],r[i]);if(0!==o)return o}return rc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=rc(dl(t.latitude),dl(e.latitude));return 0!==n?n:rc(dl(t.longitude),dl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ll(n[i],r[i]);if(o)return o}return rc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=rc(r[s],o[s]);if(0!==a)return a;var u=ll(n[r[s]],i[o[s]]);if(0!==u)return u}return rc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Wu()}}function hl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rc(t,e);var n=pl(t),r=pl(e),i=rc(n.seconds,r.seconds);return 0!==i?i:rc(n.nanos,r.nanos)}function fl(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=pl(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?gl(e.bytesValue).toBase64():"referenceValue"in e?fc.it(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):Wu();var n}(t)}function pl(t){if(Ku(!!t),"string"==typeof t){var e=0,n=sl.exec(t);if(Ku(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dl(t.seconds),nanos:dl(t.nanos)}}function dl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function gl(t){return"string"==typeof t?wc.fromBase64String(t):wc.fromUint8Array(t)}function vl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function yl(t){return!!t&&"integerValue"in t}function ml(t){return!!t&&"arrayValue"in t}function bl(t){return!!t&&"nullValue"in t}function _l(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wl(t){return!!t&&"mapValue"in t}var Cl={asc:"ASCENDING",desc:"DESCENDING"},El={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ol=function(t,e){this.t=t,this.tn=e};function Il(t){return{integerValue:""+t}}function Tl(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dc(e)?"-0":e}}function Sl(t,e){return gc(e)?Il(e):Tl(t,e)}function Al(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function kl(t,e){return t.tn?e.toBase64():e.toUint8Array()}function xl(t,e){return Al(t,e.M())}function Nl(t){return Ku(!!t),ac.N(function(t){var e=pl(t);return new sc(e.seconds,e.nanos)}(t))}function jl(t,e){return function(t){return new cc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function Rl(t){var e=cc.Y(t);return Ku(eh(e)),e}function Pl(t,e){return jl(t.t,e.path)}function Dl(t,e){var n=Rl(e);if(n.get(1)!==t.t.projectId)throw new Xu(Qu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Xu(Qu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new fc(Vl(n))}function Ml(t,e){return jl(t.t,e)}function Ll(t){var e=Rl(t);return 4===e.length?cc.X():Vl(e)}function Fl(t){return new cc(["projects",t.t.projectId,"databases",t.t.database]).J()}function Vl(t){return Ku(t.length>4&&"documents"===t.get(4)),t.B(5)}function Ul(t,e,n){return{name:Pl(t,e),fields:n.proto.mapValue.fields}}function ql(t,e){var n;if(e instanceof Ih)n={update:Ul(t,e.key,e.value)};else if(e instanceof Nh)n={delete:Pl(t,e.key)};else if(e instanceof Th)n={update:Ul(t,e.key,e.data),updateMask:th(e.en)};else if(e instanceof Ah)n={transform:{document:Pl(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof sh)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof ah)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof ch)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof hh)return{fieldPath:e.field.J(),increment:n.nn};throw Wu()}(0,t)}))}};else{if(!(e instanceof jh))return Wu();n={verify:Pl(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:xl(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Wu()}(t,e.rn)),n}function Bl(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?yh.updateTime(Nl(t.updateTime)):void 0!==t.exists?yh.exists(t.exists):yh.on()}(e.currentDocument):yh.on();if(e.update){var r=Dl(t,e.update.name),i=new Rh({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new dh((t.fieldPaths||[]).map((function(t){return hc.nt(t)})))}(e.updateMask);return new Th(r,i,o,n)}return new Ih(r,i,n)}if(e.delete){var s=Dl(t,e.delete);return new Nh(s,n)}if(e.transform){var a=Dl(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(Ku("REQUEST_TIME"===e.setToServerValue),n=new sh):"appendMissingElements"in e?n=new ah(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new ch(e.removeAllFromArray.values||[]):"increment"in e?n=new hh(t,e.increment):Wu();var r=hc.nt(e.fieldPath);return new gh(r,n)}(t,e)}));return Ku(!0===n.exists),new Ah(a,u)}if(e.verify){var c=Dl(t,e.verify);return new jh(c,n)}return Wu()}function Hl(t,e){return{documents:[Ml(t,e.path)]}}function zl(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ml(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ml(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(_l(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NAN"}};if(bl(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(_l(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NAN"}};if(bl(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(t.field),op:Xl(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Yl(t.field),direction:Ql(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||pc(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Kl(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Kl(e.endAt)),n}function Wl(t){var e=Ll(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ku(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[$l(e)]:void 0!==e.fieldFilter?[Zl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Wu():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new vf(Jl(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return pc(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Gl(n.startAt));var l=null;return n.endAt&&(l=Gl(n.endAt)),qh(e,i,a,s,u,"F",c,l)}function Kl(t){return{before:t.before,values:t.position}}function Gl(t){return new ff(t.values||[],!!t.before)}function Ql(t){return Cl[t]}function Xl(t){return El[t]}function Yl(t){return{fieldPath:t.J()}}function Jl(t){return hc.nt(t.fieldPath)}function Zl(t){return nf.create(Jl(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Wu()}}(t.fieldFilter.op),t.fieldFilter.value)}function $l(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Jl(t.unaryFilter.field);return nf.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Jl(t.unaryFilter.field);return nf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Jl(t.unaryFilter.field);return nf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Jl(t.unaryFilter.field);return nf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Wu()}}function th(t){var e=[];return t.fields.forEach((function(t){return e.push(t.J())})),{fieldPaths:e}}function eh(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var nh=function(){this.cn=void 0};function rh(t,e,n){return t instanceof sh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof ah?uh(t,e):t instanceof ch?lh(t,e):function(t,e){var n=oh(t,e),r=fh(n)+fh(t.nn);return yl(n)&&yl(t.nn)?Il(r):Tl(t.serializer,r)}(t,e)}function ih(t,e,n){return t instanceof ah?uh(t,e):t instanceof ch?lh(t,e):n}function oh(t,e){return t instanceof hh?yl(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var sh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e}(nh),ah=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ji.c)(e,t),e}(nh);function uh(t,e){for(var n=ph(e),r=function(t){n.some((function(e){return ul(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ch=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ji.c)(e,t),e}(nh);function lh(t,e){for(var n=ph(e),r=function(t){n=n.filter((function(e){return!ul(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var hh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(ji.c)(e,t),e}(nh);function fh(t){return dl(t.integerValue||t.doubleValue)}function ph(t){return ml(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var dh=function(){function t(t){this.fields=t,t.sort(hc.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return ic(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),gh=function(t,e){this.field=t,this.transform=e},vh=function(t,e){this.version=t,this.transformResults=e},yh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function mh(t,e){return void 0!==t.updateTime?e instanceof Lh&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Lh}var bh=function(){};function _h(t,e,n){return t instanceof Ih?function(t,e,n){return new Lh(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Th?function(t,e,n){if(!mh(t.rn,e))return new Vh(t.key,n.version);var r=Sh(t,e);return new Lh(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ah?function(t,e,n){if(Ku(null!=n.transformResults),!mh(t.rn,e))return new Vh(t.key,n.version);var r=kh(0,e),i=function(t,e,n){var r=[];Ku(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Lh&&(a=e.field(o.field)),r.push(ih(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=xh(t,r.data(),i);return new Lh(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Fh(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function wh(t,e,n,r){return t instanceof Ih?function(t,e){if(!mh(t.rn,e))return e;var n=Oh(e);return new Lh(t.key,n,t.value,{an:!0})}(t,e):t instanceof Th?function(t,e){if(!mh(t.rn,e))return e;var n=Oh(e),r=Sh(t,e);return new Lh(t.key,n,r,{an:!0})}(t,e):t instanceof Ah?function(t,e,n,r){if(!mh(t.rn,e))return e;var i=kh(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Lh&&(c=n.field(a.field)),null===c&&r instanceof Lh&&(c=r.field(a.field)),i.push(rh(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=xh(t,i.data(),o);return new Lh(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return mh(t.rn,e)?new Fh(t.key,ac.min()):e}(t,e)}function Ch(t,e){return t instanceof Ah?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof Lh?e.field(o.field):void 0,a=oh(o.transform,s||null);null!=a&&(n=null==n?(new Ph).set(o.field,a):n.set(o.field,a))}return n?n.hn():null}(t,e):null}function Eh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||ic(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof ah&&e instanceof ah||t instanceof ch&&e instanceof ch?ic(t.elements,e.elements,ul):t instanceof hh&&e instanceof hh?ul(t.nn,e.nn):t instanceof sh&&e instanceof sh}(t.transform,e.transform)}(t,e)})))}function Oh(t){return t instanceof Lh?t.version:ac.min()}var Ih=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(ji.c)(e,t),e}(bh),Th=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(ji.c)(e,t),e}(bh);function Sh(t,e){return function(t,e){var n=new Ph(e);return t.en.fields.forEach((function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.hn()}(t,e instanceof Lh?e.data():Rh.empty())}var Ah=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=yh.exists(!0),r}return Object(ji.c)(e,t),e}(bh);function kh(t,e){return e}function xh(t,e,n){for(var r=new Ph(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.hn()}var Nh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(ji.c)(e,t),e}(bh),jh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(ji.c)(e,t),e}(bh),Rh=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!wl(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return ul(this.proto,t.proto)},t}(),Ph=function(){function t(t){void 0===t&&(t=Rh.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===al(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn(hc.X(),this._n);return null!=t?new Rh(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=wl(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Dh(t){var e=[];return nl(t.fields||{},(function(t,n){var r=new hc([t]);if(wl(n)){var i=Dh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new dh(e)}var Mh=function(t,e){this.key=t,this.version=e},Lh=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(ji.c)(e,t),e.prototype.field=function(t){return this.wn.field(t)},e.prototype.data=function(){return this.wn},e.prototype.En=function(){return this.wn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Mh),Fh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(ji.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Mh),Vh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Mh),Uh=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.In=null,this.mn=null};function qh(t,e,n,r,i,o,s,a){return new Uh(t,e,n,r,i,o,s,a)}function Bh(t){return new Uh(t)}function Hh(t){return!pc(t.limit)&&"F"===t.limitType}function zh(t){return!pc(t.limit)&&"L"===t.limitType}function Wh(t){return t.Tn.length>0?t.Tn[0].field:null}function Kh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function Gh(t){return null!==t.collectionGroup}function Qh(t){var e=Gu(t);if(null===e.In){e.In=[];var n=Kh(e),r=Wh(e);if(null!==n&&null===r)n.tt()||e.In.push(new vf(n)),e.In.push(new vf(hc.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var a=s[o];e.In.push(a),a.field.tt()&&(i=!0)}if(!i){var u=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new vf(hc.et(),u))}}}return e.In}function Xh(t){var e=Gu(t);if(!e.mn)if("F"===e.limitType)e.mn=yc(e.path,e.collectionGroup,Qh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Qh(e);r<i.length;r++){var o=i[r];n.push(new vf(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ff(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ff(e.startAt.position,!e.startAt.before):null;e.mn=yc(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.mn}function Yh(t,e,n){return new Uh(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jh(t,e){return bc(Xh(t),Xh(e))&&t.limitType===e.limitType}function Zh(t){return mc(Xh(t))+"|lt:"+t.limitType}function $h(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.J()+" "+e.op+" "+fl(e.value);var e})).join(", ")+"]"),pc(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+pf(t.startAt)),t.endAt&&(e+=", endAt: "+pf(t.endAt)),"Target("+e+")"}(Xh(t))+"; limitType="+t.limitType+")"}function tf(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):fc.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!df(t.startAt,Qh(t),e)||t.endAt&&df(t.endAt,Qh(t),e))}(t,e)}function ef(t){return function(e,n){for(var r=!1,i=0,o=Qh(t);i<o.length;i++){var s=o[i],a=yf(s,e,n);if(0!==a)return a;r=r||s.field.tt()}return 0}}var nf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(ji.c)(e,t),e.create=function(t,n,r){return t.tt()?"in"===n||"not-in"===n?this.Rn(t,n,r):new rf(t,n,r):"array-contains"===n?new uf(t,r):"in"===n?new cf(t,r):"not-in"===n?new lf(t,r):"array-contains-any"===n?new hf(t,r):new e(t,n,r)},e.Rn=function(t,e,n){return"in"===e?new of(t,n):new sf(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn(ll(e,this.value)):null!==e&&al(this.value)===al(e)&&this.Pn(ll(e,this.value))},e.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Wu()}},e.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),rf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=fc.it(r.referenceValue),i}return Object(ji.c)(e,t),e.prototype.matches=function(t){var e=fc.$(t.key,this.key);return this.Pn(e)},e}(nf),of=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=af(0,n),r}return Object(ji.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(nf),sf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=af(0,n),r}return Object(ji.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(nf);function af(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return fc.it(t.referenceValue)}))}var uf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ji.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ml(e)&&cl(e.arrayValue,this.value)},e}(nf),cf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ji.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&cl(this.value.arrayValue,e)},e}(nf),lf=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ji.c)(e,t),e.prototype.matches=function(t){if(cl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!cl(this.value.arrayValue,e)},e}(nf),hf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ji.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ml(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return cl(e.value.arrayValue,t)}))},e}(nf),ff=function(t,e){this.position=t,this.before=e};function pf(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return fl(t)})).join(",")}function df(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?fc.$(fc.it(s.referenceValue),n.key):ll(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function gf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ul(t.position[n],e.position[n]))return!1;return!0}var vf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function yf(t,e,n){var r=t.field.tt()?fc.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ll(r,i):Wu()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Wu()}}function mf(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var bf=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=_h(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=wh(i,e,e,this.gn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=wh(u,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Uc())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ic(this.mutations,t.mutations,(function(t,e){return Eh(t,e)}))&&ic(this.baseMutations,t.baseMutations,(function(t,e){return Eh(t,e)}))},t}(),_f=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){Ku(e.mutations.length===r.length);for(var i=Fc,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),wf=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.Cn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){nl(this.Nn,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.W=function(){return rl(this.Nn)},t}(),Cf=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t((function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)}),(function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&Wu(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t((function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}}))},t.prototype.Ln=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn((function(){return e(n)})):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.qn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.qn(r)},t}(),Ef=function(){function t(){this.Qn=new wf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:ac.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?Cf.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),Of=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};function If(t){return new Ol(t,!0)}function Tf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Sf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Af=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach((function(t){return t()}))},t}(),kf=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t}))},t.prototype.ls=function(t,e,n){var r=Dc();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)})),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next((function(e){return n.fs(t,e)}))},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next((function(r){var i=n.ls(t,e,r),o=Pc();return i.forEach((function(t,e){e||(e=new Fh(t,ac.min())),o=o.Tt(t,e)})),o}))},t.prototype.ws=function(t,e,n){return function(t){return fc.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):Gh(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new fc(e)).next((function(t){var e=Lc();return t instanceof Lh&&(e=e.Tt(t.key,t)),e}))},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=Lc();return this.os.As(t,i).next((function(s){return Cf.forEach(s,(function(s){var a=function(t,e){return new Uh(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,a,n).next((function(t){t.forEach((function(t,e){o=o.Tt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next((function(n){return r=n,o.rs.Rs(t,e)})).next((function(e){return o.Ps(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c),h=wh(u,l,l,o.gn);r=h instanceof Lh?r.Tt(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){tf(e,n)||(r=r.remove(t))})),r}))},t.prototype.Ps=function(t,e,n){for(var r=Uc(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Th&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ss.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Lh&&(c=c.Tt(t,e))})),c}))},t}(),xf=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=Uc(),i=Uc(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Nf=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();Nf.Ds=-1;var jf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&qu("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,(function(){return e.$s=Date.now(),t()})),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),Rf=function(){function t(e,n,r){this.name=e,this.version=n,this.Ws=r,12.2===t.js(Object(Pi.p)())&&Bu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return qu("SimpleDb","Removing database:",t),Vf(window.indexedDB.deleteDatabase(t)).Ln()},t.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(t.zs())return!0;var e=Object(Pi.p)(),n=t.js(e),r=0<n&&n<10,i=t.Hs(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.zs=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Js)},t.Ys=function(t,e){return t.store(e)},t.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Xs=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(qu("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Df(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Xu(Qu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Df(t,n))},i.onupgradeneeded=function(t){qu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Ws.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){qu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return n.Zs(t)}),this.db)]}}))}))},t.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(ji.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(ji.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Xs(t)];case 2:return a.db=h.sent(),e=Lf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Cf.reject(t)})).Ln(),u={},s.catch((function(){})),[4,e.ei];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return qu("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Pf=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return Vf(this.ni.delete())},t}(),Df=function(t){function e(e,n){var r=this;return(r=t.call(this,Qu.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(ji.c)(e,t),e}(Xu);function Mf(t){return"IndexedDbTransactionError"===t.name}var Lf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new Of,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new Df(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=qf(e.target.error);n.ci.reject(new Df(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Df(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(qu("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ff(e)},t}(),Ff=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(qu("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(qu("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Vf(n)},t.prototype.add=function(t){return qu("SimpleDb","ADD",this.store.name,t,t),Vf(this.store.add(t))},t.prototype.get=function(t){var e=this;return Vf(this.store.get(t)).next((function(n){return void 0===n&&(n=null),qu("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return qu("SimpleDb","DELETE",this.store.name,t),Vf(this.store.delete(t))},t.prototype.count=function(){return qu("SimpleDb","COUNT",this.store.name),Vf(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.hi=function(t,e){qu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,(function(t,e,n){return n.delete()}))},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new Cf((function(n,r){e.onerror=function(t){var e=qf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.ai=function(t,e){var n=[];return new Cf((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Pf(i),s=e(i.primaryKey,i.value,o);if(s instanceof Cf){var a=s.catch((function(t){return o.done(),Cf.reject(t)}));n.push(a)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}})).next((function(){return Cf.qn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Vf(t){return new Cf((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=qf(t.target.error);n(e)}}))}var Uf=!1;function qf(t){var e=Rf.js(Object(Pi.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Xu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Uf||(Uf=!0,setTimeout((function(){throw r}),0)),r}}return t}function Bf(){return"undefined"!=typeof window?window:null}function Hf(){return"undefined"!=typeof document?document:null}var zf=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new Of,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch((function(t){}))}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout((function(){return e.Ai()}),t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new Xu(Qu.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri((function(){return null!==t.mi?(t.clearTimeout(),t.op().then((function(e){return t.Ti.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),Wf=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new jf(this,"async_queue_retry"),this.Di=function(){var e=Hf();e&&qu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=Hf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=Hf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise((function(t){})):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri((function(){return e.gi.push(t),e.ki()}))},t.prototype.ki=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ji.d)(this,(function(n){switch(n.label){case 0:if(0===this.gi.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return n.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!Mf(t=n.sent()))throw t;return qu("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs((function(){return e.ki()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Fi=function(t){var e=this,n=this.Pi.then((function(){return e.vi=!0,t().catch((function(t){throw e.pi=t,e.vi=!1,Bu("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.vi=!1,t}))}));return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=zf.Ii(this,t,e,n,(function(t){return r.$i(t)}));return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&Wu()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then((function(){e.Vi.sort((function(t,e){return t.wi-e.wi}));for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()}))},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function Kf(t,e){if(Bu("AsyncQueue",e+": "+t),Mf(t))return new Xu(Qu.UNAVAILABLE,e+": "+t);throw t}function Gf(t,e){var n=t[1],r=e[1],i=rc(t[0],e[0]);return 0===i?rc(n,r):i}var Qf=function(){function t(t){this.Ki=t,this.buffer=new Nc(Gf),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Gf(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Xf={zi:!1,Hi:0,Ji:0,Yi:0},Yf=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();Yf.nr=10,Yf.sr=1e3,Yf.ir=new Yf(41943040,Yf.nr,Yf.sr),Yf.rr=new Yf(-1,0,0);var Jf=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var e=this,n=this.ur?3e5:6e4;qu("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ar=this.di.Us("lru_garbage_collection",n,(function(){return Object(ji.b)(e,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:this.ar=null,this.ur=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return n.sent(),[3,7];case 3:return Mf(e=n.sent())?(qu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Od(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Zf=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Tr=function(t,e){var n=this;if(0===e)return Cf.resolve(Nf.Ds);var r=new Qf(e);return this.dr.Ue(t,(function(t){return r.Gi(t.sequenceNumber)})).next((function(){return n.dr.Ir(t,(function(t){return r.Gi(t)}))})).next((function(){return r.maxValue}))},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(qu("LruGarbageCollector","Garbage collection skipped; disabled"),Cf.resolve(Xf)):this.Pr(t).next((function(r){return r<n.params.Xi?(qu("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),Xf):n.gr(t,e)}))},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.wr(t,this.params.Zi).next((function(e){return e>c.params.tr?(qu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.tr+" from "+e),r=c.params.tr):r=e,o=Date.now(),c.Tr(t,r)})).next((function(r){return n=r,s=Date.now(),c.mr(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.Ar(t,n)})).next((function(t){return u=Date.now(),Uu()<=Ri.a.DEBUG&&qu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Cf.resolve({zi:!0,Hi:r,Ji:i,Yi:t})}))},t}();function $f(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ep(e)),e=tp(t.get(n),e);return ep(e)}function tp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function ep(t){return t+"\x01\x01"}function np(t){var e=t.length;if(Ku(e>=2),2===e)return Ku("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),cc.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Wu(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Wu()}o=s+2}return new cc(r)}var rp=function(t){this.yr=t};function ip(t,e){if(e.document)return function(t,e,n){var r=Dl(t,e.name),i=Nl(e.updateTime),o=new Rh({mapValue:{fields:e.fields}});return new Lh(r,i,o,{hasCommittedMutations:!!n})}(t.yr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=fc.ct(e.noDocument.path),r=cp(e.noDocument.readTime);return new Fh(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=fc.ct(e.unknownDocument.path),o=cp(e.unknownDocument.version);return new Vh(i,o)}return Wu()}function op(t,e,n){var r=sp(n),i=e.key.path.q().H();if(e instanceof Lh){var o=function(t,e){return{name:Pl(t,e.key),fields:e.En().mapValue.fields,updateTime:Al(t,e.version.M())}}(t.yr,e);return new Mp(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof Fh){var s=e.key.path.H(),a=up(e.version),u=e.hasCommittedMutations;return new Mp(null,new Pp(s,a),null,u,r,i)}if(e instanceof Vh){var c=e.key.path.H(),l=up(e.version);return new Mp(new Dp(c,l),null,null,!0,r,i)}return Wu()}function sp(t){var e=t.M();return[e.seconds,e.nanoseconds]}function ap(t){var e=new sc(t[0],t[1]);return ac.N(e)}function up(t){var e=t.M();return new kp(e.seconds,e.nanoseconds)}function cp(t){var e=new sc(t.seconds,t.nanoseconds);return ac.N(e)}function lp(t,e){var n=(e.baseMutations||[]).map((function(e){return Bl(t.yr,e)})),r=e.mutations.map((function(e){return Bl(t.yr,e)})),i=sc.fromMillis(e.localWriteTimeMs);return new bf(e.batchId,i,n,r)}function hp(t){var e,n,r=cp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?cp(t.lastLimboFreeSnapshotVersion):ac.min();return void 0!==t.query.documents?(Ku(1===(n=t.query).documents.length),e=Xh(Bh(Ll(n.documents[0])))):e=function(t){return Xh(Wl(t))}(t.query),new Oc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,wc.fromBase64String(t.resumeToken))}function fp(t,e){var n,r=up(e.ft),i=up(e.lastLimboFreeSnapshotVersion);n=_c(e.target)?Hl(t.yr,e.target):zl(t.yr,e.target);var o=e.resumeToken.toBase64();return new Fp(e.targetId,mc(e.target),r,o,e.sequenceNumber,i,n)}function pp(t){var e=Wl({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Yh(e,e.limit,"L"):e}var dp=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Vr=r,this.pr={}}return t.vr=function(e,n,r,i){return Ku(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.br=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yp(t)._i({index:jp.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Sr=function(t,e,n,r){var i=this,o=mp(t),s=yp(t);return s.add({}).next((function(a){Ku("number"==typeof a);for(var u=new bf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return ql(t.yr,e)})),i=n.mutations.map((function(e){return ql(t.yr,e)}));return new jp(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,u),l=[],h=new Nc((function(t,e){return rc(t.J(),e.J())})),f=0,p=r;f<p.length;f++){var d=p[f],g=Rp.key(i.userId,d.key.path,a);h=h.add(d.key.path.q()),l.push(s.put(c)),l.push(o.put(g,Rp.PLACEHOLDER))}return h.forEach((function(e){l.push(i.os.Dr(t,e))})),t.es((function(){i.pr[a]=u.keys()})),Cf.qn(l).next((function(){return u}))}))},t.prototype.Cr=function(t,e){var n=this;return yp(t).get(e).next((function(t){return t?(Ku(t.userId===n.userId),lp(n.serializer,t)):null}))},t.prototype.Nr=function(t,e){var n=this;return this.pr[e]?Cf.resolve(this.pr[e]):this.Cr(t,e).next((function(t){if(t){var r=t.keys();return n.pr[e]=r,r}return null}))},t.prototype.Fr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return yp(t)._i({index:jp.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Ku(e.batchId>=r),o=lp(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.Or=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return yp(t)._i({index:jp.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Mr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yp(t).ui(jp.userMutationsIndex,n).next((function(t){return t.map((function(t){return lp(e.serializer,t)}))}))},t.prototype.us=function(t,e){var n=this,r=Rp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return mp(t)._i({range:i},(function(r,i,s){var a=r[0],u=r[2],c=np(r[1]);if(a===n.userId&&e.path.isEqual(c))return yp(t).get(u).next((function(t){if(!t)throw Wu();Ku(t.userId===n.userId),o.push(lp(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.ds=function(t,e){var n=this,r=new Nc(rc),i=[];return e.forEach((function(e){var o=Rp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=mp(t)._i({range:s},(function(t,i,o){var s=t[0],a=t[2],u=np(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Cf.qn(i).next((function(){return n.kr(t,r)}))},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=Rp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Nc(rc);return mp(t)._i({range:s},(function(t,e,o){var s=t[0],u=t[2],c=np(t[1]);s===n.userId&&r.j(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.kr(t,a)}))},t.prototype.kr=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(yp(t).get(e).next((function(t){if(null===t)throw Wu();Ku(t.userId===n.userId),r.push(lp(n.serializer,t))})))})),Cf.qn(i).next((function(){return r}))},t.prototype.$r=function(t,e){var n=this;return vp(t.Lr,this.userId,e).next((function(r){return t.es((function(){n.Br(e.batchId)})),Cf.forEach(r,(function(e){return n.Vr.qr(t,e)}))}))},t.prototype.Br=function(t){delete this.pr[t]},t.prototype.Ur=function(t){var e=this;return this.br(t).next((function(n){if(!n)return Cf.resolve();var r=IDBKeyRange.lowerBound(Rp.prefixForUser(e.userId)),i=[];return mp(t)._i({range:r},(function(t,n,r){if(t[0]===e.userId){var o=np(t[1]);i.push(o)}else r.done()})).next((function(){Ku(0===i.length)}))}))},t.prototype.Qr=function(t,e){return gp(t,this.userId,e)},t.prototype.Kr=function(t){var e=this;return bp(t).get(this.userId).next((function(t){return t||new Np(e.userId,-1,"")}))},t}();function gp(t,e,n){var r=Rp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return mp(t)._i({range:o,li:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function vp(t,e,n){var r=t.store(jp.store),i=t.store(Rp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r._i({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Ku(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Rp.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Cf.qn(o).next((function(){return c}))}function yp(t){return od.Ys(t,jp.store)}function mp(t){return od.Ys(t,Rp.store)}function bp(t){return od.Ys(t,Np.store)}var _p=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return Ep(t).put(Op(e),n)},t.prototype.Hn=function(t,e){var n=Ep(t),r=Op(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Wr(t,r)}))},t.prototype.Jn=function(t,e){var n=this;return Ep(t).get(Op(e)).next((function(t){return n.jr(t)}))},t.prototype.Gr=function(t,e){var n=this;return Ep(t).get(Op(e)).next((function(t){var e=n.jr(t);return e?{zn:e,size:Ip(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Dc();return this.zr(t,e,(function(t,e){var i=n.jr(e);r=r.Tt(t,i)})).next((function(){return r}))},t.prototype.Hr=function(t,e){var n=this,r=Dc(),i=new Ac(fc.$);return this.zr(t,e,(function(t,e){var o=n.jr(e);o?(r=r.Tt(t,o),i=i.Tt(t,Ip(e))):(r=r.Tt(t,null),i=i.Tt(t,0))})).next((function(){return{Jr:r,Yr:i}}))},t.prototype.zr=function(t,e,n){if(e.W())return Cf.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return Ep(t)._i({range:r},(function(t,e,r){for(var s=fc.ct(t);o&&fc.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()})).next((function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null}))},t.prototype.ws=function(t,e,n){var r=this,i=Lc(),o=e.path.length+1,s={};if(n.isEqual(ac.min())){var a=e.path.H();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.H(),c=sp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Mp.collectionReadTimeIndex}return Ep(t)._i(s,(function(t,n,s){if(t.length===o){var a=ip(r.serializer,n);e.path.j(a.key.path)?a instanceof Lh&&tf(e,a)&&(i=i.Tt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Xr=function(t){return new wp(this,!!t&&t.Zr)},t.prototype.eo=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Cp(t).get(Lp.key).next((function(t){return Ku(!!t),t}))},t.prototype.Wr=function(t,e){return Cp(t).put(Lp.key,e)},t.prototype.jr=function(t){if(t){var e=ip(this.serializer,t);return e instanceof Fh&&e.version.isEqual(ac.min())?null:e}return null},t}(),wp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).no=e,r.Zr=n,r.so=new wf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(ji.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[],r=0,i=new Nc((function(t,e){return rc(t.J(),e.J())}));return this.Qn.forEach((function(o,s){var a=e.so.get(o);if(s.zn){var u=op(e.no.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=Ip(u);r+=c-a,n.push(e.no.jn(t,o,u))}else if(r-=a,e.Zr){var l=op(e.no.serializer,new Fh(o,ac.min()),e.Wn(o));n.push(e.no.jn(t,o,l))}else n.push(e.no.Hn(t,o))})),i.forEach((function(r){n.push(e.no.os.Dr(t,r))})),n.push(this.no.updateMetadata(t,r)),Cf.qn(n)},e.prototype.Yn=function(t,e){var n=this;return this.no.Gr(t,e).next((function(t){return null===t?(n.so.set(e,0),null):(n.so.set(e,t.size),t.zn)}))},e.prototype.Xn=function(t,e){var n=this;return this.no.Hr(t,e).next((function(t){var e=t.Jr;return t.Yr.forEach((function(t,e){n.so.set(t,e)})),e}))},e}(Ef);function Cp(t){return od.Ys(t,Lp.store)}function Ep(t){return od.Ys(t,Mp.store)}function Op(t){return t.path.H()}function Ip(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Wu();e=t.noDocument}return JSON.stringify(e).length}var Tp=function(){function t(){this.io=new Sp}return t.prototype.Dr=function(t,e){return this.io.add(e),Cf.resolve()},t.prototype.As=function(t,e){return Cf.resolve(this.io.getEntries(e))},t}(),Sp=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new Nc(cc.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Nc(cc.$)).H()},t}(),Ap=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;Ku(n<r&&n>=0&&r<=11);var o=new Lf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(xp.store)}(t),function(t){t.createObjectStore(Np.store,{keyPath:Np.keyPath}),t.createObjectStore(jp.store,{keyPath:jp.keyPath,autoIncrement:!0}).createIndex(jp.userMutationsIndex,jp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Rp.store)}(t),Bp(t),function(t){t.createObjectStore(Mp.store)}(t));var s=Cf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Vp.store),t.deleteObjectStore(Fp.store),t.deleteObjectStore(Up.store)}(t),Bp(t)),s=s.next((function(){return function(t){var e=t.store(Up.store),n=new Up(0,0,ac.min().M(),0);return e.put(Up.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(jp.store).ui().next((function(n){t.deleteObjectStore(jp.store),t.createObjectStore(jp.store,{keyPath:jp.keyPath,autoIncrement:!0}).createIndex(jp.userMutationsIndex,jp.userMutationsKeyPath,{unique:!0});var r=e.store(jp.store),i=n.map((function(t){return r.put(t)}));return Cf.qn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Hp.store,{keyPath:Hp.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Lp.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Mp.store);e.createIndex(Mp.readTimeIndex,Mp.readTimeIndexPath,{unique:!1}),e.createIndex(Mp.collectionReadTimeIndex,Mp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(zp.store,{keyPath:zp.keyPath})}(t),function(t){t.createObjectStore(Wp.store,{keyPath:Wp.keyPath})}(t)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Mp.store)._i((function(t,n){e+=Ip(n)})).next((function(){var n=new Lp(e);return t.store(Lp.store).put(Lp.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Np.store),r=t.store(jp.store);return n.ui().next((function(n){return Cf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(jp.userMutationsIndex,i).next((function(r){return Cf.forEach(r,(function(r){Ku(r.userId===n.userId);var i=lp(e.serializer,r);return vp(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Vp.store),n=t.store(Mp.store);return t.store(Up.store).get(Up.key).next((function(t){var r=[];return n._i((function(n,i){var o=new cc(n),s=function(t){return[0,$f(t)]}(o);r.push(e.get(s).next((function(n){return n?Cf.resolve():function(n){return e.put(new Vp(0,$f(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Cf.qn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(qp.store,{keyPath:qp.keyPath});var n=e.store(qp.store),r=new Sp,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:$f(i)})}};return e.store(Mp.store)._i({li:!0},(function(t,e){var n=new cc(t);return i(n.q())})).next((function(){return e.store(Rp.store)._i({li:!0},(function(t,e){var n=np(t[1]);return i(n.q())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Fp.store);return n._i((function(t,r){var i=hp(r),o=fp(e.serializer,i);return n.put(o)}))},t}(),kp=function(t,e){this.seconds=t,this.nanoseconds=e},xp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};xp.store="owner",xp.key="owner";var Np=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Np.store="mutationQueues",Np.keyPath="userId";var jp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};jp.store="mutations",jp.keyPath="batchId",jp.userMutationsIndex="userMutationsIndex",jp.userMutationsKeyPath=["userId","batchId"];var Rp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,$f(e)]},t.key=function(t,e,n){return[t,$f(e),n]},t}();Rp.store="documentMutations",Rp.PLACEHOLDER=new Rp;var Pp=function(t,e){this.path=t,this.readTime=e},Dp=function(t,e){this.path=t,this.version=e},Mp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Mp.store="remoteDocuments",Mp.readTimeIndex="readTimeIndex",Mp.readTimeIndexPath="readTime",Mp.collectionReadTimeIndex="collectionReadTimeIndex",Mp.collectionReadTimeIndexPath=["parentPath","readTime"];var Lp=function(t){this.byteSize=t};Lp.store="remoteDocumentGlobal",Lp.key="remoteDocumentGlobalKey";var Fp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Fp.store="targets",Fp.keyPath="targetId",Fp.queryTargetsIndexName="queryTargetsIndex",Fp.queryTargetsKeyPath=["canonicalId","targetId"];var Vp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Vp.store="targetDocuments",Vp.keyPath=["targetId","path"],Vp.documentTargetsIndex="documentTargetsIndex",Vp.documentTargetsKeyPath=["path","targetId"];var Up=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Up.key="targetGlobalKey",Up.store="targetGlobal";var qp=function(t,e){this.collectionId=t,this.parent=e};function Bp(t){t.createObjectStore(Vp.store,{keyPath:Vp.keyPath}).createIndex(Vp.documentTargetsIndex,Vp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Fp.store,{keyPath:Fp.keyPath}).createIndex(Fp.queryTargetsIndexName,Fp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Up.store)}qp.store="collectionParents",qp.keyPath=["collectionId","parent"];var Hp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Hp.store="clientMetadata",Hp.keyPath="clientId";var zp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};zp.store="bundles",zp.keyPath="bundleId";var Wp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Wp.store="namedQueries",Wp.keyPath="name";var Kp=Object(ji.g)(Object(ji.g)(Object(ji.g)(Object(ji.g)([Np.store,jp.store,Rp.store,Mp.store,Fp.store,xp.store,Up.store,Vp.store],[Hp.store]),[Lp.store]),[qp.store]),[zp.store,Wp.store]),Gp=function(){function t(t){this.serializer=t}return t.prototype.ro=function(t,e){return Qp(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:cp(e.createTime),version:e.version};var e}))},t.prototype.oo=function(t,e){return Qp(t).put({bundleId:(n=e).id,createTime:up(Nl(n.createTime)),version:n.version});var n},t.prototype.co=function(t,e){return Xp(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:pp(e.bundledQuery),readTime:cp(e.readTime)};var e}))},t.prototype.uo=function(t,e){return Xp(t).put(function(t){return{name:t.name,readTime:up(Nl(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Qp(t){return od.Ys(t,zp.store)}function Xp(t){return od.Ys(t,Wp.store)}var Yp=function(){function t(){this.ao=new Sp}return t.prototype.Dr=function(t,e){var n=this;if(!this.ao.has(e)){var r=e.K(),i=e.q();t.es((function(){n.ao.add(e)}));var o={collectionId:r,parent:$f(i)};return Jp(t).put(o)}return Cf.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[oc(e),""],!1,!0);return Jp(t).ui(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(np(o.parent))}return n}))},t}();function Jp(t){return od.Ys(t,qp.store)}var Zp=function(){function t(t){this.ho=t}return t.prototype.next=function(){return this.ho+=2,this.ho},t.lo=function(){return new t(0)},t._o=function(){return new t(-1)},t}(),$p=function(){function t(t,e){this.Vr=t,this.serializer=e}return t.prototype.fo=function(t){var e=this;return this.wo(t).next((function(n){var r=new Zp(n.highestTargetId);return n.highestTargetId=r.next(),e.Eo(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.To=function(t){return this.wo(t).next((function(t){return ac.N(new sc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Io=function(t){return this.wo(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.mo=function(t,e,n){var r=this;return this.wo(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Eo(t,i)}))},t.prototype.Ao=function(t,e){var n=this;return this.Ro(t,e).next((function(){return n.wo(t).next((function(r){return r.targetCount+=1,n.Po(e,r),n.Eo(t,r)}))}))},t.prototype.yo=function(t,e){return this.Ro(t,e)},t.prototype.Vo=function(t,e){var n=this;return this.po(t,e.targetId).next((function(){return td(t).delete(e.targetId)})).next((function(){return n.wo(t)})).next((function(e){return Ku(e.targetCount>0),e.targetCount-=1,n.Eo(t,e)}))},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return td(t)._i((function(s,a){var u=hp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Vo(t,u)))})).next((function(){return Cf.qn(o)})).next((function(){return i}))},t.prototype.Ue=function(t,e){return td(t)._i((function(t,n){var r=hp(n);e(r)}))},t.prototype.wo=function(t){return ed(t).get(Up.key).next((function(t){return Ku(null!==t),t}))},t.prototype.Eo=function(t,e){return ed(t).put(Up.key,e)},t.prototype.Ro=function(t,e){return td(t).put(fp(this.serializer,e))},t.prototype.Po=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.vo=function(t){return this.wo(t).next((function(t){return t.targetCount}))},t.prototype.bo=function(t,e){var n=mc(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return td(t)._i({range:r,index:Fp.queryTargetsIndexName},(function(t,n,r){var o=hp(n);bc(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.So=function(t,e,n){var r=this,i=[],o=nd(t);return e.forEach((function(e){var s=$f(e.path);i.push(o.put(new Vp(n,s))),i.push(r.Vr.Do(t,n,e))})),Cf.qn(i)},t.prototype.Co=function(t,e,n){var r=this,i=nd(t);return Cf.forEach(e,(function(e){var o=$f(e.path);return Cf.qn([i.delete([n,o]),r.Vr.No(t,n,e)])}))},t.prototype.po=function(t,e){var n=nd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=nd(t),i=Uc();return r._i({range:n,li:!0},(function(t,e,n){var r=np(t[1]),o=new fc(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Qr=function(t,e){var n=$f(e.path),r=IDBKeyRange.bound([n],[oc(n)],!1,!0),i=0;return nd(t)._i({index:Vp.documentTargetsIndex,li:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ze=function(t,e){return td(t).get(e).next((function(t){return t?hp(t):null}))},t}();function td(t){return od.Ys(t,Fp.store)}function ed(t){return od.Ys(t,Up.store)}function nd(t){return od.Ys(t,Vp.store)}var rd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",id=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Lr=e,r.Fo=n,r}return Object(ji.c)(e,t),e}(Af),od=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=a,this.Oo=c,this.Mo=l,this.ko=null,this.$o=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Lo=null,this.inForeground=!1,this.Bo=null,this.qo=null,this.Uo=Number.NEGATIVE_INFINITY,this.Qo=function(t){return Promise.resolve()},!t.Gs())throw new Xu(Qu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Vr=new ud(this,i),this.Ko=n+"main",this.serializer=new rp(u),this.Wo=new Rf(this.Ko,11,new Ap(this.serializer)),this.jo=new $p(this.Vr,this.serializer),this.os=new Yp,this.ss=function(t,e){return new _p(t,e)}(this.serializer,this.os),this.Go=new Gp(this.serializer),this.window&&this.window.localStorage?this.zo=this.window.localStorage:(this.zo=null,!1===l&&Bu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof id)return Rf.Ys(t.Lr,e);throw Wu()},t.prototype.start=function(){var t=this;return this.Ho().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Xu(Qu.FAILED_PRECONDITION,rd);return t.Jo(),t.Yo(),t.Xo(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.jo.Io(e)}))})).then((function(e){t.ko=new Nf(e,t.Oo)})).then((function(){t.$o=!0})).catch((function(e){return t.Wo&&t.Wo.close(),Promise.reject(e)}))},t.prototype.Zo=function(t){var e=this;return this.Qo=function(n){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){return this.lr?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.tc=function(t){var e=this;this.Wo.ti((function(n){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.ec=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri((function(){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:return this.lr?[4,this.Ho()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Ho=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ad(e).put(new Hp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.nc(e).next((function(e){e||(t.isPrimary=!1,t.Cs.Mi((function(){return t.Qo(!1)})))}))})).next((function(){return t.sc(e)})).next((function(n){return t.isPrimary&&!n?t.ic(e).next((function(){return!1})):!!n&&t.rc(e).next((function(){return!0}))}))})).catch((function(e){if(Mf(e))return qu("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return qu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Cs.Mi((function(){return t.Qo(e)})),t.isPrimary=e}))},t.prototype.nc=function(t){var e=this;return sd(t).get(xp.key).next((function(t){return Cf.resolve(e.oc(t))}))},t.prototype.cc=function(t){return ad(t).delete(this.clientId)},t.prototype.uc=function(){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r,i=this;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.ac(this.Uo,18e5)?[3,2]:(this.Uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Ys(e,Hp.store);return n.ui().next((function(t){var e=i.hc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return Cf.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.zo)for(n=0,r=e;n<r.length;n++)this.zo.removeItem(this.lc(r[n].clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Xo=function(){var t=this;this.qo=this.Cs.Us("client_metadata_refresh",4e3,(function(){return t.Ho().then((function(){return t.uc()})).then((function(){return t.Xo()}))}))},t.prototype.oc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sc=function(t){var e=this;return this.Mo?Cf.resolve(!0):sd(t).get(xp.key).next((function(n){if(null!==n&&e.ac(n.leaseTimestampMs,5e3)&&!e._c(n.ownerId)){if(e.oc(n)&&e.networkEnabled)return!0;if(!e.oc(n)){if(!n.allowTabSynchronization)throw new Xu(Qu.FAILED_PRECONDITION,rd);return!1}}return!(!e.networkEnabled||!e.inForeground)||ad(t).ui().next((function(t){return void 0===e.hc(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&qu("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.fc=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t=this;return Object(ji.d)(this,(function(e){switch(e.label){case 0:return this.$o=!1,this.dc(),this.qo&&(this.qo.cancel(),this.qo=null),this.wc(),this.Ec(),[4,this.Wo.runTransaction("shutdown","readwrite",[xp.store,Hp.store],(function(e){var n=new id(e,Nf.Ds);return t.ic(n).next((function(){return t.cc(n)}))}))];case 1:return e.sent(),this.Wo.close(),this.Tc(),[2]}}))}))},t.prototype.hc=function(t,e){var n=this;return t.filter((function(t){return n.ac(t.updateTimeMs,e)&&!n._c(t.clientId)}))},t.prototype.Ic=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ad(e).ui().next((function(e){return t.hc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return dp.vr(t,this.serializer,this.os,this.Vr)},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.Pc=function(){return this.os},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r,i=this;return qu("IndexedDbPersistence","Starting transaction:",t),this.Wo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Kp,(function(o){return r=new id(o,i.ko?i.ko.next():Nf.Ds),"readwrite-primary"===e?i.nc(r).next((function(t){return!!t||i.sc(r)})).next((function(e){if(!e)throw Bu("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Cs.Mi((function(){return i.Qo(!1)})),new Xu(Qu.FAILED_PRECONDITION,Sf);return n(r)})).next((function(t){return i.rc(r).next((function(){return t}))})):i.yc(r).next((function(){return n(r)}))})).then((function(t){return r.ns(),t}))},t.prototype.yc=function(t){var e=this;return sd(t).get(xp.key).next((function(t){if(null!==t&&e.ac(t.leaseTimestampMs,5e3)&&!e._c(t.ownerId)&&!e.oc(t)&&!(e.Mo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Xu(Qu.FAILED_PRECONDITION,rd)}))},t.prototype.rc=function(t){var e=new xp(this.clientId,this.allowTabSynchronization,Date.now());return sd(t).put(xp.key,e)},t.Gs=function(){return Rf.Gs()},t.prototype.ic=function(t){var e=this,n=sd(t);return n.get(xp.key).next((function(t){return e.oc(t)?(qu("IndexedDbPersistence","Releasing primary lease."),n.delete(xp.key)):Cf.resolve()}))},t.prototype.ac=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Bu("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Jo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bo=function(){t.Cs.Ri((function(){return t.inForeground="visible"===t.document.visibilityState,t.Ho()}))},this.document.addEventListener("visibilitychange",this.Bo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.wc=function(){this.Bo&&(this.document.removeEventListener("visibilitychange",this.Bo),this.Bo=null)},t.prototype.Yo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Lo=function(){e.dc(),e.Cs.Ri((function(){return e.fc()}))},this.window.addEventListener("unload",this.Lo))},t.prototype.Ec=function(){this.Lo&&(this.window.removeEventListener("unload",this.Lo),this.Lo=null)},t.prototype._c=function(t){var e;try{var n=null!==(null===(e=this.zo)||void 0===e?void 0:e.getItem(this.lc(t)));return qu("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Bu("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.dc=function(){if(this.zo)try{this.zo.setItem(this.lc(this.clientId),String(Date.now()))}catch(t){Bu("Failed to set zombie client id.",t)}},t.prototype.Tc=function(){if(this.zo)try{this.zo.removeItem(this.lc(this.clientId))}catch(t){}},t.prototype.lc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function sd(t){return od.Ys(t,xp.store)}function ad(t){return od.Ys(t,Hp.store)}var ud=function(){function t(t,e){this.db=t,this.cr=new Zf(this,e)}return t.prototype.Er=function(t){var e=this.Vc(t);return this.db.Ac().vo(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Vc=function(t){var e=0;return this.Ir(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ue=function(t,e){return this.db.Ac().Ue(t,e)},t.prototype.Ir=function(t,e){return this.vc(t,(function(t,n){return e(n)}))},t.prototype.Do=function(t,e,n){return cd(t,n)},t.prototype.No=function(t,e,n){return cd(t,n)},t.prototype.mr=function(t,e,n){return this.db.Ac().mr(t,e,n)},t.prototype.qr=function(t,e){return cd(t,e)},t.prototype.bc=function(t,e){return function(t,e){var n=!1;return bp(t).fi((function(r){return gp(t,r,e).next((function(t){return t&&(n=!0),Cf.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.Rc().Xr(),i=[],o=0;return this.vc(t,(function(s,a){if(a<=e){var u=n.bc(t,s).next((function(e){if(!e)return o++,r.Jn(t,s).next((function(){return r.Hn(s),nd(t).delete([0,$f(s.path)])}))}));i.push(u)}})).next((function(){return Cf.qn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Fo);return this.db.Ac().yo(t,n)},t.prototype.Sc=function(t,e){return cd(t,e)},t.prototype.vc=function(t,e){var n,r=nd(t),i=Nf.Ds;return r._i({index:Vp.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Nf.Ds&&e(new fc(np(n)),i),i=s,n=o):i=Nf.Ds})).next((function(){i!==Nf.Ds&&e(new fc(np(n)),i)}))},t.prototype.Pr=function(t){return this.db.Rc().eo(t)},t}();function cd(t,e){return nd(t).put(function(t,e){return new Vp(0,$f(t.path),e)}(e,t.Fo))}function ld(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var hd=function(){function t(t,e,n,r){this.persistence=t,this.Dc=e,this.serializer=r,this.Cc=new Ac(rc),this.Nc=new wf((function(t){return mc(t)}),bc),this.xc=ac.min(),this.rs=t.mc(n),this.Fc=t.Rc(),this.jo=t.Ac(),this.Oc=new kf(this.Fc,this.rs,this.persistence.Pc()),this.Go=t.gc(),this.Dc.Mc(this.Oc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Rr(n,e.Cc)}))},t}();function fd(t,e,n,r){return new hd(t,e,n,r)}function pd(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return n=Gu(t),r=n.rs,i=n.Oc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.rs.Mr(t).next((function(s){return o=s,r=n.persistence.mc(e),i=new kf(n.Fc,r,n.persistence.Pc()),r.Mr(t)})).next((function(e){for(var n=[],r=[],s=Uc(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,p=e;f<p.length;f++){var d=p[f];r.push(d.batchId);for(var g=0,v=d.mutations;g<v.length;g++)s=s.add(v[g].key)}return i._s(t,s).next((function(t){return{kc:t,$c:n,Lc:r}}))}))}))];case 1:return o=s.sent(),[2,(n.rs=r,n.Oc=i,n.Dc.Mc(n.Oc),o)]}}))}))}function dd(t,e){var n=Gu(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Fc.Xr({Zr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Cf.resolve();return o.forEach((function(t){s=s.next((function(){return r.Jn(e,t)})).next((function(e){var o=e,s=n.Sn.get(t);Ku(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)}))})),s.next((function(){return t.rs.$r(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.rs.Ur(t)})).next((function(){return n.Oc._s(t,r)}))}))}function gd(t){var e=Gu(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.jo.To(t)}))}function vd(t,e){var n=Gu(t),r=e.ft,i=n.Cc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Fc.Xr({Zr:!0});i=n.Cc;var s=[];e.re.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.jo.Co(t,e.de,o).next((function(){return n.jo.So(t,e._e,o)})));var u=e.resumeToken;if(u.ht()>0){var c=a.wt(u,r).dt(t.Fo);i=i.Tt(o,c),function(t,e,n){return Ku(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(a,c,e)&&s.push(n.jo.yo(t,c))}}}));var a=Pc();if(e.ce.forEach((function(r,i){e.ue.has(r)&&s.push(n.persistence.Vr.Sc(t,r))})),s.push(function(t,e,n,r,i){var o=Uc();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var i=Pc();return n.forEach((function(n,o){var s=t.get(n),a=r;o instanceof Fh&&o.version.isEqual(ac.min())?(e.Hn(n,a),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,a),i=i.Tt(n,o)):qu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),i}))}(t,o,e.ce,r).next((function(t){a=t}))),!r.isEqual(ac.min())){var u=n.jo.To(t).next((function(e){return n.jo.mo(t,t.Fo,r)}));s.push(u)}return Cf.qn(s).next((function(){return o.apply(t)})).next((function(){return n.Oc.fs(t,a)}))})).then((function(t){return n.Cc=i,t}))}function yd(t,e){var n=Gu(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.rs.Fr(t,e)}))}function md(t,e){var n=Gu(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.jo.bo(t,e).next((function(i){return i?Cf.resolve(r=i):n.jo.fo(t).next((function(i){return r=new Oc(e,i,0,t.Fo),n.jo.Ao(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Cc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Cc=n.Cc.Tt(t.targetId,t),n.Nc.set(e,t.targetId)),t}))}function bd(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:r=Gu(t),i=r.Cc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Vr.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Mf(s=a.sent()))throw s;return qu("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Cc=r.Cc.remove(e),r.Nc.delete(i.target),[2]}}))}))}function _d(t,e,n){var r=Gu(t),i=ac.min(),o=Uc();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Gu(t),i=r.Nc.get(n);return void 0!==i?Cf.resolve(r.Cc.get(i)):r.jo.bo(e,n)}(r,t,Xh(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.jo.xo(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Dc.ws(t,e,n?i:ac.min(),n?o:Uc())})).next((function(t){return{documents:t,Bc:o}}))}))}function wd(t,e){var n=Gu(t),r=Gu(n.jo),i=n.Cc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ze(t,e).next((function(t){return t?t.target:null}))}))}function Cd(t){var e=Gu(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Gu(t),i=Pc(),o=sp(n),s=Ep(e),a=IDBKeyRange.lowerBound(o,!0);return s._i({index:Mp.readTimeIndex,range:a},(function(t,e){var n=ip(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime})).next((function(){return{qc:i,readTime:ap(o)}}))}(e.Fc,t,e.xc)})).then((function(t){var n=t.qc;return e.xc=t.readTime,n}))}function Ed(t){return Object(ji.b)(this,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){return[2,(e=Gu(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Ep(t),n=ac.min();return e._i({index:Mp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=ap(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.xc=t}))]}))}))}function Od(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){if(t.code!==Qu.FAILED_PRECONDITION||t.message!==Sf)throw t;return qu("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var Id=function(){function t(t,e,n,r,i,o){this.Cs=t,this.Uc=n,this.Qc=r,this.Kc=i,this.listener=o,this.state=0,this.Wc=0,this.jc=null,this.stream=null,this.Si=new jf(t,e)}return t.prototype.Gc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.zc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Hc()},t.prototype.stop=function(){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:return this.Gc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Jc=function(){this.state=0,this.Si.reset()},t.prototype.Yc=function(){var t=this;this.zc()&&null===this.jc&&(this.jc=this.Cs.Us(this.Uc,6e4,(function(){return t.Xc()})))},t.prototype.Zc=function(t){this.tu(),this.stream.send(t)},t.prototype.Xc=function(){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){return this.zc()?[2,this.close(0)]:[2]}))}))},t.prototype.tu=function(){this.jc&&(this.jc.cancel(),this.jc=null)},t.prototype.close=function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(n){switch(n.label){case 0:return this.tu(),this.Si.cancel(),this.Wc++,3!==t?this.Si.reset():e&&e.code===Qu.RESOURCE_EXHAUSTED?(Bu(e.toString()),Bu("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):e&&e.code===Qu.UNAUTHENTICATED&&this.Kc.m(),null!==this.stream&&(this.eu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.nu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.eu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.su(this.Wc),n=this.Wc;this.Kc.getToken().then((function(e){t.Wc===n&&t.iu(e)}),(function(n){e((function(){var e=new Xu(Qu.UNKNOWN,"Fetching auth token failed: "+n.message);return t.ru(e)}))}))},t.prototype.iu=function(t){var e=this,n=this.su(this.Wc);this.stream=this.ou(t),this.stream.cu((function(){n((function(){return e.state=2,e.listener.cu()}))})),this.stream.nu((function(t){n((function(){return e.ru(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Hc=function(){var t=this;this.state=4,this.Si.Bs((function(){return Object(ji.b)(t,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.ru=function(t){return qu("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.su=function(t){var e=this;return function(n){e.Cs.Ri((function(){return e.Wc===t?n():(qu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Td=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(ji.c)(e,t),e.prototype.ou=function(t){return this.Qc.uu("Listen",t)},e.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Wu()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(Ku(void 0===e||"string"==typeof e),wc.fromBase64String(e||"")):(Ku(void 0===e||e instanceof Uint8Array),wc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?Qu.UNKNOWN:Sc(t.code);return new Xu(e,t.message||"")}(s);n=new Yc(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=Dl(t,u.document.name),l=Nl(u.document.updateTime),h=new Rh({mapValue:{fields:u.document.fields}}),f=new Lh(c,l,h,{});n=new Qc(u.targetIds||[],u.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){var p=e.documentDelete,d=Dl(t,p.document),g=p.readTime?Nl(p.readTime):ac.min(),v=new Fh(d,g);n=new Qc([],p.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){var y=e.documentRemove,m=Dl(t,y.document);n=new Qc([],y.removedTargetIds||[],m,null)}else{if(!("filter"in e))return Wu();var b=e.filter,_=new Ic(b.count||0);n=new Xc(b.targetId,_)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ac.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ac.min():e.readTime?Nl(e.readTime):ac.min()}(t);return this.listener.au(e,n)},e.prototype.hu=function(t){var e={};e.database=Fl(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=_c(r)?{documents:Hl(t,r)}:{query:zl(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=kl(t,e.resumeToken):e.ft.F(ac.min())>0&&(n.readTime=Al(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wu()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.Zc(e)},e.prototype.lu=function(t){var e={};e.database=Fl(this.serializer),e.removeTarget=t,this.Zc(e)},e}(Id),Sd=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s._u=!1,s}return Object(ji.c)(e,t),Object.defineProperty(e.prototype,"fu",{get:function(){return this._u},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._u=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.eu=function(){this._u&&this.du([])},e.prototype.ou=function(t){return this.Qc.uu("Write",t)},e.prototype.onMessage=function(t){if(Ku(!!t.streamToken),this.lastStreamToken=t.streamToken,this._u){this.Si.reset();var e=function(t,e){return t&&t.length>0?(Ku(void 0!==e),t.map((function(t){return function(t,e){var n=Nl(t.updateTime?t.updateTime:e);n.isEqual(ac.min())&&(n=Nl(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new vh(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Nl(t.commitTime);return this.listener.wu(n,e)}return Ku(!t.writeResults||0===t.writeResults.length),this._u=!0,this.listener.Eu()},e.prototype.Tu=function(){var t={};t.database=Fl(this.serializer),this.Zc(t)},e.prototype.du=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return ql(e.serializer,t)}))};this.Zc(n)},e}(Id),Ad=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qc=n,i.serializer=r,i.Iu=!1,i}return Object(ji.c)(e,t),e.prototype.mu=function(){if(this.Iu)throw new Xu(Qu.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Au=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then((function(i){return r.Qc.Au(t,e,n,i)})).catch((function(t){throw t.code===Qu.UNAUTHENTICATED&&r.credentials.m(),t}))},e.prototype.Ru=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then((function(i){return r.Qc.Ru(t,e,n,i)})).catch((function(t){throw t.code===Qu.UNAUTHENTICATED&&r.credentials.m(),t}))},e.prototype.terminate=function(){this.Iu=!1},e}((function(){})),kd=function(){function t(t,e){this.di=t,this.Pu=e,this.state="Unknown",this.gu=0,this.yu=null,this.Vu=!0}return t.prototype.pu=function(){var t=this;0===this.gu&&(this.vu("Unknown"),this.yu=this.di.Us("online_state_timeout",1e4,(function(){return t.yu=null,t.bu("Backend didn't respond within 10 seconds."),t.vu("Offline"),Promise.resolve()})))},t.prototype.Su=function(t){"Online"===this.state?this.vu("Unknown"):(this.gu++,this.gu>=1&&(this.Du(),this.bu("Connection failed 1 times. Most recent error: "+t.toString()),this.vu("Offline")))},t.prototype.set=function(t){this.Du(),this.gu=0,"Online"===t&&(this.Vu=!1),this.vu(t)},t.prototype.vu=function(t){t!==this.state&&(this.state=t,this.Pu(t))},t.prototype.bu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vu?(Bu(e),this.Vu=!1):qu("OnlineStateTracker",e)},t.prototype.Du=function(){null!==this.yu&&(this.yu.cancel(),this.yu=null)},t}(),xd=function(t,e,n,r,i){var o=this;this.Cu=t,this.Nu=e,this.di=n,this.xu={},this.Fu=[],this.Ou=new Map,this.Mu=new Set,this.ku=[],this.$u=i,this.$u.Lu((function(t){n.Ri((function(){return Object(ji.b)(o,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:return Vd(this)?(qu("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return(e=Gu(t)).Mu.add(4),[4,jd(e)];case 1:return n.sent(),e.Bu.set("Unknown"),e.Mu.delete(4),[4,Nd(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Bu=new kd(n,r)};function Nd(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:if(!Vd(t))return[3,4];e=0,n=t.ku,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function jd(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.ku,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Rd(t,e){var n=Gu(t);n.Ou.has(e.targetId)||(n.Ou.set(e.targetId,e),Fd(n)?Ld(n):tg(n).zc()&&Dd(n,e))}function Pd(t,e){var n=Gu(t),r=tg(n);n.Ou.delete(e),r.zc()&&Md(n,e),0===n.Ou.size&&(r.zc()?r.Yc():Vd(n)&&n.Bu.set("Unknown"))}function Dd(t,e){t.qu.De(e.targetId),tg(t).hu(e)}function Md(t,e){t.qu.De(e),tg(t).lu(e)}function Ld(t){t.qu=new Zc({Xe:function(e){return t.xu.Xe(e)},Ze:function(e){return t.Ou.get(e)||null}}),tg(t).start(),t.Bu.pu()}function Fd(t){return Vd(t)&&!tg(t).Gc()&&t.Ou.size>0}function Vd(t){return 0===Gu(t).Mu.size}function Ud(t){t.qu=void 0}function qd(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){return t.Ou.forEach((function(e,n){Dd(t,e)})),[2]}))}))}function Bd(t,e){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(n){return Ud(t),Fd(t)?(t.Bu.Su(e),Ld(t)):t.Bu.set("Unknown"),[2]}))}))}function Hd(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:if(t.Bu.set("Online"),!(e instanceof Yc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ou.has(o=i[r])?[4,t.xu.Uu(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ou.delete(o),t.qu.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),qu("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,zd(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Qc?t.qu.$e(e):e instanceof Xc?t.qu.je(e):t.qu.qe(e),n.isEqual(ac.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,gd(t.Cu)];case 8:return i=s.sent(),n.F(i)>=0?[4,function(t,e){var n=t.qu.He(e);return n.re.forEach((function(n,r){if(n.resumeToken.ht()>0){var i=t.Ou.get(r);i&&t.Ou.set(r,i.wt(n.resumeToken,e))}})),n.oe.forEach((function(e){var n=t.Ou.get(e);if(n){t.Ou.set(e,n.wt(wc.lt,n.ft)),Md(t,e);var r=new Oc(n.target,e,1,n.sequenceNumber);Dd(t,r)}})),t.xu.Qu(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return qu("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,zd(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function zd(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r=this;return Object(ji.d)(this,(function(i){switch(i.label){case 0:if(!Mf(e))throw e;return t.Mu.add(1),[4,jd(t)];case 1:return i.sent(),t.Bu.set("Offline"),n||(n=function(){return gd(t.Cu)}),t.di.Mi((function(){return Object(ji.b)(r,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return qu("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Mu.delete(1),[4,Nd(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Wd(t,e){return e().catch((function(n){return zd(t,n,e)}))}function Kd(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:e=Gu(t),n=eg(e),r=e.Fu.length>0?e.Fu[e.Fu.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Vd(t)&&t.Fu.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,yd(e.Cu,r)];case 3:return null===(i=s.sent())?(0===e.Fu.length&&n.Yc(),[3,7]):(r=i.batchId,function(t,e){t.Fu.push(e);var n=eg(t);n.zc()&&n.fu&&n.du(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,zd(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Gd(e)&&Qd(e),[2]}}))}))}function Gd(t){return Vd(t)&&!eg(t).Gc()&&t.Fu.length>0}function Qd(t){eg(t).start()}function Xd(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){return eg(t).Tu(),[2]}))}))}function Yd(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ji.d)(this,(function(i){for(e=eg(t),n=0,r=t.Fu;n<r.length;n++)e.du(r[n].mutations);return[2]}))}))}function Jd(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return r=t.Fu.shift(),i=_f.from(r,e,n),[4,Wd(t,(function(){return t.xu.Ku(i)}))];case 1:return o.sent(),[4,Kd(t)];case 2:return o.sent(),[2]}}))}))}function Zd(t,e){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(n){switch(n.label){case 0:return e&&eg(t).fu?[4,function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return Tc(r=e.code)&&r!==Qu.ABORTED?(n=t.Fu.shift(),eg(t).Jc(),[4,Wd(t,(function(){return t.xu.Wu(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Kd(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Gd(t)&&Qd(t),[2]}}))}))}function $d(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return n=Gu(t),e?(n.Mu.delete(2),[4,Nd(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Mu.add(2),[4,jd(n)]);case 3:r.sent(),n.Bu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function tg(t){var e=this;return t.ju||(t.ju=function(t,e,n){var r=Gu(t);return r.mu(),new Td(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:qd.bind(null,t),nu:Bd.bind(null,t),au:Hd.bind(null,t)}),t.ku.push((function(n){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return n?(t.ju.Jc(),Fd(t)?Ld(t):t.Bu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ju.stop()];case 2:e.sent(),Ud(t),e.label=3;case 3:return[2]}}))}))}))),t.ju}function eg(t){var e=this;return t.Gu||(t.Gu=function(t,e,n){var r=Gu(t);return r.mu(),new Sd(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:Xd.bind(null,t),nu:Zd.bind(null,t),Eu:Yd.bind(null,t),wu:Jd.bind(null,t)}),t.ku.push((function(n){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return n?(t.Gu.Jc(),[4,Kd(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Gu.stop()];case 3:e.sent(),t.Fu.length>0&&(qu("RemoteStore","Stopping write stream with "+t.Fu.length+" pending writes"),t.Fu=[]),e.label=4;case 4:return[2]}}))}))}))),t.Gu}var ng=function(){this.zu=void 0,this.listeners=[]},rg=function(){this.queries=new wf((function(t){return Zh(t)}),Jh),this.onlineState="Unknown",this.Hu=new Set};function ig(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(ji.d)(this,(function(c){switch(c.label){case 0:if(n=Gu(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new ng),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Ju(r)];case 2:return s.zu=c.sent(),[3,4];case 3:return a=c.sent(),u=Kf(a,"Initialization of query '"+$h(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Yu(n.onlineState),o.zu&&e.Xu(o.zu)&&ug(n),[2]}}))}))}function og(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ji.d)(this,(function(a){return n=Gu(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Zu(r))]:[2]}))}))}function sg(t,e){for(var n=Gu(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Xu(s)&&(r=!0);a.zu=s}}r&&ug(n)}function ag(t,e,n){var r=Gu(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ug(t){t.Hu.forEach((function(t){t.next()}))}var cg=function(){function t(t,e,n){this.query=t,this.ta=e,this.ea=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Xu=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Wc(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ea?this.sa(t)&&(this.ta.next(t),o=!0):this.ia(t,this.onlineState)&&(this.ra(t),o=!0),this.na=t,o},t.prototype.onError=function(t){this.ta.error(t)},t.prototype.Yu=function(t){this.onlineState=t;var e=!1;return this.na&&!this.ea&&this.ia(this.na,t)&&(this.ra(this.na),e=!0),e},t.prototype.ia=function(t,e){return!t.fromCache||!(this.options.oa&&"Offline"!==e||t.docs.W()&&"Offline"!==e)},t.prototype.sa=function(t){return t.docChanges.length>0||!!(t.ne||this.na&&this.na.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ra=function(t){t=Wc.ie(t.query,t.docs,t.ee,t.fromCache),this.ea=!0,this.ta.next(t)},t}(),lg=function(){function t(){this.ca=new Nc(hg.ua),this.aa=new Nc(hg.ha)}return t.prototype.W=function(){return this.ca.W()},t.prototype.Do=function(t,e){var n=new hg(t,e);this.ca=this.ca.add(n),this.aa=this.aa.add(n)},t.prototype.la=function(t,e){var n=this;t.forEach((function(t){return n.Do(t,e)}))},t.prototype.No=function(t,e){this._a(new hg(t,e))},t.prototype.fa=function(t,e){var n=this;t.forEach((function(t){return n.No(t,e)}))},t.prototype.da=function(t){var e=this,n=new fc(new cc([])),r=new hg(n,t),i=new hg(n,t+1),o=[];return this.aa.Kt([r,i],(function(t){e._a(t),o.push(t.key)})),o},t.prototype.wa=function(){var t=this;this.ca.forEach((function(e){return t._a(e)}))},t.prototype._a=function(t){this.ca=this.ca.delete(t),this.aa=this.aa.delete(t)},t.prototype.Ea=function(t){var e=new fc(new cc([])),n=new hg(e,t),r=new hg(e,t+1),i=Uc();return this.aa.Kt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Qr=function(t){var e=new hg(t,0),n=this.ca.jt(e);return null!==n&&t.isEqual(n.key)},t}(),hg=function(){function t(t,e){this.key=t,this.Ta=e}return t.ua=function(t,e){return fc.$(t.key,e.key)||rc(t.Ta,e.Ta)},t.ha=function(t,e){return rc(t.Ta,e.Ta)||fc.$(t.key,e.key)},t}();function fg(t,e){return"firestore_clients_"+t+"_"+e}function pg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function dg(t,e){return"firestore_targets_"+t+"_"+e}var gg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Ia=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new Xu(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Bu("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),vg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Ia=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Xu(r.error.code,r.error.message)),i?new t(e,r.state,o):(Bu("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),yg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Ia=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Bc(),s=0;i&&s<r.activeTargetIds.length;++s)i=gc(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Bu("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),mg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Ia=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Bu("SharedClientState","Failed to parse online state: "+e),null)},t}(),bg=function(){function t(){this.activeTargetIds=Bc()}return t.prototype.Aa=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ra=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ma=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),_g=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.Pa=r,this.ga=null,this.Pu=null,this.ps=null,this.ya=this.Va.bind(this),this.pa=new Ac(rc),this.lr=!1,this.va=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ba=fg(this.persistenceKey,this.Pa),this.Sa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pa=this.pa.Tt(this.Pa,new bg),this.Da=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ca=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Na=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xa=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fa=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ya)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(ji.d)(this,(function(h){switch(h.label){case 0:return[4,this.ga.Ic()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Pa&&(i=this.getItem(fg(this.persistenceKey,r)))&&(o=yg.Ia(r,i))&&(this.pa=this.pa.Tt(o.clientId,o));for(this.Oa(),(s=this.storage.getItem(this.xa))&&(a=this.Ma(s))&&this.ka(a),u=0,c=this.va;u<c.length;u++)this.Va(c[u]);return this.va=[],this.window.addEventListener("unload",(function(){return l.fc()})),this.lr=!0,[2]}}))}))},t.prototype.Ss=function(t){this.setItem(this.Sa,JSON.stringify(t))},t.prototype.$a=function(){return this.La(this.pa)},t.prototype.Ba=function(t){var e=!1;return this.pa.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.qa=function(t){this.Ua(t,"pending")},t.prototype.Qa=function(t,e,n){this.Ua(t,e,n),this.Ka(t)},t.prototype.Wa=function(t){var e="not-current";if(this.Ba(t)){var n=this.storage.getItem(dg(this.persistenceKey,t));if(n){var r=vg.Ia(t,n);r&&(e=r.state)}}return this.ja.Aa(t),this.Oa(),e},t.prototype.Ga=function(t){this.ja.Ra(t),this.Oa()},t.prototype.za=function(t){return this.ja.activeTargetIds.has(t)},t.prototype.Ha=function(t){this.removeItem(dg(this.persistenceKey,t))},t.prototype.Ja=function(t,e,n){this.Ya(t,e,n)},t.prototype.Xa=function(t,e,n){var r=this;e.forEach((function(t){r.Ka(t)})),this.currentUser=t,n.forEach((function(t){r.qa(t)}))},t.prototype.Za=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.fc=function(){this.lr&&(this.window.removeEventListener("storage",this.ya),this.removeItem(this.ba),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return qu("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){qu("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){qu("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Va=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(qu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ba)return void Bu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi((function(){return Object(ji.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(ji.d)(this,(function(a){if(this.lr){if(null!==n.key)if(this.Da.test(n.key)){if(null==n.newValue)return t=this.sh(n.key),[2,this.ih(t,null)];if(e=this.rh(n.key,n.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Ca.test(n.key)){if(null!==n.newValue&&(r=this.oh(n.key,n.newValue)))return[2,this.uh(r)]}else if(this.Na.test(n.key)){if(null!==n.newValue&&(i=this.ah(n.key,n.newValue)))return[2,this.hh(i)]}else if(n.key===this.xa){if(null!==n.newValue&&(o=this.Ma(n.newValue)))return[2,this.ka(o)]}else if(n.key===this.Sa)(s=function(t){var e=Nf.Ds;if(null!=t)try{var n=JSON.parse(t);Ku("number"==typeof n),e=n}catch(t){Bu("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Nf.Ds&&this.ps(s);else if(n.key===this.Fa)return[2,this.ga.lh()]}else this.va.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ja",{get:function(){return this.pa.get(this.Pa)},enumerable:!1,configurable:!0}),t.prototype.Oa=function(){this.setItem(this.ba,this.ja.ma())},t.prototype.Ua=function(t,e,n){var r=new gg(this.currentUser,t,e,n),i=pg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ma())},t.prototype.Ka=function(t){var e=pg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){this.storage.setItem(this.xa,JSON.stringify({clientId:this.Pa,onlineState:t}))},t.prototype.Ya=function(t,e,n){var r=dg(this.persistenceKey,t),i=new vg(t,e,n);this.setItem(r,i.ma())},t.prototype.nh=function(){this.setItem(this.Fa,"value-not-used")},t.prototype.sh=function(t){var e=this.Da.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return yg.Ia(n,e)},t.prototype.oh=function(t,e){var n=this.Ca.exec(t),r=Number(n[1]);return gg.Ia(new Fu(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ah=function(t,e){var n=this.Na.exec(t),r=Number(n[1]);return vg.Ia(r,e)},t.prototype.Ma=function(t){return mg.Ia(t)},t.prototype.uh=function(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.ga._h(t.batchId,t.state,t.error)]:(qu("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.hh=function(t){return this.ga.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pa.Tt(t,e):this.pa.remove(t),i=this.La(this.pa),o=this.La(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.ga.dh(s,a).then((function(){n.pa=r}))},t.prototype.ka=function(t){this.pa.get(t.clientId)&&this.Pu(t.onlineState)},t.prototype.La=function(t){var e=Bc();return t.forEach((function(t,n){e=e.Gt(n.activeTargetIds)})),e},t}(),wg=function(){function t(){this.wh=new bg,this.Eh={},this.Pu=null,this.ps=null}return t.prototype.qa=function(t){},t.prototype.Qa=function(t,e,n){},t.prototype.Wa=function(t){return this.wh.Aa(t),this.Eh[t]||"not-current"},t.prototype.Ja=function(t,e,n){this.Eh[t]=e},t.prototype.Ga=function(t){this.wh.Ra(t)},t.prototype.za=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Ha=function(t){delete this.Eh[t]},t.prototype.$a=function(){return this.wh.activeTargetIds},t.prototype.Ba=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new bg,Promise.resolve()},t.prototype.Xa=function(t,e,n){},t.prototype.Za=function(t){},t.prototype.fc=function(){},t.prototype.Ss=function(t){},t.prototype.eh=function(){},t}(),Cg=function(t){this.key=t},Eg=function(t){this.key=t},Og=function(){function t(t,e){this.query=t,this.Th=e,this.Ih=null,this.le=!1,this.mh=Uc(),this.ee=Uc(),this.Ah=ef(t),this.Rh=new Hc(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Th},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.yh:new zc,i=e?e.Rh:this.Rh,o=e?e.ee:this.ee,s=i,a=!1,u=Hh(this.query)&&i.size===this.query.limit?i.last():null,c=zh(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt((function(t,e){var l=i.get(t),h=e instanceof Lh?e:null;h&&(h=tf(n.query,h)?h:null);var f=!!l&&n.ee.has(l.key),p=!!h&&(h.an||n.ee.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Vh(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.Ah(h,u)>0||c&&n.Ah(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Hh(this.query)||zh(this.query))for(;s.size>this.query.limit;){var l=Hh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Rh:s,yh:r,ph:a,ee:o}},t.prototype.Vh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.ee=t.ee;var o=t.yh.Zt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wu()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)})),this.bh(n);var s=e?this.Sh():[],a=0===this.mh.size&&this.le?1:0,u=a!==this.Ih;return this.Ih=a,0!==o.length||u?{snapshot:new Wc(this.query,t.Rh,i,o,t.ee,0===a,u,!1),Dh:s}:{Dh:s}},t.prototype.Yu=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Rh:this.Rh,yh:new zc,ee:this.ee,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Th.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).an},t.prototype.bh=function(t){var e=this;t&&(t._e.forEach((function(t){return e.Th=e.Th.add(t)})),t.fe.forEach((function(t){})),t.de.forEach((function(t){return e.Th=e.Th.delete(t)})),this.le=t.le)},t.prototype.Sh=function(){var t=this;if(!this.le)return[];var e=this.mh;this.mh=Uc(),this.Rh.forEach((function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))}));var n=[];return e.forEach((function(e){t.mh.has(e)||n.push(new Eg(e))})),this.mh.forEach((function(t){e.has(t)||n.push(new Cg(t))})),n},t.prototype.Nh=function(t){this.Th=t.Bc,this.mh=Uc();var e=this.gh(t.documents);return this.Zn(e,!0)},t.prototype.xh=function(){return Wc.ie(this.query,this.Rh,this.ee,0===this.Ih)},t}(),Ig=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Tg=function(t){this.key=t,this.Fh=!1},Sg=function(){function t(t,e,n,r,i,o){this.Cu=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new wf((function(t){return Zh(t)}),Jh),this.qh=new Map,this.Uh=[],this.Qh=new Ac(fc.$),this.Kh=new Map,this.Wh=new lg,this.jh={},this.Gh=new Map,this.zh=Zp._o(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function Ag(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return n=rv(t),(i=n.Bh.get(e))?(n.kh.Wa(i.targetId),r=i.view.xh(),[3,4]):[3,1];case 1:return[4,md(n.Cu,Xh(e))];case 2:return o=a.sent(),s=n.kh.Wa(o.targetId),[4,kg(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Jh&&Rd(n.Oh,o),a.label=4;case 4:return[2,r]}}))}))}function kg(t,e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(ji.d)(this,(function(l){switch(l.label){case 0:return t.Yh=function(e,n,r){return function(t,e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return(i=e.view.gh(n)).ph?[4,_d(t.Cu,e.query,!1).then((function(t){return e.view.gh(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.re.get(e.targetId),s=e.view.Zn(i,t.Jh,o),[2,(Bg(t,e.targetId,s.Dh),s.snapshot)]}}))}))}(t,e,n,r)},[4,_d(t.Cu,e,!0)];case 1:return i=l.sent(),o=new Og(e,i.Bc),s=o.gh(i.documents),a=Gc.he(n,r&&"Offline"!==t.onlineState),u=o.Zn(s,t.Jh,a),Bg(t,n,u.Dh),c=new Ig(e,n,o),[2,(t.Bh.set(e,c),t.qh.has(n)?t.qh.get(n).push(e):t.qh.set(n,[e]),u.snapshot)]}}))}))}function xg(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return n=Gu(t),r=n.Bh.get(e),(i=n.qh.get(r.targetId)).length>1?[2,(n.qh.set(r.targetId,i.filter((function(t){return!Jh(t,e)}))),void n.Bh.delete(e))]:n.Jh?(n.kh.Ga(r.targetId),n.kh.Ba(r.targetId)?[3,2]:[4,bd(n.Cu,r.targetId,!1).then((function(){n.kh.Ha(r.targetId),Pd(n.Oh,r.targetId),Ug(n,r.targetId)})).catch(Od)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ug(n,r.targetId),[4,bd(n.Cu,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Ng(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:r=iv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Gu(t),i=sc.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Uc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Oc._s(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Ch(c,n.get(c.key));null!=l&&s.push(new Th(c.key,l,Dh(l.proto.mapValue),yh.exists(!0)))}return r.rs.Sr(t,i,s,e)}))})).then((function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}}))}(r.Cu,e)];case 2:return i=a.sent(),r.kh.qa(i.batchId),function(t,e,n){var r=t.jh[t.currentUser.h()];r||(r=new Ac(rc)),r=r.Tt(e,n),t.jh[t.currentUser.h()]=r}(r,i.batchId,n),[4,Wg(r,i.Qn)];case 3:return a.sent(),[4,Kd(r.Oh)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Kf(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function jg(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:n=Gu(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,vd(n.Cu,e)];case 2:return r=i.sent(),e.re.forEach((function(t,e){var r=n.Kh.get(e);r&&(Ku(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?r.Fh=!0:t.fe.size>0?Ku(r.Fh):t.de.size>0&&(Ku(r.Fh),r.Fh=!1))})),[4,Wg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Od(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Rg(t,e,n){var r=Gu(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach((function(t,n){var r=n.view.Yu(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Gu(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Yu(e)&&(r=!0)})),r&&ug(n)}(r.Mh,e),i.length&&r.Lh.au(i),r.onlineState=e,r.Jh&&r.kh.Za(e)}}function Pg(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(ji.d)(this,(function(c){switch(c.label){case 0:return(r=Gu(t)).kh.Ja(e,"rejected",n),i=r.Kh.get(e),(o=i&&i.key)?(s=(s=new Ac(fc.$)).Tt(o,new Fh(o,ac.min())),a=Uc().add(o),u=new Kc(ac.min(),new Map,new Nc(rc),s,a),[4,jg(r,u)]):[3,2];case 1:return c.sent(),r.Qh=r.Qh.remove(o),r.Kh.delete(e),zg(r),[3,4];case 2:return[4,bd(r.Cu,e,!1).then((function(){return Ug(r,e,n)})).catch(Od)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Dg(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:n=Gu(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,dd(n.Cu,e)];case 2:return i=o.sent(),Vg(n,r,null),Fg(n,r),n.kh.Qa(r,"acknowledged"),[4,Wg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Od(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Mg(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:r=Gu(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Gu(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.rs.Cr(t,e).next((function(e){return Ku(null!==e),r=e.keys(),n.rs.$r(t,e)})).next((function(){return n.rs.Ur(t)})).next((function(){return n.Oc._s(t,r)}))}))}(r.Cu,e)];case 2:return i=o.sent(),Vg(r,e,n),Fg(r,e),r.kh.Qa(e,"rejected",n),[4,Wg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Od(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Lg(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:Vd((n=Gu(t)).Oh)||qu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Gu(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.rs.Or(t)}))}(n.Cu)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Gh.get(r)||[]).push(e),n.Gh.set(r,i),[3,4]);case 3:return o=a.sent(),s=Kf(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Fg(t,e){(t.Gh.get(e)||[]).forEach((function(t){t.resolve()})),t.Gh.delete(e)}function Vg(t,e,n){var r=Gu(t),i=r.jh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.h()]=i}}function Ug(t,e,n){void 0===n&&(n=null),t.kh.Ga(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.da(e).forEach((function(e){t.Wh.Qr(e)||qg(t,e)}))}function qg(t,e){var n=t.Qh.get(e);null!==n&&(Pd(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),zg(t))}function Bg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Cg?(t.Wh.Do(o.key,e),Hg(t,o)):o instanceof Eg?(qu("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.No(o.key,e),t.Wh.Qr(o.key)||qg(t,o.key)):Wu()}}function Hg(t,e){var n=e.key;t.Qh.get(n)||(qu("SyncEngine","New document in limbo: "+n),t.Uh.push(n),zg(t))}function zg(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new Tg(e)),t.Qh=t.Qh.Tt(e,n),Rd(t.Oh,new Oc(Xh(Bh(e.path)),n,2,Nf.Ds))}}function Wg(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return r=Gu(t),i=[],o=[],s=[],r.Bh.W()?[3,3]:(r.Bh.forEach((function(t,a){s.push(r.Yh(a,e,n).then((function(t){if(t){r.Jh&&r.kh.Ja(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=xf.Vs(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.Lh.au(i),[4,function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(ji.d)(this,(function(l){switch(l.label){case 0:n=Gu(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Cf.forEach(e,(function(e){return Cf.forEach(e.gs,(function(r){return n.persistence.Vr.Do(t,e.targetId,r)})).next((function(){return Cf.forEach(e.ys,(function(r){return n.persistence.Vr.No(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Mf(r=l.sent()))throw r;return qu("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Cc.get(a),c=u.Et(u.ft),n.Cc=n.Cc.Tt(a,c));return[2]}}))}))}(r.Cu,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Kg(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return(n=Gu(t)).currentUser.isEqual(e)?[3,3]:(qu("SyncEngine","User change. New user:",e.h()),[4,pd(n.Cu,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Gh.forEach((function(t){t.forEach((function(t){t.reject(new Xu(Qu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Gh.clear()}(n),n.kh.Xa(e,r.$c,r.Lc),[4,Wg(n,r.kc)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Gg(t,e){var n=Gu(t),r=n.Kh.get(e);if(r&&r.Fh)return Uc().add(r.key);var i=Uc(),o=n.qh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Bh.get(a[s]);i=i.Gt(u.view.Ph)}return i}function Qg(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return[4,_d((n=Gu(t)).Cu,e.query,!0)];case 1:return r=o.sent(),i=e.view.Nh(r),[2,(n.Jh&&Bg(n,e.targetId,i.Dh),i)]}}))}))}function Xg(t){return Object(ji.b)(this,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){return[2,Cd((e=Gu(t)).Cu).then((function(t){return Wg(e,t)}))]}))}))}function Yg(t,e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=Gu(t),r=Gu(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Nr(t,e).next((function(e){return e?n.Oc._s(t,e):Cf.resolve(null)}))}))}((i=Gu(t)).Cu,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Kd(i.Oh)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Vg(i,e,r||null),Fg(i,e),function(t,e){Gu(Gu(t).rs).Br(e)}(i.Cu,e)):Wu(),s.label=4;case 4:return[4,Wg(i,o)];case 5:return s.sent(),[3,7];case 6:qu("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Jg(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(ji.d)(this,(function(c){switch(c.label){case 0:return rv(n=Gu(t)),iv(n),!0!==e||!0===n.Hh?[3,3]:(r=n.kh.$a(),[4,Zg(n,r.H())]);case 1:return i=c.sent(),n.Hh=!0,[4,$d(n.Oh,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Rd(n.Oh,s[o]);return[3,7];case 3:return!1!==e||!1===n.Hh?[3,7]:(a=[],u=Promise.resolve(),n.qh.forEach((function(t,e){n.kh.za(e)?a.push(e):u=u.then((function(){return Ug(n,e),bd(n.Cu,e,!0)})),Pd(n.Oh,e)})),[4,u]);case 4:return c.sent(),[4,Zg(n,a)];case 5:return c.sent(),function(t){var e=Gu(t);e.Kh.forEach((function(t,n){Pd(e.Oh,n)})),e.Wh.wa(),e.Kh=new Map,e.Qh=new Ac(fc.$)}(n),n.Hh=!1,[4,$d(n.Oh,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function Zg(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d;return Object(ji.d)(this,(function(g){switch(g.label){case 0:n=Gu(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.qh.get(a=s[o]))&&0!==c.length?[4,md(n.Cu,Xh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Bh.get(h[l]),[4,Qg(n,f)]):[3,6];case 4:(p=g.sent()).snapshot&&i.push(p.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,wd(n.Cu,a)];case 8:return d=g.sent(),[4,md(n.Cu,d)];case 9:return u=g.sent(),[4,kg(n,$g(d),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Lh.au(i),r)]}}))}))}function $g(t){return qh(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tv(t){var e=Gu(t);return Gu(Gu(e.Cu).persistence).Ic()}function ev(t,e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return(i=Gu(t)).Hh?(qu("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.qh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Cd(i.Cu)];case 3:return o=a.sent(),s=Kc.ae(e,"current"===n),[4,Wg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,bd(i.Cu,e,!0)];case 6:return a.sent(),Ug(i,e,r),[3,8];case 7:Wu(),a.label=8;case 8:return[2]}}))}))}function nv(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(ji.d)(this,(function(f){switch(f.label){case 0:if(!(r=rv(t)).Hh)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.qh.has(s=o[i])?(qu("SyncEngine","Adding an already active target "+s),[3,5]):[4,wd(r.Cu,s)]:[3,6];case 2:return a=f.sent(),[4,md(r.Cu,a)];case 3:return u=f.sent(),[4,kg(r,$g(a),u.targetId,!1)];case 4:f.sent(),Rd(r.Oh,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return r.qh.has(t)?[4,bd(r.Cu,t,!1).then((function(){Pd(r.Oh,t),Ug(r,t)})).catch(Od)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function rv(t){var e=Gu(t);return e.Oh.xu.Qu=jg.bind(null,e),e.Oh.xu.Xe=Gg.bind(null,e),e.Oh.xu.Uu=Pg.bind(null,e),e.Lh.au=sg.bind(null,e.Mh),e.Lh.Xh=ag.bind(null,e.Mh),e}function iv(t){var e=Gu(t);return e.Oh.xu.Ku=Dg.bind(null,e),e.Oh.xu.Wu=Mg.bind(null,e),e}var ov=function(){function t(){}return t.prototype.Mc=function(t){this.Zh=t},t.prototype.ws=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(ac.min())?this.tl(t,e):this.Zh._s(t,r).next((function(o){var s=i.el(e,o);return(Hh(e)||zh(e))&&i.ph(e.limitType,s,r,n)?i.tl(t,e):(Uu()<=Ri.a.DEBUG&&qu("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),$h(e)),i.Zh.ws(t,e,n).next((function(t){return s.forEach((function(e){t=t.Tt(e.key,e)})),t})))}))},t.prototype.el=function(t,e){var n=new Nc(ef(t));return e.forEach((function(e,r){r instanceof Lh&&tf(t,r)&&(n=n.add(r))})),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.tl=function(t,e){return Uu()<=Ri.a.DEBUG&&qu("IndexFreeQueryEngine","Using full collection scan to execute query:",$h(e)),this.Zh.ws(t,e,ac.min())},t}(),sv=function(){function t(t,e){this.os=t,this.Vr=e,this.rs=[],this.nl=1,this.sl=new Nc(hg.ua)}return t.prototype.br=function(t){return Cf.resolve(0===this.rs.length)},t.prototype.Sr=function(t,e,n,r){var i=this.nl;this.nl++;var o=new bf(i,e,n,r);this.rs.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.sl=this.sl.add(new hg(u.key,i)),this.os.Dr(t,u.key.path.q())}return Cf.resolve(o)},t.prototype.Cr=function(t,e){return Cf.resolve(this.il(e))},t.prototype.Fr=function(t,e){var n=this.rl(e+1),r=n<0?0:n;return Cf.resolve(this.rs.length>r?this.rs[r]:null)},t.prototype.Or=function(){return Cf.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.Mr=function(t){return Cf.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new hg(e,0),i=new hg(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],(function(t){var e=n.il(t.Ta);o.push(e)})),Cf.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new Nc(rc);return e.forEach((function(t){var e=new hg(t,0),i=new hg(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],(function(t){r=r.add(t.Ta)}))})),Cf.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;fc.ot(i)||(i=i.child(""));var o=new hg(new fc(i),0),s=new Nc(rc);return this.sl.Wt((function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ta)),!0)}),o),Cf.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.il(t);null!==r&&n.push(r)})),n},t.prototype.$r=function(t,e){var n=this;Ku(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return Cf.forEach(e.mutations,(function(i){var o=new hg(i.key,e.batchId);return r=r.delete(o),n.Vr.qr(t,i.key)})).next((function(){n.sl=r}))},t.prototype.Br=function(t){},t.prototype.Qr=function(t,e){var n=new hg(e,0),r=this.sl.jt(n);return Cf.resolve(e.isEqual(r&&r.key))},t.prototype.Ur=function(t){return Cf.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),av=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new Ac(fc.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Dr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return Cf.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=Dc();return e.forEach((function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)})),Cf.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=Lc(),i=new fc(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),a=s.value,u=a.zn,c=a.readTime;if(!e.path.j(s.key.path))break;c.F(n)<=0||u instanceof Lh&&tf(e,u)&&(r=r.Tt(u.key,u))}return Cf.resolve(r)},t.prototype.al=function(t,e){return Cf.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Xr=function(t){return new uv(this)},t.prototype.eo=function(t){return Cf.resolve(this.size)},t}(),uv=function(t){function e(e){var n=this;return(n=t.call(this)||this).no=e,n}return Object(ji.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach((function(r,i){i&&i.zn?n.push(e.no.jn(t,i.zn,e.Wn(r))):e.no.Hn(r)})),Cf.qn(n)},e.prototype.Yn=function(t,e){return this.no.Jn(t,e)},e.prototype.Xn=function(t,e){return this.no.getEntries(t,e)},e}(Ef),cv=function(){function t(t){this.persistence=t,this.hl=new wf((function(t){return mc(t)}),bc),this.lastRemoteSnapshotVersion=ac.min(),this.highestTargetId=0,this.ll=0,this._l=new lg,this.targetCount=0,this.fl=Zp.lo()}return t.prototype.Ue=function(t,e){return this.hl.forEach((function(t,n){return e(n)})),Cf.resolve()},t.prototype.To=function(t){return Cf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Io=function(t){return Cf.resolve(this.ll)},t.prototype.fo=function(t){return this.highestTargetId=this.fl.next(),Cf.resolve(this.highestTargetId)},t.prototype.mo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),Cf.resolve()},t.prototype.Ro=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new Zp(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Ao=function(t,e){return this.Ro(e),this.targetCount+=1,Cf.resolve()},t.prototype.yo=function(t,e){return this.Ro(e),Cf.resolve()},t.prototype.Vo=function(t,e){return this.hl.delete(e.target),this._l.da(e.targetId),this.targetCount-=1,Cf.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.hl.delete(s),o.push(r.po(t,a.targetId)),i++)})),Cf.qn(o).next((function(){return i}))},t.prototype.vo=function(t){return Cf.resolve(this.targetCount)},t.prototype.bo=function(t,e){var n=this.hl.get(e)||null;return Cf.resolve(n)},t.prototype.So=function(t,e,n){return this._l.la(e,n),Cf.resolve()},t.prototype.Co=function(t,e,n){this._l.fa(e,n);var r=this.persistence.Vr,i=[];return r&&e.forEach((function(e){i.push(r.qr(t,e))})),Cf.qn(i)},t.prototype.po=function(t,e){return this._l.da(e),Cf.resolve()},t.prototype.xo=function(t,e){var n=this._l.Ea(e);return Cf.resolve(n)},t.prototype.Qr=function(t,e){return Cf.resolve(this._l.Qr(e))},t}(),lv=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ro=function(t,e){return Cf.resolve(this.dl.get(e))},t.prototype.oo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:Nl(n.createTime)}),Cf.resolve()},t.prototype.co=function(t,e){return Cf.resolve(this.wl.get(e))},t.prototype.uo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:pp(n.bundledQuery),readTime:Nl(n.readTime)}),Cf.resolve()},t}(),hv=function(){function t(t,e){var n=this;this.El={},this.ko=new Nf(0),this.$o=!1,this.$o=!0,this.Vr=t(this),this.jo=new cv(this),this.os=new Tp,this.ss=function(t,e){return new av(t,(function(t){return n.Vr.Tl(t)}))}(this.os),this.serializer=new rp(e),this.Go=new lv(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.fc=function(){return this.$o=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.tc=function(){},t.prototype.ec=function(){},t.prototype.Pc=function(){return this.os},t.prototype.mc=function(t){var e=this.El[t.h()];return e||(e=new sv(this.os,this.Vr),this.El[t.h()]=e),e},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r=this;qu("MemoryPersistence","Starting transaction:",t);var i=new fv(this.ko.next());return this.Vr.Il(),n(i).next((function(t){return r.Vr.ml(i).next((function(){return t}))})).Ln().then((function(t){return i.ns(),t}))},t.prototype.Al=function(t,e){return Cf.Un(Object.values(this.El).map((function(n){return function(){return n.Qr(t,e)}})))},t}(),fv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fo=e,n}return Object(ji.c)(e,t),e}(Af),pv=function(){function t(t){this.persistence=t,this.Rl=new lg,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw Wu()},enumerable:!1,configurable:!0}),t.prototype.Do=function(t,e,n){return this.Rl.Do(n,e),this.yl.delete(n.toString()),Cf.resolve()},t.prototype.No=function(t,e,n){return this.Rl.No(n,e),this.yl.add(n.toString()),Cf.resolve()},t.prototype.qr=function(t,e){return this.yl.add(e.toString()),Cf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.da(e.targetId).forEach((function(t){return n.yl.add(t.toString())}));var r=this.persistence.Ac();return r.xo(t,e.targetId).next((function(t){t.forEach((function(t){return n.yl.add(t.toString())}))})).next((function(){return r.Vo(t,e)}))},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Rc().Xr();return Cf.forEach(this.yl,(function(r){var i=fc.st(r);return e.Vl(t,i).next((function(t){t||n.Hn(i)}))})).next((function(){return e.Pl=null,n.apply(t)}))},t.prototype.Sc=function(t,e){var n=this;return this.Vl(t,e).next((function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())}))},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return Cf.Un([function(){return Cf.resolve(n.Rl.Qr(e))},function(){return n.persistence.Ac().Qr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),dv=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.cu=function(t){this.bl=t},t.prototype.nu=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),gv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},vv=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(ji.c)(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise((function(i,o){var s=new Pu;s.listenOnce(Nu.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case xu.NO_ERROR:var e=s.getResponseJson();qu("Connection","XHR received:",JSON.stringify(e)),i(e);break;case xu.TIMEOUT:qu("Connection",'RPC "'+t+'" timed out'),o(new Xu(Qu.DEADLINE_EXCEEDED,"Request time out"));break;case xu.HTTP_ERROR:var n=s.getStatus();if(qu("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(Qu).indexOf(e)>=0?e:Qu.UNKNOWN}(r.status);o(new Xu(a,r.message))}else o(new Xu(Qu.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Xu(Qu.UNAVAILABLE,"Connection failed."));break;default:Wu()}}finally{qu("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.uu=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Iu,i=As(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(o.initMessageHeaders,e),Object(Pi.x)()||Object(Pi.A)()||Object(Pi.t)()||Object(Pi.v)()||Object(Pi.B)()||Object(Pi.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");qu("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new dv({pl:function(t){c?qu("Connection","Not sending because WebChannel is closed:",t):(u||(qu("Connection","Opening WebChannel transport."),a.open(),u=!0),qu("Connection","WebChannel sending:",t),a.send(t))},vl:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,Ru.EventType.OPEN,(function(){c||qu("Connection","WebChannel transport opened.")})),h(a,Ru.EventType.CLOSE,(function(){c||(c=!0,qu("Connection","WebChannel transport closed"),l.Nl())})),h(a,Ru.EventType.ERROR,(function(t){c||(c=!0,Hu("Connection","WebChannel transport errored:",t),l.Nl(new Xu(Qu.UNAVAILABLE,"The operation could not be completed")))})),h(a,Ru.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];Ku(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){qu("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Cc[t];if(void 0!==e)return Sc(e)}(i),s=r.message;void 0===o&&(o=Qu.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Nl(new Xu(o,s)),a.close()}else qu("Connection","WebChannel received:",n),l.xl(n)}})),h(i,ju.STAT_EVENT,(function(t){10===t.stat?qu("Connection","Detected buffering proxy"):11===t.stat&&qu("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Cl()}),0),l},e}(function(){function t(t){this.Fl=t,this.t=t.t,this.Ol=(t.ssl?"https":"http")+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.Au=function(t,e,n,r){var i=this.kl(t,e);qu("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then((function(t){return qu("RestConnection","Received: ",t),t}),(function(e){throw Hu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Ru=function(t,e,n,r){return this.Au(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.1",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){return this.Ol+"/v1/"+e+":"+gv[t]},t}()),yv=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Lu=function(t){this.Kl.push(t)},t.prototype.fc=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){qu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){qu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),mv=function(){function t(){}return t.prototype.Lu=function(t){},t.prototype.fc=function(){},t}(),bv=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return this.serializer=If(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Cu=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return fd(this.persistence,new ov,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new hv(pv.gl,this.serializer)},t.prototype.jl=function(t){return new wg},t.prototype.terminate=function(){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.fc()];case 1:return t.sent(),[4,this.persistence.fc()];case 2:return t.sent(),[2]}}))}))},t}(),_v=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(ji.c)(e,t),e.prototype.initialize=function(e){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ed(this.Cu)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,iv(this.Xl.ga)];case 4:return n.sent(),[4,Kd(this.Xl.Oh)];case 5:return n.sent(),[2]}}))}))},e.prototype.Jl=function(t){return fd(this.persistence,new ov,t.Yl,this.serializer)},e.prototype.Hl=function(t){return new Jf(this.persistence.Vr.cr,t.di)},e.prototype.Gl=function(t){var e=ld(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?Yf.er(this.cacheSizeBytes):Yf.ir;return new od(this.synchronizeTabs,e,t.clientId,n,t.di,Bf(),Hf(),this.serializer,this.kh,!!this.forceOwnership)},e.prototype.jl=function(t){return new wg},e}(bv),wv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(ji.c)(e,t),e.prototype.initialize=function(e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r=this;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.ga,this.kh instanceof _g?(this.kh.ga={_h:Yg.bind(null,n),fh:ev.bind(null,n),dh:nv.bind(null,n),Ic:tv.bind(null,n),lh:Xg.bind(null,n)},[4,this.kh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Zo((function(t){return Object(ji.b)(r,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return[4,Jg(this.Xl.ga,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Cu):t||this.zl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.jl=function(t){var e=Bf();if(!_g.Gs(e))throw new Xu(Qu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ld(t.Fl.t,t.Fl.persistenceKey);return new _g(e,t.di,n,t.clientId,t.Yl)},e}(_v),Cv=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n=this;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return this.Cu?[3,2]:(this.Cu=t.Cu,this.kh=t.kh,this.Nu=this.Zl(e),this.Oh=this.t_(e),this.Mh=this.e_(e),this.ga=this.n_(e,!t.synchronizeTabs),this.kh.Pu=function(t){return Rg(n.ga,t,1)},this.Oh.xu.s_=Kg.bind(null,this.ga),[4,$d(this.Oh,this.ga.Jh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new rg},t.prototype.Zl=function(t){var e=If(t.Fl.t),n=new vv(t.Fl);return function(t,e,n){return new Ad(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Cu,n=this.Nu,r=t.di,i=function(t){return Rg(s.ga,t,0)},o=yv.Gs()?new yv:new mv,new xd(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new Sg(t,e,n,r,i,o);return s&&(a.Hh=!0),a}(this.Cu,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return e=Gu(t),qu("RemoteStore","RemoteStore shutting down."),e.Mu.add(5),[4,jd(e)];case 1:return n.sent(),e.$u.fc(),e.Bu.set("Unknown"),[2]}}))}))}(this.Oh)},t}(),Ev=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Ov=function(t){this.o_=t};function Iv(t,e,n){if(!n)throw new Xu(Qu.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Tv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Sv(t,e,n,r){if(!0===e&&!0===r)throw new Xu(Qu.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Av(t){if(!fc.ot(t))throw new Xu(Qu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function kv(t){if(fc.ot(t))throw new Xu(Qu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function xv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Wu()}function Nv(t,e){if(t instanceof Ov&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xu(Qu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xv(t);throw new Xu(Qu.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function jv(t,e){if(e<=0)throw new Xu(Qu.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Rv=function(t){this.c_=t},Pv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.u_=function(t){if(2!==t.a_)throw t.h_(1===t.a_?this.c_+"() can only appear at the top level of your update data":this.c_+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Rv);function Dv(t,e,n){return new Fy({a_:3,l_:e.settings.l_,methodName:t.c_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.u_=function(t){return new gh(t.path,new sh)},e.prototype.isEqual=function(t){return t instanceof e},e}(Rv),Lv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(ji.c)(e,t),e.prototype.u_=function(t){var e=Dv(this,t,!0),n=this.f_.map((function(t){return zy(t,e)})),r=new ah(n);return new gh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Rv),Fv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(ji.c)(e,t),e.prototype.u_=function(t){var e=Dv(this,t,!0),n=this.f_.map((function(t){return zy(t,e)})),r=new ch(n);return new gh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Rv),Vv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return Object(ji.c)(e,t),e.prototype.u_=function(t){var e=new hh(t.serializer,Sl(t.serializer,this.d_));return new gh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Rv),Uv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Xu(Qu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Xu(Qu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.E_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.E_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.E_===t.E_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.E_}},t.prototype.C=function(t){return rc(this.w_,t.w_)||rc(this.E_,t.E_)},t}(),qv=function(){function t(t){this.T_=t}return t.fromBase64String=function(e){try{return new t(wc.fromBase64String(e))}catch(e){throw new Xu(Qu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(wc.fromUint8Array(e))},t.prototype.toBase64=function(){return this.T_.toBase64()},t.prototype.toUint8Array=function(){return this.T_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.T_.isEqual(t.T_)},t}(),Bv=new Map,Hv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Xu(Qu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xu(Qu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Sv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),zv=function(){function t(t,e){this.I_="(lite)",this.m_=new Hv({}),this.A_=!1,t instanceof Lu?(this.R_=t,this.P_=new Ju):(this.g_=t,this.R_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Xu(Qu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(t.options.projectId)}(t),this.P_=new Zu(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.g_)throw new Xu(Qu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.g_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"V_",{get:function(){return void 0!==this.p_},enumerable:!1,configurable:!0}),t.prototype.v_=function(t){if(this.A_)throw new Xu(Qu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.m_=new Hv(t),void 0!==t.credentials&&(this.P_=function(t){if(!t)return new Ju;switch(t.type){case"gapi":var e=t.client;return Ku(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new tc(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Xu(Qu.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.b_=function(){return this.m_},t.prototype.S_=function(){return this.A_=!0,this.m_},t.prototype._delete=function(){return this.p_||(this.p_=this.D_()),this.p_},t.prototype.D_=function(){return function(t){var e=Bv.get(t);e&&(qu("ComponentProvider","Removing Datastore"),Bv.delete(t),e.terminate())}(this),Promise.resolve()},t}();function Wv(){if("undefined"==typeof Uint8Array)throw new Xu(Qu.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Kv(){if("undefined"==typeof atob)throw new Xu(Qu.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Gv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.fromBase64String=function(t){return Kv(),new e(qv.fromBase64String(t))},e.fromUint8Array=function(t){return Wv(),new e(qv.fromUint8Array(t))},e.prototype.toBase64=function(){return Kv(),this.o_.toBase64()},e.prototype.toUint8Array=function(){return Wv(),this.o_.toUint8Array()},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Ov),Qv=function(){function t(){}return t.prototype.C_=function(t,e){switch(void 0===e&&(e="none"),al(t)){case 0:return null;case 1:return t.booleanValue;case 2:return dl(t.integerValue||t.doubleValue);case 3:return this.N_(t.timestampValue);case 4:return this.x_(t,e);case 5:return t.stringValue;case 6:return this.F_(gl(t.bytesValue));case 7:return this.O_(t.referenceValue);case 8:return this.M_(t.geoPointValue);case 9:return this.k_(t.arrayValue,e);case 10:return this.L_(t.mapValue,e);default:throw Wu()}},t.prototype.L_=function(t,e){var n=this,r={};return nl(t.fields||{},(function(t,i){r[t]=n.C_(i,e)})),r},t.prototype.M_=function(t){return new Uv(dl(t.latitude),dl(t.longitude))},t.prototype.k_=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.C_(t,e)}))},t.prototype.x_=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return il(n)?t(n):n}(t);return null==n?null:this.C_(n,e);case"estimate":return this.N_(ol(t));default:return null}},t.prototype.N_=function(t){var e=pl(t);return new sc(e.seconds,e.nanos)},t.prototype.B_=function(t,e){var n=cc.Y(t);Ku(eh(n));var r=new Lu(n.get(1),n.get(3)),i=new fc(n.B(5));return r.isEqual(e)||Bu("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Xv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ji.c)(e,t),e.prototype.F_=function(t){return new Gv(new qv(t))},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return Cm.q_(e,this.firestore,null)},e}(Qv),Yv=function(){function t(t,e,n,r,i){this.U_=t,this.Q_=e,this.K_=n,this.W_=r,this.j_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new py(this.U_,this.j_,this.K_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.W_},t.prototype.data=function(){if(this.W_){if(this.j_){var t=new Jv(this.U_,this.Q_,this.K_,this.W_,null);return this.j_.fromFirestore(t)}return this.Q_.C_(this.W_.En())}},t.prototype.get=function(t){if(this.W_){var e=this.W_.data().field(Zv("DocumentSnapshot.get",t));if(null!==e)return this.Q_.C_(e)}},t}(),Jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Yv);function Zv(t,e){return"string"==typeof e?Yy(t,e):e instanceof Ov?e.o_.G_:e.G_}var $v=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.G_=new hc(t)}return t.prototype.isEqual=function(t){return this.G_.isEqual(t.G_)},t}(),ty=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).z_=new Wf,r.I_="name"in e?e.name:"[DEFAULT]",r}return Object(ji.c)(e,t),e.prototype.D_=function(){return this.H_||bm(this),this.H_.terminate()},e}(zv);function ey(t,e,n){var r=this,i=new Of;return t.di.enqueue((function(){return Object(ji.b)(r,void 0,void 0,(function(){var r;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,nm(t,n)];case 1:return o.sent(),[4,rm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Qu.FAILED_PRECONDITION||t.code===Qu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function ny(t){if(t.y_||t.V_)throw new Xu(Qu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ry=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).U_=e,a.J_=e,a.metadata=o,a}return Object(ji.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.W_){if(this.j_){var e=new iy(this.U_,this.Q_,this.K_,this.W_,this.metadata,null);return this.j_.fromFirestore(e,t)}return this.Q_.C_(this.W_.En(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.W_){var n=this.W_.data().field(Zv("DocumentSnapshot.get",t));if(null!==n)return this.Q_.C_(n,e.serverTimestamps)}},e}(Yv),iy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ry),oy=function(){function t(t,e,n,r){this.U_=t,this.Q_=e,this.Y_=r,this.metadata=new Tm(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Y_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Y_.docs.forEach((function(r){t.call(e,new iy(n.U_,n.Q_,r.key,r,new Tm(n.Y_.ee.has(r.key),n.Y_.fromCache),n.query.j_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.Y_.se)throw new Xu(Qu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.X_&&this.Z_===e||(this.X_=function(t,e){if(t.Y_.te.W()){var n=0;return t.Y_.docChanges.map((function(e){return{type:"added",doc:new iy(t.U_,t.Q_,e.doc.key,e.doc,new Tm(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),oldIndex:-1,newIndex:n++}}))}var r=t.Y_.te;return t.Y_.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new iy(t.U_,t.Q_,e.doc.key,e.doc,new Tm(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:sy(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.Z_=e),this.X_},t}();function sy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wu()}}function ay(t,e){return t instanceof ry&&e instanceof ry?t.U_===e.U_&&t.K_.isEqual(e.K_)&&(null===t.W_?null===e.W_:t.W_.isEqual(e.W_))&&t.j_===e.j_:t instanceof oy&&e instanceof oy&&t.U_===e.U_&&jy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.Y_.isEqual(e.Y_)}var uy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ji.c)(e,t),e.prototype.F_=function(t){return new qv(t)},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new py(this.firestore,null,e)},e}(Qv);function cy(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Nv(t.firestore,ty),s=Ry(o);return e instanceof Ov&&(e=e.o_),hy(o,("string"==typeof e||e instanceof $v?By(s,"updateDoc",t.K_,e,n,r):qy(s,"updateDoc",t.K_,e)).ef(t.K_,yh.exists(!0)))}function ly(t){for(var e,n,r,i=this,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var a={includeMetadataChanges:!1},u=0;"object"!=typeof o[u]||Tf(o[u])||(a=o[u],u++);var c,l,h,f={includeMetadataChanges:a.includeMetadataChanges};if(Tf(o[u])){var p=o[u];o[u]=null===(e=p.next)||void 0===e?void 0:e.bind(p),o[u+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[u+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof py)l=Nv(t.firestore,ty),h=Bh(t.K_.path),c={next:function(e){o[u]&&o[u](fy(l,t,e))},error:o[u+1],complete:o[u+2]};else{l=Nv(t.firestore,ty),h=t.tf;var d=new uy(l);c={next:function(e){o[u]&&o[u](new oy(l,d,t,e))},error:o[u+1],complete:o[u+2]},Ty(t.tf)}var g=mm(l),v=new Ev(c),y=new cg(h,v,f);return l.z_.Ri((function(){return Object(ji.b)(i,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(e){switch(e.label){case 0:return t=ig,[4,lm(g)];case 1:return[2,t.apply(void 0,[e.sent(),y])]}}))}))})),function(){v.r_(),l.z_.Ri((function(){return Object(ji.b)(i,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(e){switch(e.label){case 0:return t=og,[4,lm(g)];case 1:return[2,t.apply(void 0,[e.sent(),y])]}}))}))}))}}function hy(t,e){return function(t,e){var n=this,r=new Of;return t.di.Ri((function(){return Object(ji.b)(n,void 0,void 0,(function(){var n;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return n=Ng,[4,cm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(mm(t),e)}function fy(t,e,n){var r=n.docs.get(e.K_),i=new uy(t);return new ry(t,i,e.K_,r,new Tm(n.hasPendingWrites,n.fromCache),e.j_)}var py=function(){function t(t,e,n){this.j_=e,this.K_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"nf",{get:function(){return this.K_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.K_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Sy(this.firestore,this.j_,this.K_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.K_)},t}(),dy=function(){function t(t,e,n){this.j_=e,this.tf=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.tf)},t}(),gy=function(){};function vy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.sf(t)}return t}var yy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).rf=e,i.cf=n,i.uf=r,i.type="where",i}return Object(ji.c)(e,t),e.prototype.sf=function(t){var e=Ry(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Oy(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Ey(r,t,l[c]));a={arrayValue:{values:u}}}else a=Ey(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Oy(s,o),a=Hy(n,"where",s,"in"===o||"not-in"===o);var h=nf.create(i,o,a);return function(t,e){if(e.An()){var n=Kh(t);if(null!==n&&!n.isEqual(e.field))throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Wh(t);null!==r&&Iy(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Xu(Qu.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.tf,0,e,t.firestore.R_,this.rf,this.cf,this.uf);return new dy(t.firestore,t.j_,function(t,e){var n=t.filters.concat([e]);return new Uh(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,n))},e}(gy),my=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).rf=e,r.af=n,r.type="orderBy",r}return Object(ji.c)(e,t),e.prototype.sf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vf(e,n);return function(t,e){if(null===Wh(t)){var n=Kh(t);null!==n&&Iy(0,n,e.field)}}(t,r),r}(t.tf,this.rf,this.af);return new dy(t.firestore,t.j_,function(t,e){var n=t.Tn.concat([e]);return new Uh(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,e))},e}(gy),by=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.hf=n,i.lf=r,i}return Object(ji.c)(e,t),e.prototype.sf=function(t){return new dy(t.firestore,t.j_,Yh(t.tf,this.hf,this.lf))},e}(gy),_y=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(ji.c)(e,t),e.prototype.sf=function(t){var e=Cy(t,this.type,this._f,this.ff);return new dy(t.firestore,t.j_,function(t,e){return new Uh(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.tf,e))},e}(gy),wy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(ji.c)(e,t),e.prototype.sf=function(t){var e=Cy(t,this.type,this._f,this.ff);return new dy(t.firestore,t.j_,function(t,e){return new Uh(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.tf,e))},e}(gy);function Cy(t,e,n,r){if(n[0]instanceof Ov&&(n[0]=n[0].o_),n[0]instanceof Yv)return function(t,e,n,r,i){if(!r)throw new Xu(Qu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Qh(t);s<a.length;s++){var u=a[s];if(u.field.tt())o.push(vl(e,r.key));else{var c=r.field(u.field);if(il(c))throw new Xu(Qu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.J();throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ff(o,i)}(t.tf,t.firestore.R_,e,n[0].W_,r);var i=Ry(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new Xu(Qu.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.tt()){if("string"!=typeof c)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Gh(t)&&-1!==c.indexOf("/"))throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(cc.Y(c));if(!fc.ot(l))throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new fc(l);a.push(vl(e,h))}else{var f=Hy(n,r,c);a.push(f)}}return new ff(a,o)}(t.tf,t.firestore.R_,i,e,n,r)}function Ey(t,e,n){if(n instanceof Ov&&(n=n.o_),"string"==typeof n){if(""===n)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gh(e)&&-1!==n.indexOf("/"))throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(cc.Y(n));if(!fc.ot(r))throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return vl(t,new fc(r))}if(n instanceof py)return vl(t,n.K_);throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+xv(n)+".")}function Oy(t,e){if(!Array.isArray(t)||0===t.length)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Iy(t,e,n){if(!n.isEqual(e))throw new Xu(Qu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Ty(t){if(zh(t)&&0===t.Tn.length)throw new Xu(Qu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Bh(r))||this).firestore=e,i.nf=r,i.type="collection",i}return Object(ji.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.tf.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.tf.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.nf.q();return t.W()?null:new py(this.firestore,null,new fc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.nf)},e}(dy);function Ay(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Iv("collection","path",e),t instanceof zv){var i=cc.Y.apply(cc,Object(ji.g)([e],n));return kv(i),new Sy(t,null,i)}if(!(t instanceof py||t instanceof Sy))throw new Xu(Qu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=cc.Y.apply(cc,Object(ji.g)([t.path],n)).child(cc.Y(e));return kv(o),new Sy(t.firestore,null,o)}function ky(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(1===arguments.length&&(e=nc.D()),Iv("doc","path",e),t instanceof zv){var i=cc.Y.apply(cc,Object(ji.g)([e],n));return Av(i),new py(t,null,new fc(i))}if(!(t instanceof py||t instanceof Sy))throw new Xu(Qu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t.nf.child(cc.Y.apply(cc,Object(ji.g)([e],n)));return Av(o),new py(t.firestore,t instanceof Sy?t.j_:null,new fc(o))}var xy=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ji.c)(e,t),e.prototype.F_=function(t){return new qv(t)},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new py(this.firestore,null,e)},e}(Qv);function Ny(t,e){return(t instanceof py||t instanceof Sy)&&(e instanceof py||e instanceof Sy)&&t.firestore===e.firestore&&t.path===e.path&&t.j_===e.j_}function jy(t,e){return t instanceof dy&&e instanceof dy&&t.firestore===e.firestore&&Jh(t.tf,e.tf)&&t.j_===e.j_}function Ry(t){var e=t.S_(),n=If(t.R_);return new Vy(t.R_,!!e.ignoreUndefinedProperties,n)}var Py=/^__.*__$/,Dy=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[];return n.push(null!==this.en?new Th(t,this.data,this.en,e):new Ih(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Ah(t,this.fieldTransforms)),n},t}(),My=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[new Th(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new Ah(t,this.fieldTransforms)),n},t}();function Ly(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wu()}}var Fy=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.df(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a_",{get:function(){return this.settings.a_},enumerable:!1,configurable:!0}),t.prototype.wf=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.Ef=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.Tf(t),r},t.prototype.If=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.df(),r},t.prototype.mf=function(t){return this.wf({path:void 0,__:!0})},t.prototype.h_=function(t){return Jy(t,this.settings.methodName,this.settings.Af||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.en.find((function(e){return t.j(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.j(e.field)}))},t.prototype.df=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Tf(this.path.get(t))},t.prototype.Tf=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(Ly(this.a_)&&Py.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),Vy=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||If(t)}return t.prototype.Rf=function(t,e,n,r){return void 0===r&&(r=!1),new Fy({a_:t,methodName:e,l_:n,path:hc.X(),__:!1,Af:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function Uy(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Rf(o.merge||o.mergeFields?2:0,e,n,i);Gy("Data must be an object, but it was:",s,r);var a,u,c=Wy(r,s);if(o.merge)a=new dh(s.en),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=Qy(e,f[h],n);if(!s.contains(p))throw new Xu(Qu.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Zy(l,p)||l.push(p)}a=new dh(l),u=s.fieldTransforms.filter((function(t){return a.un(t.field)}))}else a=null,u=s.fieldTransforms;return new Dy(new Rh(c),a,u)}function qy(t,e,n,r){var i=t.Rf(1,e,n);Gy("Data must be an object, but it was:",i,r);var o=[],s=new Ph;nl(r,(function(t,r){var a=Yy(e,t,n);r instanceof Ov&&(r=r.o_);var u=i.If(a);if(r instanceof Pv)o.push(a);else{var c=zy(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new dh(o);return new My(s.hn(),a,i.fieldTransforms)}function By(t,e,n,r,i,o){var s=t.Rf(1,e,n),a=[Qy(e,r,n)],u=[i];if(o.length%2!=0)throw new Xu(Qu.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Qy(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Ph,f=a.length-1;f>=0;--f)if(!Zy(l,a[f])){var p=a[f],d=u[f];d instanceof Ov&&(d=d.o_);var g=s.If(p);if(d instanceof Pv)l.push(p);else{var v=zy(d,g);null!=v&&(l.push(p),h.set(p,v))}}var y=new dh(l);return new My(h.hn(),y,s.fieldTransforms)}function Hy(t,e,n,r){return void 0===r&&(r=!1),zy(n,t.Rf(r?4:3,e))}function zy(t,e){if(t instanceof Ov&&(t=t.o_),Ky(t))return Gy("Unsupported field value:",e,t),Wy(t,e);if(t instanceof Rv)return function(t,e){if(!Ly(e.a_))throw e.h_(t.c_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.c_+"() is not currently supported inside arrays");var n=t.u_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.a_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=zy(o[i],e.mf(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Ov&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Sl(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=sc.fromDate(t);return{timestampValue:Al(e.serializer,n)}}if(t instanceof sc){var r=new sc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Al(e.serializer,r)}}if(t instanceof Uv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qv)return{bytesValue:kl(e.serializer,t.T_)};if(t instanceof py){var i=e.t,o=t.firestore.R_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:jl(t.firestore.R_||e.t,t.K_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+xv(t))}(t,e)}function Wy(t,e){var n={};return rl(t)?e.path&&e.path.length>0&&e.en.push(e.path):nl(t,(function(t,r){var i=zy(r,e.Ef(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ky(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sc||t instanceof Uv||t instanceof qv||t instanceof py||t instanceof Rv)}function Gy(t,e,n){if(!Ky(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=xv(n);throw e.h_("an object"===r?t+" a custom object":t+" "+r)}}function Qy(t,e,n){if(e instanceof Ov&&(e=e.o_),e instanceof $v)return e.G_;if("string"==typeof e)return Yy(t,e);throw Jy("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Xy=new RegExp("[~\\*/\\[\\]]");function Yy(t,e,n){if(e.search(Xy)>=0)throw Jy("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new($v.bind.apply($v,Object(ji.g)([void 0],e.split("."))))).G_}catch(r){throw Jy("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Jy(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Xu(Qu.INVALID_ARGUMENT,(a+=". ")+t+u)}function Zy(t,e){return t.some((function(t){return t.isEqual(e)}))}var $y=function(){function t(t){this.Nu=t,this.Pf=new Map,this.mutations=[],this.gf=!1,this.yf=null,this.Vf=new Set}return t.prototype.pf=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ji.d)(this,(function(r){switch(r.label){case 0:if(this.vf(),this.mutations.length>0)throw new Xu(Qu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(ji.d)(this,(function(u){switch(u.label){case 0:return n=Gu(t),r=Fl(n.serializer)+"/documents",i={documents:e.map((function(t){return Pl(n.serializer,t)}))},[4,n.Ru("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Ku(!!e.found);var n=Dl(t,e.found.name),r=Nl(e.found.updateTime),i=new Rh({mapValue:{fields:e.found.fields}});return new Lh(n,r,i,{})}(t,e):"missing"in e?function(t,e){Ku(!!e.missing),Ku(!!e.readTime);var n=Dl(t,e.missing),r=Nl(e.readTime);return new Fh(n,r)}(t,e):Wu()}(n.serializer,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());Ku(!!e),a.push(e)})),a)]}}))}))}(this.Nu,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof Fh||t instanceof Lh?n.bf(t):Wu()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.ef(t,this.rn(t))),this.Vf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.ef(t,this.Sf(t)))}catch(t){this.yf=t}this.Vf.add(t.toString())},t.prototype.delete=function(t){this.write([new Nh(t,this.rn(t))]),this.Vf.add(t.toString())},t.prototype.commit=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ji.d)(this,(function(n){switch(n.label){case 0:if(this.vf(),this.yf)throw this.yf;return t=this.Pf,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=fc.st(n);e.mutations.push(new jh(r,e.rn(r)))})),[4,function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return n=Gu(t),r=Fl(n.serializer)+"/documents",i={writes:e.map((function(t){return ql(n.serializer,t)}))},[4,n.Au("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Nu,this.mutations)];case 1:return n.sent(),this.gf=!0,[2]}}))}))},t.prototype.bf=function(t){var e;if(t instanceof Lh)e=t.version;else{if(!(t instanceof Fh))throw Wu();e=ac.min()}var n=this.Pf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Xu(Qu.ABORTED,"Document version changed between two reads.")}else this.Pf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Pf.get(t.toString());return!this.Vf.has(t.toString())&&e?yh.updateTime(e):yh.on()},t.prototype.Sf=function(t){var e=this.Pf.get(t.toString());if(!this.Vf.has(t.toString())&&e){if(e.isEqual(ac.min()))throw new Xu(Qu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yh.updateTime(e)}return yh.exists(!0)},t.prototype.write=function(t){this.vf(),this.mutations=this.mutations.concat(t)},t.prototype.vf=function(){},t}(),tm=function(){function t(t,e,n,r){this.di=t,this.Nu=e,this.updateFunction=n,this.Ti=r,this.Df=5,this.Si=new jf(this.di,"transaction_retry")}return t.prototype.run=function(){this.Cf()},t.prototype.Cf=function(){var t=this;this.Si.Bs((function(){return Object(ji.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(ji.d)(this,(function(r){return t=new $y(this.Nu),(e=this.Nf(t))&&e.then((function(e){n.di.Ri((function(){return t.commit().then((function(){n.Ti.resolve(e)})).catch((function(t){n.xf(t)}))}))})).catch((function(t){n.xf(t)})),[2]}))}))}))},t.prototype.Nf=function(t){try{var e=this.updateFunction(t);return!pc(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.xf=function(t){var e=this;this.Df>0&&this.Ff(t)?(this.Df-=1,this.di.Ri((function(){return e.Cf(),Promise.resolve()}))):this.Ti.reject(t)},t.prototype.Ff=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Tc(e)}return!1},t}(),em=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=Fu.UNAUTHENTICATED,this.clientId=nc.D(),this.Of=function(){},this.g=new Of,this.credentials.A((function(t){qu("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Of(t)),r.g.resolve()}))}return t.prototype.getConfiguration=function(){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}}))}))},t.prototype.Mf=function(t){var e=this;this.Of=t,this.g.promise.then((function(){return e.Of(e.user)}))},t.prototype.kf=function(){if(this.di.Ci)throw new Xu(Qu.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var e=new Of;return this.di.Ni((function(){return Object(ji.b)(t,void 0,void 0,(function(){var t,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.$f?[4,this.$f.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.Lf?[4,this.Lf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.R(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Kf(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function nm(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r=this;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return t.di.Li(),qu("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.Mf((function(n){return t.di.Mi((function(){return Object(ji.b)(r,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:return[4,pd(e.Cu,n)];case 1:return t.sent(),[2]}}))}))}))})),e.persistence.tc((function(){return t.terminate()})),t.Lf=e,[2]}}))}))}function rm(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return t.di.Li(),[4,im(t)];case 1:return n=i.sent(),qu("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.Mf((function(n){return t.di.Mi((function(){return function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return(n=Gu(t)).di.Li(),qu("RemoteStore","RemoteStore received new credentials"),r=Vd(n),n.Mu.add(3),[4,jd(n)];case 1:return i.sent(),r&&n.Bu.set("Unknown"),[4,n.xu.s_(e)];case 2:return i.sent(),n.Mu.delete(3),[4,Nd(n)];case 3:return i.sent(),[2]}}))}))}(e.Oh,n)}))})),t.$f=e,[2]}}))}))}function im(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return t.Lf?[3,2]:(qu("FirestoreClient","Using default OfflineComponentProvider"),[4,nm(t,new bv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.Lf]}}))}))}function om(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return t.$f?[3,2]:(qu("FirestoreClient","Using default OnlineComponentProvider"),[4,rm(t,new Cv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}}))}))}function sm(t){return im(t).then((function(t){return t.persistence}))}function am(t){return im(t).then((function(t){return t.Cu}))}function um(t){return om(t).then((function(t){return t.Oh}))}function cm(t){return om(t).then((function(t){return t.ga}))}function lm(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,om(t)];case 1:return e=r.sent(),[2,((n=e.Mh).Ju=Ag.bind(null,e.ga),n.Zu=xg.bind(null,e.ga),n)]}}))}))}function hm(t,e,n,r,i){var o=new Ev({next:function(o){e.Ri((function(){return og(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Xu(Qu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Xu(Qu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new cg(Bh(n.path),o,{includeMetadataChanges:!0,oa:!0});return ig(t,s)}function fm(t,e,n,r,i){var o=new Ev({next:function(n){e.Ri((function(){return og(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Xu(Qu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new cg(n,o,{includeMetadataChanges:!0,oa:!0});return ig(t,s)}var pm=function(){function t(t,e){this.U_=t,this.Bf=e,this.qf=[],this.Uf=!1,this.Qf=Ry(t)}return t.prototype.set=function(t,e,n){this.Kf();var r=dm(t,this.U_),i=Pm(r.j_,e,n),o=Uy(this.Qf,"WriteBatch.set",r.K_,i,null!==r.j_,n);return this.qf=this.qf.concat(o.ef(r.K_,yh.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Kf();var o,s=dm(t,this.U_);return e instanceof Ov&&(e=e.o_),o="string"==typeof e||e instanceof $v?By(this.Qf,"WriteBatch.update",s.K_,e,n,r):qy(this.Qf,"WriteBatch.update",s.K_,e),this.qf=this.qf.concat(o.ef(s.K_,yh.exists(!0))),this},t.prototype.delete=function(t){this.Kf();var e=dm(t,this.U_);return this.qf=this.qf.concat(new Nh(e.K_,yh.on())),this},t.prototype.commit=function(){return this.Kf(),this.Uf=!0,this.qf.length>0?this.Bf(this.qf):Promise.resolve()},t.prototype.Kf=function(){if(this.Uf)throw new Xu(Qu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function dm(t,e){if(t instanceof Ov&&(t=t.o_),t.firestore!==e)throw new Xu(Qu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var gm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).U_=e,r}return Object(ji.c)(e,t),e.prototype.get=function(e){var n=this,r=dm(e,this.U_),i=new uy(this.U_);return t.prototype.get.call(this,e).then((function(t){return new ry(n.U_,i,r.K_,t.W_,new Tm(!1,!1),r.j_)}))},e}(function(){function t(t,e){this.U_=t,this.Wf=e,this.Qf=Ry(t)}return t.prototype.get=function(t){var e=this,n=dm(t,this.U_),r=new xy(this.U_);return this.Wf.pf([n.K_]).then((function(t){if(!t||1!==t.length)return Wu();var i=t[0];if(i instanceof Fh)return new Yv(e.U_,r,n.K_,null,n.j_);if(i instanceof Lh)return new Yv(e.U_,r,i.key,i,n.j_);throw Wu()}))},t.prototype.set=function(t,e,n){var r=dm(t,this.U_),i=Pm(r.j_,e,n),o=Uy(this.Qf,"Transaction.set",r.K_,i,null!==r.j_,n);return this.Wf.set(r.K_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=dm(t,this.U_);return e instanceof Ov&&(e=e.o_),o="string"==typeof e||e instanceof $v?By(this.Qf,"Transaction.update",s.K_,e,n,r):qy(this.Qf,"Transaction.update",s.K_,e),this.Wf.update(s.K_,o),this},t.prototype.delete=function(t){var e=dm(t,this.U_);return this.Wf.delete(e.K_),this},t}()),vm=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ny(t);var n=mm(t),r=t.S_(),i=new Cv;return ey(n,i,new _v(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ny(t);var e=mm(t),n=t.S_(),r=new Cv;return ey(e,r,new wv(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.y_&&!t.V_)throw new Xu(Qu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Of;return t.z_.Ni((function(){return Object(ji.b)(e,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return Rf.Gs()?[4,Rf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(ld(t.R_,t.I_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.o_)},t}(),ym=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).jf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Lu||(i.Gf=e),i}return Object(ji.c)(e,t),Object.defineProperty(e.prototype,"R_",{get:function(){return this.o_.R_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.b_()),t)).merge,this.o_.v_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.b_().host&&Hu("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.di.enqueue((function(){return Object(ji.b)(e,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,sm(t)];case 1:return e=r.sent(),[4,um(t)];case 2:return n=r.sent(),[2,(e.ec(!0),function(t){var e=Gu(t);return e.Mu.delete(0),Nd(e)}(n))]}}))}))}))}(mm(this.o_))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.di.enqueue((function(){return Object(ji.b)(e,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,sm(t)];case 1:return e=r.sent(),[4,um(t)];case 2:return n=r.sent(),[2,(e.ec(!1),function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return(e=Gu(t)).Mu.add(0),[4,jd(e)];case 1:return n.sent(),e.Bu.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(mm(this.o_))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Sv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.jf.enableMultiTabIndexedDbPersistence(this):this.jf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.jf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Of;return t.di.Ri((function(){return Object(ji.b)(e,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return e=Lg,[4,cm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(mm(this.o_))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=mm(t),i=Tf(e)?e:{next:e},o=new Ev(i);return t.z_.Ri((function(){return Object(ji.b)(n,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(e){switch(e.label){case 0:return t=function(t,e){Gu(t).Hu.add(e),e.next()},[4,lm(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}}))}))})),function(){o.r_(),t.z_.Ri((function(){return Object(ji.b)(n,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(e){switch(e.label){case 0:return t=function(t,e){Gu(t).Hu.delete(e)},[4,lm(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}}))}))}))}}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Gf)throw new Xu(Qu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Gf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new jm(this,Ay(this.o_,t))}catch(t){throw Em(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Cm(this,ky(this.o_,t))}catch(t){throw Em(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new km(this,function(t,e){if(Iv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new dy(t,null,function(t){return new Uh(cc.X(),t)}(e))}(this.o_,t))}catch(t){throw Em(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Of;return t.di.Ri((function(){return Object(ji.b)(n,void 0,void 0,(function(){var n;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return om(t).then((function(t){return t.Nu}))}(t)];case 1:return n=i.sent(),new tm(t.di,n,e,r).run(),[2]}}))}))})),r.promise}(mm(t),(function(n){return e(new gm(t,n))}))}(this.o_,(function(n){return t(new _m(e,n))}))},e.prototype.batch=function(){var t=this;return mm(this.o_),new wm(new pm(this.o_,(function(e){return hy(t.o_,e)})))},e}(Ov);function mm(t){return t.H_||bm(t),t.H_.kf(),t.H_}function bm(t){var e=t.S_(),n=function(t,e,n){return new Mu(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.R_,t.I_,e);t.H_=new em(t.P_,t.z_,n)}var _m=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(ji.c)(e,t),e.prototype.get=function(t){var e=this,n=Rm(t);return this.o_.get(n).then((function(t){return new Sm(e.U_,t)}))},e.prototype.set=function(t,e,n){var r=Rm(t);return n?(Tv("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Rm(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(ji.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Rm(t);return this.o_.delete(e),this},e}(Ov),wm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.set=function(t,e,n){var r=Rm(t);return n?(Tv("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Rm(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(ji.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Rm(t);return this.o_.delete(e),this},e.prototype.commit=function(){return this.o_.commit()},e}(Ov),Cm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Q_=new Xv(e),r}return Object(ji.c)(e,t),e.zf=function(t,n,r){if(t.length%2!=0)throw new Xu(Qu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new e(n,new py(n.o_,r,new fc(t)))},e.q_=function(t,n,r){return new e(n,new py(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new jm(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new jm(this.firestore,Ay(this.o_,t))}catch(t){throw Em(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Ov&&(t=t.o_),t instanceof py&&Ny(this.o_,t)},e.prototype.set=function(t,e){e=Tv("DocumentReference.set",e);try{return function(t,e,n){var r=Nv(t.firestore,ty),i=Pm(t.j_,e,n);return hy(r,Uy(Ry(r),"setDoc",t.K_,i,null!==t.j_,n).ef(t.K_,yh.on()))}(this.o_,t,e)}catch(t){throw Em(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?cy(this.o_,t):cy.apply(void 0,Object(ji.g)([this.o_,t,e],n))}catch(t){throw Em(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return hy(Nv((t=this.o_).firestore,ty),[new Nh(t.K_,yh.on())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Om(e),i=Im(e,(function(e){return new Sm(t.firestore,new ry(t.firestore.o_,t.Q_,e.K_,e.W_,e.metadata,t.o_.j_))}));return ly(this.o_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=Nv(t.firestore,ty),r=mm(n),i=new uy(n),o=new Of;return n.z_.Ri((function(){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return[4,am(r)];case 1:return[4,function(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Gu(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Oc.cs(t,e)}))}(t,e)];case 1:return(r=s.sent())instanceof Lh?n.resolve(r):r instanceof Fh?n.resolve(null):n.reject(new Xu(Qu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=Kf(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))}(e.sent(),t.K_,o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return new ry(n,i,t.K_,e,new Tm(e instanceof Lh&&e.an,!0),t.j_)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=Nv(t.firestore,ty),r=mm(n),i=new Of;return n.z_.Ri((function(){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return[4,lm(r)];case 1:return[4,hm(e.sent(),n.z_,t.K_,{source:"server"},i)];case 2:return e.sent(),[2]}}))}))})),i.promise.then((function(e){return fy(n,t,e)}))}(this.o_):function(t){var e=this,n=Nv(t.firestore,ty),r=mm(n),i=new Of;return n.z_.Ri((function(){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return[4,lm(r)];case 1:return[4,hm(e.sent(),n.z_,t.K_,{source:"default"},i)];case 2:return e.sent(),[2]}}))}))})),i.promise.then((function(e){return fy(n,t,e)}))}(this.o_)).then((function(t){return new Sm(e.firestore,new ry(e.firestore.o_,e.Q_,t.K_,t.W_,t.metadata,e.o_.j_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(Ov);function Em(t,e,n){return t.message=t.message.replace(e,n),t}function Om(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Tf(r))return r}return{}}function Im(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Tf(t[0])?t[0]:Tf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Tm=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Sm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(ji.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Cm(this.U_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return ay(this.o_,t.o_)},e}(Ov),Am=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(Sm),km=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r}return Object(ji.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,vy(this.o_,function(t,e,n){var r=e,i=Zv("where",t);return new yy(i,r,n)}(t,n,r)))}catch(t){throw Em(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,vy(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=Zv("orderBy",t);return new my(r,n)}(t,n)))}catch(t){throw Em(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,vy(this.o_,function(t){return jv("limit",t),new by("limit",t,"F")}(t)))}catch(t){throw Em(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,vy(this.o_,function(t){return jv("limitToLast",t),new by("limitToLast",t,"L")}(t)))}catch(t){throw Em(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vy(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _y("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Em(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vy(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _y("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Em(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vy(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wy("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Em(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vy(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wy("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Em(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return jy(this.o_,t.o_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=Nv(t.firestore,ty),r=mm(n),i=new uy(n),o=new Of;return n.z_.Ri((function(){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return[4,am(r)];case 1:return[4,function(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(ji.d)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,_d(t,e,!0)];case 1:return r=c.sent(),i=new Og(e,r.Bc),o=i.gh(r.documents),s=i.Zn(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=c.sent(),u=Kf(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))}(e.sent(),t.tf,o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return new oy(n,i,t,e)}))}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=Nv(t.firestore,ty),r=mm(n),i=new uy(n),o=new Of;return n.z_.Ri((function(){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return[4,lm(r)];case 1:return[4,fm(e.sent(),n.z_,t.tf,{source:"server"},o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return new oy(n,i,t,e)}))}(this.o_):function(t){var e=this,n=Nv(t.firestore,ty),r=mm(n),i=new uy(n);Ty(t.tf);var o=new Of;return n.z_.Ri((function(){return Object(ji.b)(e,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return[4,lm(r)];case 1:return[4,fm(e.sent(),n.z_,t.tf,{source:"default"},o)];case 2:return e.sent(),[2]}}))}))})),o.promise.then((function(e){return new oy(n,i,t,e)}))}(this.o_)).then((function(t){return new Nm(e.firestore,t)}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Om(e),i=Im(e,(function(e){return new Nm(t.firestore,e)}));return ly(this.o_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(Ov),xm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(ji.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Am(this.U_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),e}(Ov),Nm=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(ji.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new km(this.U_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map((function(e){return new Am(t.U_,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map((function(t){return new xm(e.U_,t)}))},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach((function(r){t.call(e,new Am(n.U_,r))}))},e.prototype.isEqual=function(t){return ay(this.o_,t.o_)},e}(Ov),jm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(ji.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new Cm(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Cm(this.firestore,void 0===t?ky(this.o_):ky(this.o_,t))}catch(t){throw Em(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Nv(t.firestore,ty),r=ky(t),i=Pm(t.j_,e);return hy(n,Uy(Ry(t.firestore),"addDoc",r.K_,i,null!==t.j_,{}).ef(r.K_,yh.exists(!1))).then((function(){return r}))}(this.o_,t).then((function(t){return new Cm(e.firestore,t)}))},e.prototype.isEqual=function(t){return Ny(this.o_,t.o_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(km);function Rm(t){return t instanceof Ov&&(t=t.o_),Nv(t,py)}function Pm(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Dm,Mm=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new($v.bind.apply($v,Object(ji.g)([void 0],e))))||this}return Object(ji.c)(e,t),e.documentId=function(){return new e(hc.et().J())},e.prototype.isEqual=function(t){return t instanceof Ov&&(t=t.o_),t instanceof $v&&this.o_.G_.isEqual(t.G_)},e}(Ov),Lm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ji.c)(e,t),e.serverTimestamp=function(){var t=new Mv("serverTimestamp");return t.c_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Pv("deleteField");return t.c_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lv("arrayUnion",t)}).apply(void 0,t);return r.c_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fv("arrayRemove",t)}).apply(void 0,t);return r.c_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Vv("increment",t)}(t);return n.c_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(Ov),Fm={Firestore:ym,GeoPoint:Uv,Timestamp:sc,Blob:Gv,Transaction:_m,WriteBatch:wm,DocumentReference:Cm,DocumentSnapshot:Sm,Query:km,QueryDocumentSnapshot:Am,QuerySnapshot:Nm,CollectionReference:jm,FieldPath:Mm,FieldValue:Lm,setLogLevel:function(t){Vu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Du.a("firestore",(function(t){return function(t,e){return new ym(t,new ty(t,e),new vm)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Fm)))})(Dm=Ni.a),Dm.registerVersion("@firebase/firestore","2.0.4");var Vm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Um=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(ji.c)(e,t),e}(Error),qm=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function Bm(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var Hm,zm,Wm,Km=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return Bm(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?Bm(t,(function(t){return e.decode(t)})):t},t}(),Gm=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Km,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new qm(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(a){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Object(ji.d)(this,(function(p){switch(p.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=p.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new Um("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([Qm(u,this.postJSON(r,i,o)),c,Qm(u,this.cancelAllRequests)])];case 2:if(!(l=p.sent()))throw new Um("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Vm[a])return new Um("internal","internal");r=Vm[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new Um(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new Um("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new Um("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}}))}))},t}();function Qm(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}Hm=Ni.a,zm=fetch.bind(self),Wm={Functions:Gm},Hm.INTERNAL.registerComponent(new Du.a("functions",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new Gm(n,r,i,e,zm)}),"PUBLIC").setServiceProps(Wm).setMultipleInstances(!0)),Ni.a.registerVersion("@firebase/functions","0.6.1");var Xm,Ym=n("nbvr"),Jm="w:0.4.19",Zm=((Xm={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Xm["not-registered"]="Firebase Installation is not registered.",Xm["installation-not-found"]="Firebase Installation not found.",Xm["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Xm["app-offline"]="Could not process request. Application offline.",Xm["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Xm),$m=new Pi.b("installations","Installations",Zm);function tb(t){return t instanceof Pi.c&&t.code.includes("request-failed")}function eb(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function nb(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function rb(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,$m.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function ib(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function ob(t,e){var n=e.refreshToken,r=ib(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function sb(t){return Object(ji.b)(this,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function ab(t,e){var n=e.fid;return Object(ji.b)(this,void 0,void 0,(function(){var e,r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return e=eb(t),r=ib(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:Jm})},[4,sb((function(){return fetch(e,i)}))];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:nb(s.authToken)}];case 3:return[4,rb("Create Installation",o)];case 4:throw a.sent()}}))}))}function ub(t){return new Promise((function(e){setTimeout(e,t)}))}var cb=/^[cdef][\w-]{21}$/;function lb(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(ji.f)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return cb.test(e)?e:""}catch(n){return""}}function hb(t){return t.appName+"!"+t.appId}var fb=new Map;function pb(t,e){var n=hb(t);db(n,e),function(t,e){var n=vb();n&&n.postMessage({key:t,fid:e}),yb()}(n,e)}function db(t,e){var n,r,i=fb.get(t);if(i)try{for(var o=Object(ji.h)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var gb=null;function vb(){return!gb&&"BroadcastChannel"in self&&((gb=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){db(t.data.key,t.data.fid)}),gb}function yb(){0===fb.size&&gb&&(gb.close(),gb=null)}var mb,bb="firebase-installations-store",_b=null;function wb(){return _b||(_b=Object(Ym.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(bb)}}))),_b}function Cb(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return n=hb(t),[4,wb()];case 1:return r=a.sent(),i=r.transaction(bb,"readwrite"),[4,(o=i.objectStore(bb)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||pb(t,e.fid),[2,e]}}))}))}function Eb(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return e=hb(t),[4,wb()];case 1:return n=i.sent(),[4,(r=n.transaction(bb,"readwrite")).objectStore(bb).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ob(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(ji.d)(this,(function(u){switch(u.label){case 0:return n=hb(t),[4,wb()];case 1:return r=u.sent(),i=r.transaction(bb,"readwrite"),[4,(o=i.objectStore(bb)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||pb(t,a.fid),[2,a]}}))}))}function Ib(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,Ob(t,(function(n){var r=function(t){return Ab(t||{fid:lb(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject($m.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,ab(t,e)];case 1:return n=i.sent(),[2,Cb(t,n)];case 2:return tb(r=i.sent())&&409===r.customData.serverCode?[4,Eb(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Cb(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Tb(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function Tb(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return[4,Sb(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,ub(100)];case 3:return o.sent(),[4,Sb(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Ib(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function Sb(t){return Ob(t,(function(t){if(!t)throw $m.create("installation-not-found");return Ab(t)}))}function Ab(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function kb(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(ji.b)(this,void 0,void 0,(function(){var t,i,o,s,a;return Object(ji.d)(this,(function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return eb(t)+"/"+n+"/authTokens:generate"}(n,e),i=ob(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Jm}})},[4,sb((function(){return fetch(t,s)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,nb(u.sent())];case 3:return[4,rb("Generate Auth Token",a)];case 4:throw u.sent()}}))}))}function xb(t,e){return void 0===e&&(e=!1),Object(ji.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return[4,Ob(t.appConfig,(function(r){if(!jb(r))throw $m.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,Nb(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,ub(100)];case 3:return i.sent(),[4,Nb(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,xb(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw $m.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(ji.a)(Object(ji.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,kb(t,e)];case 1:return n=o.sent(),i=Object(ji.a)(Object(ji.a)({},e),{authToken:n}),[4,Cb(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!tb(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Eb(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(ji.a)(Object(ji.a)({},e),{authToken:{requestStatus:0}}),[4,Cb(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,s),s}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function Nb(t){return Ob(t,(function(t){if(!jb(t))throw $m.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(ji.a)(Object(ji.a)({},t),{authToken:{requestStatus:0}}):t}))}function jb(t){return void 0!==t&&2===t.registrationStatus}function Rb(t){return Object(ji.b)(this,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return[4,Ib(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function Pb(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return eb(t)+"/"+n}(t,e),r=ob(t,e),i={method:"DELETE",headers:r},[4,sb((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,rb("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function Db(t){return $m.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new Du.a("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Db("App Configuration");if(!t.name)throw Db("App Name");try{for(var r=Object(ji.h)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Db(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,Ib(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):xb(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(n){switch(n.label){case 0:return[4,Rb(t.appConfig)];case 1:return n.sent(),[4,xb(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,Ob(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw $m.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw $m.create("app-offline");case 3:return[4,Pb(e,n)];case 4:return r.sent(),[4,Eb(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){vb();var n=hb(t),r=fb.get(n);r||(r=new Set,fb.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=hb(t),r=fb.get(n);r&&(r.delete(e),0===r.size&&fb.delete(n),yb())}(n,e)}}(n,t)}}}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(Ni.a);var Mb=((mb={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',mb["only-available-in-window"]="This method is available in a Window context.",mb["only-available-in-sw"]="This method is available in a service worker context.",mb["permission-default"]="The notification permission was not granted and dismissed instead.",mb["permission-blocked"]="The notification permission was not granted and blocked instead.",mb["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",mb["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",mb["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",mb["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",mb["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",mb["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",mb["token-update-no-token"]="FCM returned no token when updating the user to push.",mb["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",mb["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",mb["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",mb["invalid-vapid-key"]="The public VAPID key must be a string.",mb["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",mb),Lb=new Pi.b("messaging","Messaging",Mb),Fb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Vb=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function Ub(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(ji.f)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qb(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var Bb="fcm_token_details_db",Hb="fcm_token_object_Store";function zb(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(Bb))return[2,null];r.label=2;case 2:return e=null,[4,Object(Ym.openDb)(Bb,5,(function(r){return Object(ji.b)(n,void 0,void 0,(function(){var n,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(Hb)?[4,(n=r.transaction.objectStore(Hb)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:Ub(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Ub(o.auth),p256dh:Ub(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Ub(o.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,Object(Ym.deleteDb)(Bb)];case 4:return r.sent(),[4,Object(Ym.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(Ym.deleteDb)("undefined")];case 6:return r.sent(),[2,Wb(e)?e:null]}}))}))}function Wb(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var Kb="firebase-messaging-store",Gb=null;function Qb(){return Gb||(Gb=Object(Ym.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(Kb)}}))),Gb}function Xb(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return e=Zb(t),[4,Qb()];case 1:return[4,i.sent().transaction(Kb).objectStore(Kb).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,zb(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Yb(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Yb(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return n=Zb(t),[4,Qb()];case 1:return r=o.sent(),[4,(i=r.transaction(Kb,"readwrite")).objectStore(Kb).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Jb(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return e=Zb(t),[4,Qb()];case 1:return n=i.sent(),[4,(r=n.transaction(Kb,"readwrite")).objectStore(Kb).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Zb(t){return t.appConfig.appId}function $b(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return[4,r_(t)];case 1:n=a.sent(),r=i_(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(n_(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),Lb.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw Lb.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw Lb.create("token-subscribe-no-token");return[2,o.token]}}))}))}function t_(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return[4,r_(t)];case 1:n=a.sent(),r=i_(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(n_(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),Lb.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw Lb.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw Lb.create("token-update-no-token");return[2,o.token]}}))}))}function e_(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return[4,r_(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(n_(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw Lb.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),Lb.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}}))}))}function n_(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function r_(t){var e=t.appConfig,n=t.installations;return Object(ji.b)(this,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function i_(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==Fb&&(n.web.applicationPubKey=e),n}function o_(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw Lb.create("permission-blocked");return[4,c_(e,n)];case 1:return r=a.sent(),[4,Xb(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Ub(r.getKey("auth")),p256dh:Ub(r.getKey("p256dh"))},i?[3,3]:[2,u_(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,e_(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,u_(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,a_({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l}))}))}function s_(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,Xb(t)];case 1:return(n=i.sent())?[4,e_(t,n.token)]:[3,4];case 2:return i.sent(),[4,Jb(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function a_(t,e,n){return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,t_(e,t)];case 1:return r=s.sent(),i=Object(ji.a)(Object(ji.a)({},t),{token:r,createTime:Date.now()}),[4,Yb(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,s_(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function u_(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,$b(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Yb(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function c_(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qb(e)})]}}))}))}function l_(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function h_(t){return new Promise((function(e){setTimeout(e,t)}))}var f_=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Lb.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(ji.b)(this,void 0,void 0,(function(){var n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Xb(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Fb,r.label=2;case 2:return[2,o_(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return s_(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw Lb.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Lb.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Lb.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw Lb.create("only-available-in-window")},t.prototype.onMessage=function(){throw Lb.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw Lb.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,v_()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,g_(n,e)]:(r=!1,e.notification?[4,y_(p_(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,h_(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(ji.b)(this,void 0,void 0,(function(){var r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,s_(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,Xb(this.firebaseDependencies)];case 3:return r=i.sent(),[4,s_(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,o_(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Fb)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(ji.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(ji.d)(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(l_(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,d_(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,h_(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=Vb.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function p_(t){var e,n=Object(ji.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function d_(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return Object(ji.d)(this,(function(u){switch(u.label){case 0:return[4,v_()];case 1:e=u.sent();try{for(n=Object(ji.h)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function g_(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Vb.PUSH_RECEIVED;try{for(var i=Object(ji.h)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function v_(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function y_(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var m_=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===Vb.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),l_(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw Lb.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,o_(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Fb),[2]}))}))},t.prototype.updateSwReg=function(t){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Lb.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),Lb.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,s_(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw Lb.create("denied"===t?"permission-blocked":"permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Lb.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Lb.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Lb.create("invalid-sw-registration");if(this.swRegistration)throw Lb.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw Lb.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw Lb.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case Vb.NOTIFICATION_CLICKED:return"notification_open";case Vb.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function b_(t){return Lb.create("missing-app-config-values",{valueName:t})}var __={isSupported:w_};function w_(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Ni.a.INTERNAL.registerComponent(new Du.a("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw b_("App Configuration Object");if(!t.name)throw b_("App Name");var r=t.options;try{for(var i=Object(ji.h)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw b_(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!w_())throw Lb.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new f_(n):new m_(n)}),"PUBLIC").setServiceProps(__));var C_="firebasestorage.googleapis.com",E_=function(t){function e(n,r){var i=t.call(this,S_(n),"Firebase Storage: "+r+" ("+S_(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(ji.c)(e,t),e.prototype.codeEquals=function(t){return S_(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Pi.c),O_="canceled",I_="invalid-argument",T_="unsupported-environment";function S_(t){return"storage/"+t}function A_(){return new E_("unknown","An unknown error occurred, please check the error payload for server response.")}function k_(){return new E_(O_,"User canceled the upload/download.")}function x_(){return new E_("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function N_(t){return new E_(I_,t)}function j_(){return new E_("app-deleted","The Firebase app was deleted.")}function R_(t){return new E_("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function P_(t,e){return new E_("invalid-format","String does not match format '"+t+"': "+e)}function D_(t){throw new E_("internal-error","Internal error: "+t)}var M_={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},L_=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function F_(t,e){switch(t){case M_.RAW:return new L_(V_(e));case M_.BASE64:case M_.BASE64URL:return new L_(U_(t,e));case M_.DATA_URL:return new L_((n=new q_(e)).base64?U_(M_.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw P_(M_.DATA_URL,"Malformed data URL.")}return V_(e)}(n.rest),new q_(e).contentType)}var n;throw A_()}function V_(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function U_(t,e){switch(t){case M_.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw P_(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case M_.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw P_(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw P_(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var q_=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw P_(M_.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),B_={STATE_CHANGED:"state_changed"},H_="running",z_="pausing",W_="paused",K_="success",G_="canceling",Q_="canceled",X_="error",Y_={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function J_(t){switch(t){case H_:case z_:case G_:return Y_.RUNNING;case W_:return Y_.PAUSED;case K_:return Y_.SUCCESS;case Q_:return Y_.CANCELED;case X_:default:return Y_.ERROR}}var Z_=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),$_=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Z_.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Z_.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Z_.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw D_("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw D_("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw D_("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw D_("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),tw=function(){function t(){}return t.prototype.createXhrIo=function(){return new $_},t}();function ew(t){return"string"==typeof t||t instanceof String}function nw(t){return rw()&&t instanceof Blob}function rw(){return"undefined"!=typeof Blob}function iw(t,e,n,r){if(r<e)throw new E_(I_,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new E_(I_,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function ow(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function sw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ow();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(rw())return new Blob(t);throw new E_(T_,"This browser doesn't seem to support creating Blobs")}var aw=function(){function t(t,e){var n=0,r="";nw(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(nw(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(rw()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(sw.apply(null,r))}var i=e.map((function(t){return ew(t)?F_(M_.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),uw=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new E_("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=C_.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new E_("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function cw(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function lw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function hw(t){return"https://"+C_+"/v0"+t}function fw(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function pw(t,e){return e}var dw=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||pw}}(),gw=null;function vw(){if(gw)return gw;var t=[];t.push(new dw("bucket")),t.push(new dw("generation")),t.push(new dw("metageneration")),t.push(new dw("name","fullPath",!0));var e=new dw("name");e.xform=function(t,e){return function(t){return!ew(t)||t.length<2?t:lw(t)}(e)},t.push(e);var n=new dw("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new dw("timeCreated")),t.push(new dw("updated")),t.push(new dw("md5Hash",null,!0)),t.push(new dw("cacheControl",null,!0)),t.push(new dw("contentDisposition",null,!0)),t.push(new dw("contentEncoding",null,!0)),t.push(new dw("contentLanguage",null,!0)),t.push(new dw("contentType",null,!0)),t.push(new dw("metadata","customMetadata",!0)),gw=t}function yw(t,e,n){var r=cw(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new uw(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function mw(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var bw=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function _w(t){if(!t)throw A_()}function ww(t,e){return function(n,r){var i=yw(t,r,e);return _w(null!==i),i}}function Cw(t){return function(e,n){var r;return(r=401===e.getStatus()?new E_("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new E_("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new E_("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Ew(t){var e=Cw(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new E_("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Ow(t,e,n){var r=hw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new bw(r,"GET",ww(t,n),i);return o.errorHandler=Ew(e),o}function Iw(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Tw=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Sw(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){_w(!1)}return _w(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Aw=262144,kw=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),xw=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function Nw(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var jw=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=vw(),this._resumable=this._shouldDoResumable(this._blob),this._state=H_,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(O_)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(X_))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(O_)?r.completeTransitions_():(r._error=t,r._transition(X_))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===H_&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then((function(n){switch(e._state){case H_:t(n);break;case G_:e._transition(Q_);break;case z_:e._transition(W_)}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Iw(e,r,i),a={name:s.fullPath},u=hw(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=mw(s,n),h=new bw(u,"POST",(function(t){var e;Sw(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){_w(!1)}return _w(ew(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Cw(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=new bw(n,"POST",(function(t){var e=Sw(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){_w(!1)}n||_w(!1);var i=Number(n);return _w(!isNaN(i)),new Tw(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Cw(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=Aw*this._chunkMultiplier,n=new Tw(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new Tw(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new E_("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,h+l);if(null===p)throw x_();var d=new bw(n,"POST",(function(t,n){var i,s=Sw(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?ww(e,o)(t,n):null,new Tw(a,c,"final"===s,i)}),e.maxUploadRetryTime);return d.headers=f,d.body=p.uploadData(),d.progressCallback=a||null,d.errorHandler=Cw(t),d}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition(X_)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(K_)):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){Aw*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=Ow(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition(K_)}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Iw(e,r,i),c=mw(u,n),l=aw.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw x_();var h={name:u.fullPath},f=hw(o),p=t.maxUploadRetryTime,d=new bw(f,"POST",ww(t,n),p);return d.urlParams=h,d.headers=s,d.body=l.uploadData(),d.errorHandler=Cw(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(K_)}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case G_:case z_:this._state=t,void 0!==this._request&&this._request.cancel();break;case H_:var e=this._state===W_;this._state=t,e&&(this._notifyObservers(),this._start());break;case W_:this._state=t,this._notifyObservers();break;case Q_:this._error=k_(),this._state=t,this._notifyObservers();break;case X_:case K_:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case z_:this._transition(W_);break;case G_:this._transition(Q_);break;case H_:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=J_(this._state);return new xw(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new kw(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(J_(this._state)){case Y_.SUCCESS:Nw(this._resolve.bind(null,this.snapshot))();break;case Y_.CANCELED:case Y_.ERROR:Nw(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(J_(this._state)){case Y_.RUNNING:case Y_.PAUSED:t.next&&Nw(t.next.bind(t,this.snapshot))();break;case Y_.SUCCESS:t.complete&&Nw(t.complete.bind(t))();break;case Y_.CANCELED:case Y_.ERROR:t.error&&Nw(t.error.bind(t,this._error))();break;default:t.error&&Nw(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===W_||this._state===z_;return t&&this._transition(H_),t},t.prototype.pause=function(){var t=this._state===H_;return t&&this._transition(z_),t},t.prototype.cancel=function(){var t=this._state===H_||this._state===z_;return t&&this._transition(G_),t},t}(),Rw=function(){function t(t,e){this._service=t,this._location=e instanceof uw?e:uw.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new uw(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return lw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new uw(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw R_(t)},t}();function Pw(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&iw("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=hw(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new bw(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=cw(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new uw(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new uw(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return _w(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Cw(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}}))}))}function Dw(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new uw(t._location.bucket,n);return new Rw(t.storage,r)}var Mw=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Lw=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new Mw(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Mw(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Mw(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Mw(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Fw=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Vw(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Vw(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Vw=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Dw(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Lw(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new jw(t,new aw(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=M_.RAW),this._throwIfRoot("putString"),new Lw(function(t,e,n,r){void 0===n&&(n=M_.RAW),t._throwIfRoot("putString");var i=F_(n,e),o=Object(ji.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new jw(t,new aw(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t,e,n=this;return(t=this._delegate,e={prefixes:[],items:[]},function t(e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return[4,Pw(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))).then((function(t){return new Fw(t,n.storage)}))},t.prototype.list=function(t){var e=this;return Pw(this._delegate,t).then((function(t){return new Fw(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=Ow(t.storage,t._location,vw()),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=hw(e.fullServerUrl()),o=mw(n,r),s=t.maxOperationRetryTime,a=new bw(i,"PATCH",ww(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Ew(e),a}(t.storage,t._location,e,vw()),[2,t.storage.makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=hw(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new bw(r,"GET",function(t,e){return function(n,r){var i=yw(t,r,e);return _w(null!==i),function(t,e){var n=cw(e);if(null===n)return null;if(!ew(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return hw("/b/"+i(t.bucket)+"/o/"+i(n))+fw({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=Ew(e),o}(t.storage,t._location,vw()),[2,t.storage.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new E_("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=hw(e.fullServerUrl()),r=new bw(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Ew(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw R_(t)},t}(),Uw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),qw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=A_()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?j_():k_():new E_("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Bw(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Bw(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Z_.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Bw(s,n))}else{var a=n.getErrorCode()===Z_.ABORT;e(!1,new Bw(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(ji.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(ji.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,d(!0)}),r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Bw=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Hw(t){return/^[A-Za-z]+:\/\//.test(t)}function zw(t,e){if(e&&Hw(e)){if(t instanceof Ww)return new Rw(t,e);throw N_("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof Ww){var r=e;if(null==r._bucket)throw new E_("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new Rw(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw N_('`path` param cannot contain ".."');return Dw(e,n)}return e}(t,e)}var Ww=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?uw.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:uw.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){iw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){iw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new Rw(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new Uw(j_());var r=function(t,e,n,r){var i=fw(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==Ni.a?Ni.a.SDK_VERSION:"AppManager")}(s),new qw(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),Kw=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Hw(t))throw N_("ref() expected a child path but got a URL, use refFromURL instead.");return new Vw(zw(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Hw(t))throw N_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{uw.makeFromUrl(t)}catch(e){throw N_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Vw(zw(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function Gw(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Kw(n,new Ww(n,r,new tw,e))}!function(t){var e={TaskState:Y_,TaskEvent:B_,StringFormat:M_,Storage:Ww,Reference:Vw};t.INTERNAL.registerComponent(new Du.a("storage",Gw,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}(Ni.a);var Qw,Xw,Yw,Jw="0.4.4",Zw=Jw,$w="FB-PERF-TRACE-MEASURE",tC="_wt_",eC="_fcp",nC="_fid",rC="@firebase/performance/config",iC="@firebase/performance/configexpire",oC="Performance",sC=((Qw={})["trace started"]="Trace {$traceName} was started before.",Qw["trace stopped"]="Trace {$traceName} is not running.",Qw["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Qw["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Qw["no window"]="Window is not available.",Qw["no app id"]="App id is not available.",Qw["no project id"]="Project id is not available.",Qw["no api key"]="Api key is not available.",Qw["invalid cc log"]="Attempted to queue invalid cc event",Qw["FB not default"]="Performance can only start when Firebase app instance is the default one.",Qw["RC response not ok"]="RC response is not ok",Qw["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Qw["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Qw["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Qw["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Qw),aC=new Pi.b("performance",oC,sC),uC=new Ri.b(oC);uC.logLevel=Ri.a.INFO;var cC,lC=function(){function t(t){if(this.window=t,!t)throw aC.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(Pi.w)()||(uC.info("IndexedDB is not supported by current browswer"),!1):(uC.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===Xw&&(Xw=new t(Yw)),Xw},t}();function hC(t,e){var n=t.length-e.length;if(n<0||n>1)throw aC.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var fC,pC=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=hC("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=hC("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw aC.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw aC.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw aC.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===cC&&(cC=new t),cC},t}();function dC(){return fC}var gC=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),vC=["firebase_","google_","ga_"],yC=new RegExp("^[a-zA-Z]\\w*$");function mC(){var t=lC.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function bC(){switch(lC.getInstance().document.visibilityState){case"visible":return gC.VISIBLE;case"hidden":return gC.HIDDEN;default:return gC.UNKNOWN}}function _C(){var t=lC.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function wC(t){if(!t)return t;var e=pC.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=CC(e.tracesSamplingRate),e.logNetworkAfterSampling=CC(e.networkRequestsSamplingRate),t}function CC(t){return Math.random()<=t}var EC,OC=1;function IC(){return OC=2,EC=EC||function(){var t=lC.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=pC.getInstance().installationsService.getId()).then((function(t){fC=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=lC.getInstance().localStorage;if(t){var e=t.getItem(iC);if(e&&Number(e)>Date.now()){var n=t.getItem(rC);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(wC(e),Promise.resolve()):function(t){return(e=pC.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+pC.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+pC.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:pC.getInstance().getAppId(),app_version:Zw,sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw aC.create("RC response not ok")}))})).catch((function(){uC.info("Could not fetch config, will use default configs")}));var e}(t).then(wC).then((function(t){return function(t){var e=lC.getInstance().localStorage;t&&e&&(e.setItem(rC,JSON.stringify(t)),e.setItem(iC,String(Date.now()+60*pC.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return TC()}),(function(){return TC()}))}function TC(){OC=3}var SC,AC=1e4,kC=3,xC=[],NC=!1;function jC(t){if(!t.eventTime||!t.message)throw aC.create("invalid cc log");xC=Object(ji.g)(xC,[t])}function RC(t,e){var n;SC||(n=MC,SC=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];jC({message:n.apply(void 0,t),eventTime:Date.now()})}),SC(t,e)}function PC(t){var e=pC.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&lC.getInstance().requiredApisAvailable()&&(t.isAuto&&bC()!==gC.VISIBLE||(3===OC?DC(t):IC().then((function(){return DC(t)}),(function(){return DC(t)}))))}function DC(t){if(dC()){var e=pC.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return RC(t,1)}),0)}}function MC(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:LC(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:LC(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function LC(){return{google_app_id:pC.getInstance().getAppId(),app_instance_id:dC(),web_app_info:{sdk_version:Zw,page_url:lC.getInstance().getUrl(),service_worker_status:mC(),visibility_state:bC(),effective_connection_type:_C()},application_process_state:0}}var FC=["_fp",eC,nC],VC=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=lC.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw aC.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw aC.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),PC(this)},t.prototype.record=function(t,e,n){if(t<=0)throw aC.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw aC.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(ji.a)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}PC(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(tC)&&FC.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw aC.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&uC.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||vC.some((function(e){return t.startsWith(e)}))||!t.match(yC))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw aC.create("invalid attribute name",{attributeName:t});if(!r)throw aC.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(ji.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=lC.getInstance().getUrl();if(i){var o=new t(tC+i,!0),s=Math.floor(1e3*lC.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(eC,Math.floor(1e3*u.startTime)),r&&o.putMetric(nC,Math.floor(1e3*r))}PC(o)}},t.createUserTimingTrace=function(e){PC(new t(e,!1,e))},t}();function UC(t){var e=t;if(e&&void 0!==e.responseStart){var n=lC.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=pC.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return RC(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function qC(){dC()&&(setTimeout((function(){return function(){var t=lC.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){VC.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),VC.createOobTrace(e,n,t))}))}else VC.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=lC.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)UC(n[e]);t.setupObserver("resource",UC)}()}),0),setTimeout((function(){return function(){for(var t=lC.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)BC(n[e]);t.setupObserver("measure",BC)}()}),0))}function BC(t){var e=t.name;e.substring(0,$w.length)!==$w&&VC.createUserTimingTrace(e)}var HC=function(){function t(t){this.app=t,lC.getInstance().requiredApisAvailable()&&Object(Pi.N)().then((function(t){t&&(NC||(function t(e){setTimeout((function(){if(0!==kC)return xC.length?void function(){var e=Object(ji.g)(xC);xC=[];var n=e.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}));(function(e,n){return function(t){var e=pC.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(e).then((function(t){return t.ok||uC.info("Call to Firebase backend failed."),t.json()})).then((function(e){var r=Number(e.nextRequestWaitMillis),i=AC;isNaN(r)||(i=Math.max(r,i));var o=e.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(xC=Object(ji.g)(n,xC),uC.info("Retry transport request later.")),kC=3,t(i)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:pC.getInstance().logSource,log_event:n},e).catch((function(){xC=Object(ji.g)(e,xC),kC--,uC.info("Tries left: "+kC+"."),t(AC)}))}():t(AC)}),e)}(5500),NC=!0),IC().then(qC,qC))})).catch((function(t){uC.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new VC(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return pC.getInstance().instrumentationEnabled},set:function(t){pC.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return pC.getInstance().dataCollectionEnabled},set:function(t){pC.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new Du.a("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw aC.create("FB not default");if("undefined"==typeof window)throw aC.create("no window");return function(t){Yw=t}(window),pC.getInstance().firebaseAppInstance=t,pC.getInstance().installationsService=e,new HC(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance",Jw)}(Ni.a);var zC,WC="https://www.googletagmanager.com/gtag/js",KC=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),GC=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),QC=new Ri.b("@firebase/analytics");function XC(t,e,n,r,i,o){return Object(ji.b)(this,void 0,void 0,(function(){var s,a,u,c;return Object(ji.d)(this,(function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),QC.error(c),[3,8];case 8:return t(KC.CONFIG,i,o),[2]}}))}))}function YC(t,e,n,r,i){return Object(ji.b)(this,void 0,void 0,(function(){var o,s,a,u,c,l,h;return Object(ji.d)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(KC.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),QC.error(h),[3,5];case 5:return[2]}}))}))}var JC=((zC={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",zC["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",zC["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",zC["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zC["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zC["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",zC["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",zC["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',zC["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',zC),ZC=new Pi.b("analytics","Analytics",JC),$C=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function tE(t){var e;return Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(ji.d)(this,(function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw ZC.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c}))}))}function eE(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=$C),Object(ji.b)(this,void 0,void 0,(function(){var e,s,a,u,c,l,h;return Object(ji.d)(this,(function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,nE(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return QC.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,tE(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof Pi.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return QC.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Object(Pi.j)(o,r.intervalMillis,30):Object(Pi.j)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),QC.debug("Calling attemptFetch again in "+l+" millis"),[2,eE(t,h,n,r)];case 7:return[2]}}))}))}function nE(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(ZC.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var rE,iE,oE=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),sE={},aE=[],uE={},cE="dataLayer",lE="gtag",hE=!1;function fE(t){if(hE)throw ZC.create("already-initialized");t.dataLayerName&&(cE=t.dataLayerName),t.gtagName&&(lE=t.gtagName)}var pE="analytics";function dE(){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:if(Object(Pi.s)())return[2,!1];if(!Object(Pi.e)())return[2,!1];if(!Object(Pi.w)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(Pi.N)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new Du.a(pE,(function(t){return function(t,e){!function(){var t=[];if(Object(Pi.s)()&&t.push("This is a browser extension environment."),Object(Pi.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=ZC.create("invalid-analytics-context",{errorInfo:e});QC.warn(n.message)}}();var n=t.options.appId;if(!n)throw ZC.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ZC.create("no-api-key");QC.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=sE[n])throw ZC.create("already-exists",{id:n});if(!hE){(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(WC))return r}return null})()||function(t){var e=document.createElement("script");e.src=WC+"?l="+t,e.async=!0,document.head.appendChild(e)}(cE),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(cE);var r=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(ji.b)(this,void 0,void 0,(function(){var a;return Object(ji.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==KC.EVENT?[3,2]:[4,YC(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==KC.CONFIG?[3,4]:[4,XC(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(KC.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),QC.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(sE,aE,uE,cE,lE);iE=r.wrappedGtag,rE=r.gtagCore,hE=!0}return sE[n]=function(t,e,n,r,i){return Object(ji.b)(this,void 0,void 0,(function(){var o,s,a,u,c,l,h;return Object(ji.d)(this,(function(f){switch(f.label){case 0:return(o=function(t,e,n){return void 0===e&&(e=$C),Object(ji.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u=this;return Object(ji.d)(this,(function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw ZC.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw ZC.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new oE,setTimeout((function(){return Object(ji.b)(u,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){return a.abort(),[2]}))}))}),6e4),[2,eE({appId:r,apiKey:i,measurementId:o},s,a,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&QC.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return QC.error(t)})),e.push(o),s=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t;return Object(ji.d)(this,(function(e){switch(e.label){case 0:return Object(Pi.w)()?[3,1]:(QC.warn(ZC.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(Pi.N)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),QC.warn(ZC.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([o,s])];case 1:return a=f.sent(),u=a[0],c=a[1],i("js",new Date),(h={}).origin="firebase",h.update=!0,l=h,null!=c&&(l.firebase_id=c),i(KC.CONFIG,u.measurementId,l),[2,u.measurementId]}}))}))}(t,aE,uE,e,rE),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return Object(ji.b)(this,void 0,void 0,(function(){var o,s;return Object(ji.d)(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(KC.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(ji.a)(Object(ji.a)({},r),{send_to:o}),t(KC.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(iE,sE[n],t,e,r).catch((function(t){return QC.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(KC.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(KC.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(iE,sE[n],t,e).catch((function(t){return QC.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i;return Object(ji.d)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(KC.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(KC.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(iE,sE[n],t,e).catch((function(t){return QC.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return Object(ji.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(ji.d)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(KC.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(KC.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(iE,sE[n],t,e).catch((function(t){return QC.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(sE[n],t).catch((function(t){return QC.error(t)}))},INTERNAL:{delete:function(){return delete sE[n],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:fE,EventName:GC,isSupported:dE})),t.INTERNAL.registerComponent(new Du.a("analytics-internal",(function(t){try{return{logEvent:t.getProvider(pE).getImmediate().logEvent}}catch(e){throw ZC.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.2")}(Ni.a);var gE,vE=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),yE=((gE={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",gE["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",gE["registration-api-key"]="Undefined API key. Check Firebase app initialization.",gE["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",gE["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",gE["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",gE["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",gE["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",gE["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",gE["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',gE["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',gE["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",gE["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",gE),mE=new Pi.b("remoteconfig","Remote Config",yE),bE=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,g,v;return Object(ji.d)(this,(function(y){switch(y.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=y.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===m&&(m=navigator),m.languages&&m.languages[0]||m.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),y.label=2;case 2:return y.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return y.sent(),[4,s];case 4:return u=y.sent(),[3,6];case 5:throw c=y.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),mE.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,y.label=7;case 7:return y.trys.push([7,9,,10]),[4,u.json()];case 8:return g=y.sent(),[3,10];case 9:throw v=y.sent(),mE.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:p=g.entries,d=g.state,y.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===d?h=500:"NO_CHANGE"===d?h=304:"NO_TEMPLATE"!==d&&"EMPTY_CONFIG"!==d||(p={}),304!==h&&200!==h)throw mE.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:p}]}var m}))}))},t}(),_E=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),wE=["1","true","t","yes","y","on"],CE=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&wE.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),EE=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ri.a.DEBUG;break;case"silent":this._logger.logLevel=Ri.a.SILENT;break;default:this._logger.logLevel=Ri.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e,n;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(ji.d)(this,(function(i){switch(i.label){case 0:t=new _E,setTimeout((function(){return Object(ji.b)(r,void 0,void 0,(function(){return Object(ji.d)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=(o=e)instanceof Pi.c&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o}))}))},t.prototype.fetchAndActivate=function(){return Object(ji.b)(this,void 0,void 0,(function(){return Object(ji.d)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(ji.a)(Object(ji.a)({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new CE("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new CE("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new CE("static"))},t}();function OE(t,e){var n=t.target.error||void 0;return mE.create(e,{originalErrorMessage:n&&n.message})}var IE="app_namespace_store",TE=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(OE(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(IE,{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([IE],"readonly").objectStore(IE),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i(OE(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(u){i(mE.create("storage-get",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Object(ji.b)(this,void 0,void 0,(function(){var n,r=this;return Object(ji.d)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var s=n.transaction([IE],"readwrite").objectStore(IE),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o(OE(t,"storage-set"))},u.onsuccess=function(){i()}}catch(c){o(mE.create("storage-set",{originalErrorMessage:c&&c.message}))}}))]}}))}))},t.prototype.delete=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ji.d)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([IE],"readwrite").objectStore(IE),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i(OE(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(u){i(mE.create("storage-delete",{originalErrorMessage:u&&u.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),SE=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(ji.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function AE(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(mE.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var kE,xE=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(ji.b)(this,void 0,void 0,(function(){var e;return Object(ji.d)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(ji.b)(this,void 0,void 0,(function(){var e,i,o;return Object(ji.d)(this,(function(s){switch(s.label){case 0:return[4,AE(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Pi.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(Pi.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),NE="@firebase/remote-config";(kE=Ni.a).INTERNAL.registerComponent(new Du.a("remoteConfig",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw mE.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw mE.create("registration-project-id");if(!s)throw mE.create("registration-api-key");if(!a)throw mE.create("registration-app-id");var u=new TE(a,n.name,e=e||"firebase"),c=new SE(u),l=new Ri.b(NE);l.logLevel=Ri.a.ERROR;var h=new bE(r,kE.SDK_VERSION,e,o,s,a),f=new xE(h,u),p=new vE(f,u,c,l),d=new EE(n,p,c,u,l);return d.ensureInitialized(),d}),"PUBLIC").setMultipleInstances(!0)),kE.registerVersion(NE,"0.1.30"),Ni.a.registerVersion("firebase","8.1.1","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Ni.a.registerVersion("firebase","8.1.1");var jE=n("D0XW"),RE=n("pxpQ"),PE=n("spgP"),DE=n("Jgta");n("VRyK"),n("qgXg"),n("Ylt2");const ME=new r.q("angularfire2.auth.use-emulator");function LE(t,e){return function(t,e=jE.a){return new Jt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function FE(t,e){return LE(t,e).pipe(Object(se.a)(t=>({payload:t,type:"query"})))}function VE(t,e){return FE(t,e).pipe(Object(se.a)(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function UE(t,e,n){return FE(t,n).pipe(Object(se.a)(t=>t.payload.docChanges()),je((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),Object(se.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function qE(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class BE{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?VE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(se.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ce(t=>t.length>0),this.afs.keepUnstableUntilFirst):VE(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(je((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=qE(t);return UE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return FE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(se.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(qt.a)(this.query.get(t)).pipe(Object(RE.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new HE(this.ref.doc(t),this.afs)}}class HE{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=XE(n,e);return new BE(r,i,this.afs)}snapshotChanges(){return LE(this.ref,this.afs.schedulers.outsideAngular).pipe(Object(se.a)(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(se.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(qt.a)(this.ref.get(t)).pipe(Object(RE.b)(this.afs.schedulers.insideAngular))}}class zE{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?VE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(se.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),ce(t=>t.length>0),this.afs.keepUnstableUntilFirst):VE(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(je((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=qE(t);return UE(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return FE(this.query,this.afs.schedulers.outsideAngular).pipe(Object(se.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(qt.a)(this.query.get(t)).pipe(Object(RE.b)(this.afs.schedulers.insideAngular))}}const WE=new r.q("angularfire2.enableFirestorePersistence"),KE=new r.q("angularfire2.firestore.persistenceSettings"),GE=new r.q("angularfire2.firestore.settings"),QE=new r.q("angularfire2.firestore.use-emulator");function XE(t,e=(t=>t)){return{query:e(t),ref:t}}let YE=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new PE.d(o),this.keepUnstableUntilFirst=Object(PE.h)(this.schedulers);const c=Object(PE.g)(t,o,e);!DE.a.auth&&u&&Object(PE.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(PE.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return Object(qt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),Object(Ut.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Ut.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=XE(n,e),o=this.schedulers.ngZone.run(()=>r);return new BE(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new zE(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new HE(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(PE.c),r.Sb(PE.b,8),r.Sb(WE,8),r.Sb(GE,8),r.Sb(r.B),r.Sb(r.z),r.Sb(KE,8),r.Sb(QE,8),r.Sb(ME,8))},t.\u0275prov=Object(r.Hb)({factory:function(){return new t(Object(r.Sb)(PE.c),Object(r.Sb)(PE.b,8),Object(r.Sb)(WE,8),Object(r.Sb)(GE,8),Object(r.Sb)(r.B),Object(r.Sb)(r.z),Object(r.Sb)(KE,8),Object(r.Sb)(QE,8),Object(r.Sb)(ME,8))},token:t,providedIn:"any"}),t})(),JE=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:WE,useValue:!0},{provide:KE,useValue:e}]}}}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},providers:[YE]}),t})();var ZE=n("XoHu");function $E(t,e){return new Jt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(qt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const tO=new r.q("NgValueAccessor"),eO={provide:tO,useExisting:Object(r.U)(()=>nO),multi:!0};let nO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[r.yb([eO])]}),t})();const rO={provide:tO,useExisting:Object(r.U)(()=>oO),multi:!0},iO=new r.q("CompositionEventMode");let oO=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l),r.Lb(iO,8))},t.\u0275dir=r.Gb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Vb("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[r.yb([rO])]}),t})(),sO=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t}),t})(),aO=(()=>{class t extends sO{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return uO(e||t)},t.\u0275dir=r.Gb({type:t,features:[r.wb]}),t})();const uO=r.Qb(aO);class cO extends sO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){}get asyncValidator(){}}let lO=(()=>{class t extends class{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(cO,2))},t.\u0275dir=r.Gb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Db("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.wb]}),t})();function hO(t){return null==t||0===t.length}function fO(t){return null!=t&&"number"==typeof t.length}const pO=new r.q("NgValidators"),dO=new r.q("NgAsyncValidators"),gO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class vO{static min(t){return e=>{if(hO(e.value)||hO(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(hO(e.value)||hO(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return hO(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return hO(t.value)||gO.test(t.value)?null:{email:!0}}static minLength(t){return e=>hO(e.value)||!fO(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>fO(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return vO.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(hO(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(yO);return 0==e.length?null:function(t){return bO(_O(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(yO);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Kt.a)(e))return $E(e,null);if(Object(ZE.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return $E(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return $E(t=1===t.length&&Object(Kt.a)(t[0])?t[0]:t,null).pipe(Object(se.a)(t=>e(...t)))}return $E(t,null)}(_O(t,e).map(mO)).pipe(Object(se.a)(bO))}}}function yO(t){return null!=t}function mO(t){const e=Object(r.rb)(t)?Object(qt.a)(t):t;return Object(r.qb)(e),e}function bO(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function _O(t,e){return e.map(e=>e(t))}function wO(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const CO={provide:tO,useExisting:Object(r.U)(()=>EO),multi:!0};let EO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.yb([CO])]}),t})();const OO={provide:tO,useExisting:Object(r.U)(()=>TO),multi:!0};let IO=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),TO=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(cO),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l),r.Lb(IO),r.Lb(r.r))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.yb([OO])]}),t})();const SO={provide:tO,useExisting:Object(r.U)(()=>AO),multi:!0};let AO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.yb([SO])]}),t})();const kO={provide:tO,useExisting:Object(r.U)(()=>xO),multi:!0};let xO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.yb([kO])]}),t})();const NO={provide:tO,useExisting:Object(r.U)(()=>jO),multi:!0};let jO=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.E),r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Vb("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.yb([NO])]}),t})();function RO(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function PO(t){return null!=t?vO.compose(wO(t)):null}function DO(t){return null!=t?vO.composeAsync(wO(t)):null}const MO=[nO,AO,EO,xO,jO,TO],LO="VALID",FO="INVALID",VO="PENDING",UO="DISABLED";function qO(t){return(WO(t)?t.validators:t)||null}function BO(t){return Array.isArray(t)?PO(t):t||null}function HO(t,e){return(WO(e)?e.asyncValidators:t)||null}function zO(t){return Array.isArray(t)?DO(t):t||null}function WO(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class KO{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=BO(this._rawValidators),this._composedAsyncValidatorFn=zO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===LO}get invalid(){return this.status===FO}get pending(){return this.status==VO}get disabled(){return this.status===UO}get enabled(){return this.status!==UO}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=BO(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=zO(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=VO,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=UO,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=LO,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==LO&&this.status!==VO||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?UO:LO}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=VO,this._hasOwnPendingAsyncValidator=!0;const e=mO(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof QO?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof XO&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?UO:this.errors?FO:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(VO)?VO:this._anyControlsHaveStatus(FO)?FO:LO}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){WO(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class GO extends KO{constructor(t=null,e,n){super(qO(e),HO(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class QO extends KO{constructor(t,e,n){super(qO(e),HO(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof GO?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class XO extends KO{constructor(t,e,n){super(qO(e),HO(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof GO?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const YO={provide:cO,useExisting:Object(r.U)(()=>ZO)},JO=(()=>Promise.resolve(null))();let ZO=(()=>{class t extends cO{constructor(t,e,n,i){super(),this.control=new GO,this._registered=!1,this.update=new r.n,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===oO?n=t:(e=t,MO.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(t,e){return[...e.path,t]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return PO(this._rawValidators)}get asyncValidator(){return DO(this._rawAsyncValidators)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){var t,e;(t=this.control).validator=vO.compose([t.validator,(e=this).validator]),t.asyncValidator=vO.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&RO(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&RO(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){JO.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;JO.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(aO,9),r.Lb(pO,10),r.Lb(dO,10),r.Lb(tO,10))},t.\u0275dir=r.Gb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.yb([YO]),r.wb,r.xb]}),t})(),$O=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)}}),t})(),tI=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},providers:[IO],imports:[$O]}),t})();const eI=["dialogPopup"],nI=["hueSlider"],rI=["alphaSlider"];function iI(t,e){if(1&t&&r.Mb(0,"div"),2&t){const t=r.Xb();r.Cb("arrow arrow-",t.cpUsePosition,""),r.hc("top",t.arrowTop,"px")}}function oI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",26),r.Vb("newValue",(function(e){return r.dc(t),r.Xb().onColorChange(e)}))("dragStart",(function(){return r.dc(t),r.Xb().onDragStart("saturation-lightness")}))("dragEnd",(function(){return r.dc(t),r.Xb().onDragEnd("saturation-lightness")})),r.Mb(1,"div",13),r.Nb()}if(2&t){const t=r.Xb();r.hc("background-color",t.hueSliderColor),r.ac("rgX",1)("rgY",1),r.zb(1),r.hc("top",null==t.slider?null:t.slider.v,"px")("left",null==t.slider?null:t.slider.s,"px")}}function sI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"button",27),r.Vb("click",(function(e){r.dc(t);const n=r.Xb();return n.onAddPresetColor(e,n.selectedColor)})),r.jc(1),r.Nb()}if(2&t){const t=r.Xb();r.Bb(t.cpAddColorButtonClass),r.ac("disabled",t.cpPresetColors&&t.cpPresetColors.length>=t.cpMaxPresetColorsLength),r.zb(1),r.lc(" ",t.cpAddColorButtonText," ")}}function aI(t,e){1&t&&r.Mb(0,"div",28)}function uI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"input",34),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb(2).onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb(2).onAlphaInput(e)})),r.Nb()}if(2&t){const t=r.Xb(2);r.ac("rg",1)("value",null==t.cmykText?null:t.cmykText.a)}}function cI(t,e){1&t&&(r.Ob(0,"div"),r.jc(1,"A"),r.Nb())}function lI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",29),r.Ob(1,"div",30),r.Ob(2,"input",31),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onCyanInput(e)})),r.Nb(),r.Ob(3,"input",31),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onMagentaInput(e)})),r.Nb(),r.Ob(4,"input",31),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onYellowInput(e)})),r.Nb(),r.Ob(5,"input",31),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onBlackInput(e)})),r.Nb(),r.ic(6,uI,1,2,"input",32),r.Nb(),r.Ob(7,"div",30),r.Ob(8,"div"),r.jc(9,"C"),r.Nb(),r.Ob(10,"div"),r.jc(11,"M"),r.Nb(),r.Ob(12,"div"),r.jc(13,"Y"),r.Nb(),r.Ob(14,"div"),r.jc(15,"K"),r.Nb(),r.ic(16,cI,2,0,"div",33),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.hc("display",3!==t.format?"none":"block"),r.zb(2),r.ac("rg",100)("value",null==t.cmykText?null:t.cmykText.c),r.zb(1),r.ac("rg",100)("value",null==t.cmykText?null:t.cmykText.m),r.zb(1),r.ac("rg",100)("value",null==t.cmykText?null:t.cmykText.y),r.zb(1),r.ac("rg",100)("value",null==t.cmykText?null:t.cmykText.k),r.zb(1),r.ac("ngIf","disabled"!==t.cpAlphaChannel),r.zb(10),r.ac("ngIf","disabled"!==t.cpAlphaChannel)}}function hI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"input",34),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb(2).onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb(2).onAlphaInput(e)})),r.Nb()}if(2&t){const t=r.Xb(2);r.ac("rg",1)("value",null==t.hslaText?null:t.hslaText.a)}}function fI(t,e){1&t&&(r.Ob(0,"div"),r.jc(1,"A"),r.Nb())}function pI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",35),r.Ob(1,"div",30),r.Ob(2,"input",36),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onHueInput(e)})),r.Nb(),r.Ob(3,"input",31),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onSaturationInput(e)})),r.Nb(),r.Ob(4,"input",31),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onLightnessInput(e)})),r.Nb(),r.ic(5,hI,1,2,"input",32),r.Nb(),r.Ob(6,"div",30),r.Ob(7,"div"),r.jc(8,"H"),r.Nb(),r.Ob(9,"div"),r.jc(10,"S"),r.Nb(),r.Ob(11,"div"),r.jc(12,"L"),r.Nb(),r.ic(13,fI,2,0,"div",33),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.hc("display",2!==t.format?"none":"block"),r.zb(2),r.ac("rg",360)("value",null==t.hslaText?null:t.hslaText.h),r.zb(1),r.ac("rg",100)("value",null==t.hslaText?null:t.hslaText.s),r.zb(1),r.ac("rg",100)("value",null==t.hslaText?null:t.hslaText.l),r.zb(1),r.ac("ngIf","disabled"!==t.cpAlphaChannel),r.zb(8),r.ac("ngIf","disabled"!==t.cpAlphaChannel)}}function dI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"input",34),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb(2).onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb(2).onAlphaInput(e)})),r.Nb()}if(2&t){const t=r.Xb(2);r.ac("rg",1)("value",null==t.rgbaText?null:t.rgbaText.a)}}function gI(t,e){1&t&&(r.Ob(0,"div"),r.jc(1,"A"),r.Nb())}function vI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",37),r.Ob(1,"div",30),r.Ob(2,"input",38),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onRedInput(e)})),r.Nb(),r.Ob(3,"input",38),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onGreenInput(e)})),r.Nb(),r.Ob(4,"input",38),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onBlueInput(e)})),r.Nb(),r.ic(5,dI,1,2,"input",32),r.Nb(),r.Ob(6,"div",30),r.Ob(7,"div"),r.jc(8,"R"),r.Nb(),r.Ob(9,"div"),r.jc(10,"G"),r.Nb(),r.Ob(11,"div"),r.jc(12,"B"),r.Nb(),r.ic(13,gI,2,0,"div",33),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.hc("display",1!==t.format?"none":"block"),r.zb(2),r.ac("rg",255)("value",null==t.rgbaText?null:t.rgbaText.r),r.zb(1),r.ac("rg",255)("value",null==t.rgbaText?null:t.rgbaText.g),r.zb(1),r.ac("rg",255)("value",null==t.rgbaText?null:t.rgbaText.b),r.zb(1),r.ac("ngIf","disabled"!==t.cpAlphaChannel),r.zb(8),r.ac("ngIf","disabled"!==t.cpAlphaChannel)}}function yI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"input",34),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb(2).onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb(2).onAlphaInput(e)})),r.Nb()}if(2&t){const t=r.Xb(2);r.ac("rg",1)("value",t.hexAlpha)}}function mI(t,e){1&t&&(r.Ob(0,"div"),r.jc(1,"A"),r.Nb())}function bI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",39),r.Ob(1,"div",30),r.Ob(2,"input",40),r.Vb("blur",(function(){return r.dc(t),r.Xb().onHexInput(null)}))("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onHexInput(e)})),r.Nb(),r.ic(3,yI,1,2,"input",32),r.Nb(),r.Ob(4,"div",30),r.Ob(5,"div"),r.jc(6,"Hex"),r.Nb(),r.ic(7,mI,2,0,"div",33),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.hc("display",0!==t.format?"none":"block"),r.Db("hex-alpha","forced"===t.cpAlphaChannel),r.zb(2),r.ac("value",t.hexText),r.zb(1),r.ac("ngIf","forced"===t.cpAlphaChannel),r.zb(4),r.ac("ngIf","forced"===t.cpAlphaChannel)}}function _I(t,e){if(1&t){const t=r.Pb();r.Ob(0,"input",34),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb(2).onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb(2).onAlphaInput(e)})),r.Nb()}if(2&t){const t=r.Xb(2);r.ac("rg",1)("value",null==t.hslaText?null:t.hslaText.a)}}function wI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",41),r.Ob(1,"div",30),r.Ob(2,"input",31),r.Vb("keyup.enter",(function(e){return r.dc(t),r.Xb().onAcceptColor(e)}))("newValue",(function(e){return r.dc(t),r.Xb().onValueInput(e)})),r.Nb(),r.ic(3,_I,1,2,"input",32),r.Nb(),r.Ob(4,"div",30),r.Ob(5,"div"),r.jc(6,"V"),r.Nb(),r.Ob(7,"div"),r.jc(8,"A"),r.Nb(),r.Nb(),r.Nb()}if(2&t){const t=r.Xb();r.zb(2),r.ac("rg",100)("value",null==t.hslaText?null:t.hslaText.l),r.zb(1),r.ac("ngIf","disabled"!==t.cpAlphaChannel)}}function CI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",42),r.Ob(1,"span",43),r.Vb("click",(function(){return r.dc(t),r.Xb().onFormatToggle(-1)})),r.Nb(),r.Ob(2,"span",43),r.Vb("click",(function(){return r.dc(t),r.Xb().onFormatToggle(1)})),r.Nb(),r.Nb()}}function EI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"span",50),r.Vb("click",(function(e){r.dc(t);const n=r.Xb().$implicit;return r.Xb(3).onRemovePresetColor(e,n)})),r.Nb()}if(2&t){const t=r.Xb(4);r.Bb(t.cpRemoveColorButtonClass)}}function OI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"div",48),r.Vb("click",(function(){r.dc(t);const n=e.$implicit;return r.Xb(3).setColorFromString(n)})),r.ic(1,EI,1,3,"span",49),r.Nb()}if(2&t){const t=e.$implicit,n=r.Xb(3);r.hc("background-color",t),r.zb(1),r.ac("ngIf",n.cpAddColorButton)}}function II(t,e){if(1&t&&(r.Ob(0,"div"),r.ic(1,OI,2,3,"div",47),r.Nb()),2&t){const t=r.Xb(2);r.Bb(t.cpPresetColorsClass),r.zb(1),r.ac("ngForOf",t.cpPresetColors)}}function TI(t,e){if(1&t&&(r.Ob(0,"div"),r.jc(1),r.Nb()),2&t){const t=r.Xb(2);r.Bb(t.cpPresetEmptyMessageClass),r.zb(1),r.kc(t.cpPresetEmptyMessage)}}function SI(t,e){if(1&t&&(r.Ob(0,"div",44),r.Mb(1,"hr"),r.Ob(2,"div",45),r.jc(3),r.Nb(),r.ic(4,II,2,4,"div",46),r.ic(5,TI,2,4,"div",46),r.Nb()),2&t){const t=r.Xb();r.zb(3),r.kc(t.cpPresetLabel),r.zb(1),r.ac("ngIf",null==t.cpPresetColors?null:t.cpPresetColors.length),r.zb(1),r.ac("ngIf",!(null!=t.cpPresetColors&&t.cpPresetColors.length)&&t.cpAddColorButton)}}function AI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"button",53),r.Vb("click",(function(e){return r.dc(t),r.Xb(2).onCancelColor(e)})),r.jc(1),r.Nb()}if(2&t){const t=r.Xb(2);r.Bb(t.cpCancelButtonClass),r.zb(1),r.kc(t.cpCancelButtonText)}}function kI(t,e){if(1&t){const t=r.Pb();r.Ob(0,"button",53),r.Vb("click",(function(e){return r.dc(t),r.Xb(2).onAcceptColor(e)})),r.jc(1),r.Nb()}if(2&t){const t=r.Xb(2);r.Bb(t.cpOKButtonClass),r.zb(1),r.kc(t.cpOKButtonText)}}function xI(t,e){if(1&t&&(r.Ob(0,"div",51),r.ic(1,AI,2,4,"button",52),r.ic(2,kI,2,4,"button",52),r.Nb()),2&t){const t=r.Xb();r.zb(1),r.ac("ngIf",t.cpCancelButton),r.zb(1),r.ac("ngIf",t.cpOKButton)}}var NI=function(t){return t[t.HEX=0]="HEX",t[t.RGBA=1]="RGBA",t[t.HSLA=2]="HSLA",t[t.CMYK=3]="CMYK",t}({});class jI{constructor(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=r}}class RI{constructor(t,e,n,r){this.h=t,this.s=e,this.v=n,this.a=r}}class PI{constructor(t,e,n,r){this.h=t,this.s=e,this.l=n,this.a=r}}class DI{constructor(t,e,n,r,i=1){this.c=t,this.m=e,this.y=n,this.k=r,this.a=i}}let MI=(()=>{class t{constructor(){this.newValue=new r.n}inputChange(t){const e=t.target.value;if(void 0===this.rg)this.newValue.emit(e);else{const t=parseFloat(e);this.newValue.emit({v:t,rg:this.rg})}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Gb({type:t,selectors:[["","text",""]],hostBindings:function(t,e){1&t&&r.Vb("input",(function(t){return e.inputChange(t)}))},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),t})(),LI=(()=>{class t{constructor(t){this.elRef=t,this.dragEnd=new r.n,this.dragStart=new r.n,this.newValue=new r.n,this.listenerMove=t=>this.move(t),this.listenerStop=()=>this.stop()}mouseDown(t){this.start(t)}touchStart(t){this.start(t)}move(t){t.preventDefault(),this.setCursor(t)}start(t){this.setCursor(t),t.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(t){const e=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageX?t.pageX:t.touches[0].pageX)-e.left-window.pageXOffset}getY(t){const e=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==t.pageY?t.pageY:t.touches[0].pageY)-e.top-window.pageYOffset}setCursor(t){const e=this.elRef.nativeElement.offsetWidth,n=this.elRef.nativeElement.offsetHeight,r=Math.max(0,Math.min(this.getX(t),e)),i=Math.max(0,Math.min(this.getY(t),n));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:r/e,v:1-i/n,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:i/n,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:r/e,rgX:this.rgX})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.l))},t.\u0275dir=r.Gb({type:t,selectors:[["","slider",""]],hostBindings:function(t,e){1&t&&r.Vb("mousedown",(function(t){return e.mouseDown(t)}))("touchstart",(function(t){return e.touchStart(t)}))},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),t})();class FI{constructor(t,e,n,r){this.h=t,this.s=e,this.v=n,this.a=r}}class VI{constructor(t,e,n,r){this.h=t,this.s=e,this.v=n,this.a=r}}let UI=(()=>{class t{constructor(){this.active=null}setActive(t){this.active&&this.active!==t&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=t}hsva2hsla(t){const e=t.h,n=t.s,r=t.v,i=t.a;if(0===r)return new PI(e,0,0,i);if(0===n&&1===r)return new PI(e,1,1,i);{const t=r*(2-n)/2;return new PI(e,r*n/(1-Math.abs(2*t-1)),t,i)}}hsla2hsva(t){const e=Math.min(t.h,1),n=Math.min(t.s,1),r=Math.min(t.l,1),i=Math.min(t.a,1);if(0===r)return new RI(e,0,0,i);{const t=r+n*(1-Math.abs(2*r-1))/2;return new RI(e,2*(t-r)/t,t,i)}}hsvaToRgba(t){let e,n,r;const i=t.h,o=t.s,s=t.v,a=t.a,u=Math.floor(6*i),c=6*i-u,l=s*(1-o),h=s*(1-c*o),f=s*(1-(1-c)*o);switch(u%6){case 0:e=s,n=f,r=l;break;case 1:e=h,n=s,r=l;break;case 2:e=l,n=s,r=f;break;case 3:e=l,n=h,r=s;break;case 4:e=f,n=l,r=s;break;case 5:e=s,n=l,r=h;break;default:e=0,n=0,r=0}return new jI(e,n,r,a)}cmykToRgb(t){return new jI((1-t.c)*(1-t.k),(1-t.m)*(1-t.k),(1-t.y)*(1-t.k),t.a)}rgbaToCmyk(t){const e=1-Math.max(t.r,t.g,t.b);return 1===e?new DI(0,0,0,1,t.a):new DI((1-t.r-e)/(1-e),(1-t.g-e)/(1-e),(1-t.b-e)/(1-e),e,t.a)}rgbaToHsva(t){let e,n;const r=Math.min(t.r,1),i=Math.min(t.g,1),o=Math.min(t.b,1),s=Math.min(t.a,1),a=Math.max(r,i,o),u=Math.min(r,i,o),c=a,l=a-u;if(n=0===a?0:l/a,a===u)e=0;else{switch(a){case r:e=(i-o)/l+(i<o?6:0);break;case i:e=(o-r)/l+2;break;case o:e=(r-i)/l+4;break;default:e=0}e/=6}return new RI(e,n,c,s)}rgbaToHex(t,e){let n="#"+(1<<24|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return e&&(n+=(256|Math.round(255*t.a)).toString(16).substr(1)),n}normalizeCMYK(t){return new DI(t.c/100,t.m/100,t.y/100,t.k/100,t.a)}denormalizeCMYK(t){return new DI(Math.floor(100*t.c),Math.floor(100*t.m),Math.floor(100*t.y),Math.floor(100*t.k),t.a)}denormalizeRGBA(t){return new jI(Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b),t.a)}stringToHsva(t="",e=!1){let n=null;t=(t||"").toLowerCase();const r=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return new jI(parseInt(t[2],10)/255,parseInt(t[3],10)/255,parseInt(t[4],10)/255,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return new PI(parseInt(t[2],10)/360,parseInt(t[3],10)/100,parseInt(t[4],10)/100,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]))}}];r.push(e?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(t){return new jI(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,parseInt(t[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(t){return new jI(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1)}}),r.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(t){return new jI(parseInt(t[1]+t[1],16)/255,parseInt(t[2]+t[2],16)/255,parseInt(t[3]+t[3],16)/255,1)}});for(const i in r)if(r.hasOwnProperty(i)){const e=r[i],o=e.re.exec(t),s=o&&e.parse(o);if(s)return s instanceof jI?n=this.rgbaToHsva(s):s instanceof PI&&(n=this.hsla2hsva(s)),n}return n}outputFormat(t,e,n){switch("auto"===e&&(e=t.a<1?"rgba":"hex"),e){case"hsla":const e=this.hsva2hsla(t),r=new PI(Math.round(360*e.h),Math.round(100*e.s),Math.round(100*e.l),Math.round(100*e.a)/100);return t.a<1||"always"===n?"hsla("+r.h+","+r.s+"%,"+r.l+"%,"+r.a+")":"hsl("+r.h+","+r.s+"%,"+r.l+"%)";case"rgba":const i=this.denormalizeRGBA(this.hsvaToRgba(t));return t.a<1||"always"===n?"rgba("+i.r+","+i.g+","+i.b+","+Math.round(100*i.a)/100+")":"rgb("+i.r+","+i.g+","+i.b+")";default:const o="always"===n||"forced"===n;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(t)),o)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac}),t})(),qI=(()=>{class t{constructor(t,e,n){this.elRef=t,this.cdRef=e,this.service=n,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[NI.HEX,NI.RGBA,NI.HSLA,NI.CMYK],this.useRootViewContainer=!1}handleEsc(t){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(t)}handleEnter(t){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(t)}ngOnInit(){this.slider=new FI(0,0,0,0),this.sliderDimMax=new VI(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?NI.CMYK:"rgba"===this.cpOutputFormat?NI.RGBA:"hsla"===this.cpOutputFormat?NI.HSLA:NI.HEX,this.listenerMouseDown=t=>{this.onMouseDown(t)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new VI(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(t,e=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(t),this.setColorFromString(t,e),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(t,e,n,r,i,o,s,a,u,c,l,h,f,p,d,g,v,y,m,b,_,w,C,E,O,I,T,S,A,k,x,N,j,R,P){this.setInitialColor(n),this.setColorMode(a),this.isIE10=10===function(){let t="";"undefined"!=typeof navigator&&(t=navigator.userAgent.toLowerCase());const e=t.indexOf("msie ");return e>0&&parseInt(t.substring(e+5,t.indexOf(".",e)),10)}(),this.directiveInstance=t,this.directiveElementRef=e,this.cpDisableInput=h,this.cpCmykEnabled=u,this.cpAlphaChannel=c,this.cpOutputFormat=l,this.cpDialogDisplay=o,this.cpIgnoredElements=f,this.cpSaveClickOutside=p,this.cpCloseClickOutside=d,this.useRootViewContainer=g,this.width=this.cpWidth=parseInt(r,10),this.height=this.cpHeight=parseInt(i,10),this.cpPosition=v,this.cpPositionOffset=parseInt(y,10),this.cpOKButton=I,this.cpOKButtonText=S,this.cpOKButtonClass=T,this.cpCancelButton=A,this.cpCancelButtonText=x,this.cpCancelButtonClass=k,this.fallbackColor=s||"#fff",this.setPresetConfig(b,_),this.cpPresetColorsClass=w,this.cpMaxPresetColorsLength=C,this.cpPresetEmptyMessage=E,this.cpPresetEmptyMessageClass=O,this.cpAddColorButton=N,this.cpAddColorButtonText=R,this.cpAddColorButtonClass=j,this.cpRemoveColorButtonClass=P,m||(this.dialogArrowOffset=0),"inline"===o&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===l&&"always"!==c&&"forced"!==c&&(this.cpAlphaChannel="disabled")}setColorMode(t){switch(t.toString().toUpperCase()){case"1":case"C":case"COLOR":this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3;break;default:this.cpColorMode=1}}setInitialColor(t){this.initialColor=t}setPresetConfig(t,e){this.cpPresetLabel=t,this.cpPresetColors=e}setColorFromString(t,e=!0,n=!0){let r;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(r=this.service.stringToHsva(t,!0),r||this.hsva||(r=this.service.stringToHsva(t,!1))):r=this.service.stringToHsva(t,!1),r||this.hsva||(r=this.service.stringToHsva(this.fallbackColor,!1)),r&&(this.hsva=r,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(e,n))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(t){this.directiveInstance.sliderDragEnd({slider:t,color:this.outputColor})}onDragStart(t){this.directiveInstance.sliderDragStart({slider:t,color:this.outputColor})}onMouseDown(t){!this.show||this.isIE10||"popup"!==this.cpDialogDisplay||t.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,t.target)||this.isDescendant(this.directiveElementRef.nativeElement,t.target)||0!==this.cpIgnoredElements.filter(e=>e===t.target).length||(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}onAcceptColor(t){t.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(t){this.hsva=null,t.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onFormatToggle(t){const e=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),n=((this.dialogInputFields.indexOf(this.format)+t)%e+e)%e;this.format=this.dialogInputFields[n]}onColorChange(t){this.hsva.s=t.s/t.rgX,this.hsva.v=t.v/t.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(t){this.hsva.h=t.v/t.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(t){this.hsva.v=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(t){this.hsva.a=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(t){if(null===t)this.updateColorPicker();else{t&&"#"!==t[0]&&(t="#"+t);let e=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(e=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const n=e.test(t);n&&(t.length<5&&(t="#"+t.substring(1).split("").map(t=>t+t).join("")),"forced"===this.cpAlphaChannel&&(t+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(t,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:n,value:t,color:this.outputColor})}}onRedInput(t){const e=this.service.hsvaToRgba(this.hsva),n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;n&&(e.r=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:n,value:e.r,color:this.outputColor})}onBlueInput(t){const e=this.service.hsvaToRgba(this.hsva),n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;n&&(e.b=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:n,value:e.b,color:this.outputColor})}onGreenInput(t){const e=this.service.hsvaToRgba(this.hsva),n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;n&&(e.g=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:n,value:e.g,color:this.outputColor})}onHueInput(t){const e=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;e&&(this.hsva.h=t.v/t.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:e,value:this.hsva.h,color:this.outputColor})}onValueInput(t){const e=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;e&&(this.hsva.v=t.v/t.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:e,value:this.hsva.v,color:this.outputColor})}onAlphaInput(t){const e=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;e&&(this.hsva.a=t.v/t.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:e,value:this.hsva.a,color:this.outputColor})}onLightnessInput(t){const e=this.service.hsva2hsla(this.hsva),n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;n&&(e.l=t.v/t.rg,this.hsva=this.service.hsla2hsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:n,value:e.l,color:this.outputColor})}onSaturationInput(t){const e=this.service.hsva2hsla(this.hsva),n=!isNaN(t.v)&&t.v>=0&&t.v<=t.rg;n&&(e.s=t.v/t.rg,this.hsva=this.service.hsla2hsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:n,value:e.s,color:this.outputColor})}onCyanInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.c=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.m=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.y=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(t){!isNaN(t.v)&&t.v>=0&&t.v<=t.rg&&(this.cmyk.k=t.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(t,e){t.stopPropagation(),this.cpPresetColors.filter(t=>t===e).length||(this.cpPresetColors=this.cpPresetColors.concat(e),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(t,e){t.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(t=>t!==e),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(t=!0,e=!0,n=!1){if(this.sliderDimMax){let r,i,o;2===this.cpColorMode&&(this.hsva.s=0);const s=this.outputColor;if(i=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(n?(o=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(o)):(o=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(o))),o=this.service.denormalizeRGBA(o),this.sliderH=this.hsva.h):o=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),r=this.service.denormalizeRGBA(this.service.hsvaToRgba(new RI(this.sliderH||this.hsva.h,1,1,1))),e&&(this.hslaText=new PI(Math.round(360*i.h),Math.round(100*i.s),Math.round(100*i.l),Math.round(100*i.a)/100),this.rgbaText=new jI(o.r,o.g,o.b,Math.round(100*o.a)/100),this.cpCmykEnabled&&(this.cmykText=new DI(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(o,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==NI.RGBA&&this.format!==NI.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?NI.RGBA:NI.HEX),this.hueSliderColor="rgb("+r.r+","+r.g+","+r.b+")",this.alphaSliderColor="rgb("+o.r+","+o.g+","+o.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==NI.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const t=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${t})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new FI((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),t&&s!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let t,e="static",n="",r=null,i=null,o=this.directiveElementRef.nativeElement.parentNode;const s=this.dialogElement.nativeElement.offsetHeight;for(;null!==o&&"HTML"!==o.tagName;){if(t=window.getComputedStyle(o),e=t.getPropertyValue("position"),n=t.getPropertyValue("transform"),"static"!==e&&null===r&&(r=o),n&&"none"!==n&&null===i&&(i=o),"fixed"===e){r=i;break}o=o.parentNode}const a=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==e);if(this.useRootViewContainer||"fixed"===e&&(!r||r instanceof HTMLUnknownElement))this.top=a.top,this.left=a.left;else{null===r&&(r=o);const t=this.createDialogBox(r,"fixed"!==e);this.top=a.top-t.top,this.left=a.left-t.left}"fixed"===e&&(this.position="fixed");let u=this.cpPosition;"auto"===this.cpPosition&&(u=function(t){let e="right",n="bottom";const{height:r,width:i,top:o,bottom:s,left:a,right:u}=t,c=o-r<0,l=s+r>(window.innerHeight||document.documentElement.clientHeight),h=a-i<0,f=u+i>(window.innerWidth||document.documentElement.clientWidth);return l&&(n="top"),c&&(n="bottom"),h&&(e="right"),f&&(e="left"),c&&l&&h&&f?["left","right","top","bottom"].reduce((e,n)=>t[e]>t[n]?e:n):h&&f?c?"bottom":l||o>s?"top":"bottom":c&&l?h?"right":f||a>u?"left":"right":`${n}-${e}`}(this.dialogElement.nativeElement.getBoundingClientRect())),"top"===u?(this.arrowTop=s-1,this.top-=s+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*a.width-this.dialogArrowOffset):"bottom"===u?(this.top+=a.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*a.width-this.dialogArrowOffset):"top-left"===u||"left-top"===u?(this.top-=s-a.height+a.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===u||"right-top"===u?(this.top-=s-a.height+a.height*this.cpPositionOffset/100,this.left+=a.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===u||"bottom-left"===u||"left-bottom"===u?(this.top+=a.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=a.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=a.width+this.dialogArrowSize-2)}}isDescendant(t,e){let n=e.parentNode;for(;null!==n;){if(n===t)return!0;n=n.parentNode}return!1}createDialogBox(t,e){return{top:t.getBoundingClientRect().top+(e?window.pageYOffset:0),left:t.getBoundingClientRect().left+(e?window.pageXOffset:0),width:t.offsetWidth,height:t.offsetHeight}}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.l),r.Lb(r.h),r.Lb(UI))},t.\u0275cmp=r.Fb({type:t,selectors:[["color-picker"]],viewQuery:function(t,e){var n;1&t&&(r.gc(eI,!0),r.gc(nI,!0),r.gc(rI,!0)),2&t&&(r.bc(n=r.Wb())&&(e.dialogElement=n.first),r.bc(n=r.Wb())&&(e.hueSlider=n.first),r.bc(n=r.Wb())&&(e.alphaSlider=n.first))},hostBindings:function(t,e){1&t&&r.Vb("keyup.esc",(function(t){return e.handleEsc(t)}),!1,r.cc)("keyup.enter",(function(t){return e.handleEnter(t)}),!1,r.cc)},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(t,e){1&t&&(r.Ob(0,"div",0,1),r.Vb("click",(function(t){return t.stopPropagation()})),r.ic(2,iI,1,5,"div",2),r.ic(3,oI,2,8,"div",3),r.Ob(4,"div",4),r.Ob(5,"div",5),r.Mb(6,"div",6),r.Mb(7,"div",7),r.ic(8,sI,2,5,"button",8),r.Nb(),r.Ob(9,"div",9),r.ic(10,aI,1,0,"div",10),r.Ob(11,"div",11,12),r.Vb("newValue",(function(t){return e.onHueChange(t)}))("dragStart",(function(){return e.onDragStart("hue")}))("dragEnd",(function(){return e.onDragEnd("hue")})),r.Mb(13,"div",13),r.Nb(),r.Ob(14,"div",14,15),r.Vb("newValue",(function(t){return e.onValueChange(t)}))("dragStart",(function(){return e.onDragStart("value")}))("dragEnd",(function(){return e.onDragEnd("value")})),r.Mb(16,"div",13),r.Nb(),r.Ob(17,"div",16,17),r.Vb("newValue",(function(t){return e.onAlphaChange(t)}))("dragStart",(function(){return e.onDragStart("alpha")}))("dragEnd",(function(){return e.onDragEnd("alpha")})),r.Mb(19,"div",13),r.Nb(),r.Nb(),r.Nb(),r.ic(20,lI,17,12,"div",18),r.ic(21,pI,14,10,"div",19),r.ic(22,vI,14,10,"div",20),r.ic(23,bI,8,7,"div",21),r.ic(24,wI,9,3,"div",22),r.ic(25,CI,3,0,"div",23),r.ic(26,SI,6,3,"div",24),r.ic(27,xI,3,2,"div",25),r.Nb()),2&t&&(r.hc("display",e.show?"block":"none")("visibility",e.hidden?"hidden":"visible")("top",e.top,"px")("left",e.left,"px")("position",e.position)("height",e.cpHeight,"px")("width",e.cpWidth,"px"),r.Db("open",e.show),r.zb(2),r.ac("ngIf","popup"==e.cpDialogDisplay),r.zb(1),r.ac("ngIf",1===(e.cpColorMode||1)),r.zb(4),r.hc("background-color",e.selectedColor),r.zb(1),r.ac("ngIf",e.cpAddColorButton),r.zb(2),r.ac("ngIf","disabled"===e.cpAlphaChannel),r.zb(1),r.hc("display",1===(e.cpColorMode||1)?"block":"none"),r.ac("rgX",1),r.zb(2),r.hc("left",null==e.slider?null:e.slider.h,"px"),r.zb(1),r.hc("display",2===(e.cpColorMode||1)?"block":"none"),r.ac("rgX",1),r.zb(2),r.hc("right",null==e.slider?null:e.slider.v,"px"),r.zb(1),r.hc("display","disabled"===e.cpAlphaChannel?"none":"block")("background-color",e.alphaSliderColor),r.ac("rgX",1),r.zb(2),r.hc("left",null==e.slider?null:e.slider.a,"px"),r.zb(1),r.ac("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),r.zb(1),r.ac("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),r.zb(1),r.ac("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),r.zb(1),r.ac("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),r.zb(1),r.ac("ngIf",!e.cpDisableInput&&2===(e.cpColorMode||1)),r.zb(1),r.ac("ngIf",!e.cpDisableInput&&1===(e.cpColorMode||1)),r.zb(1),r.ac("ngIf",(null==e.cpPresetColors?null:e.cpPresetColors.length)||e.cpAddColorButton),r.zb(1),r.ac("ngIf",e.cpOKButton||e.cpCancelButton))},directives:[rt,LI,MI,et],styles:['.color-picker{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;background-color:#fff;border:1px solid #777;cursor:default;height:auto;position:absolute;user-select:none;width:230px;z-index:1000}.color-picker *{box-sizing:border-box;font-size:11px;margin:0}.color-picker input{color:#000;font-size:13px;height:26px;min-width:0;text-align:center;width:0}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.color-picker .arrow{border-style:solid;height:0;position:absolute;width:0;z-index:999999}.color-picker .arrow.arrow-top{border-color:#777 transparent transparent;border-width:10px 5px;left:8px}.color-picker .arrow.arrow-bottom{border-color:transparent transparent #777;border-width:10px 5px;left:8px;top:-20px}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{border-color:transparent transparent transparent #777;border-width:5px 10px;bottom:8px;right:-21px}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{border-color:transparent #777 transparent transparent;border-width:5px 10px;bottom:8px;left:-20px}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{border-color:transparent transparent transparent #777;border-width:5px 10px;right:-21px;top:8px}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{border-color:transparent #777 transparent transparent;border-width:5px 10px;left:-20px;top:8px}.color-picker .cursor{border:2px solid #222;border-radius:50%;cursor:default;height:16px;position:relative;width:16px}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{padding:16px 8px;position:relative}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{color:#555;font-size:11px;overflow:hidden;padding:4px;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.color-picker .preset-area .preset-color{border:1px solid #a9a9a9;border-radius:25%;cursor:pointer;display:inline-block;height:18px;margin:4px 6px 8px;position:relative;width:18px}.color-picker .preset-area .preset-empty-message{font-style:italic;margin-bottom:8px;margin-top:4px;min-height:18px;text-align:center}.color-picker .hex-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{clear:left;color:#555;flex:1 1 auto;float:left;text-align:center}.color-picker .hex-text .box input{border:1px solid #a9a9a9;flex:1 1 auto;padding:1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{color:#555;flex:1 1 auto;margin-right:8px;text-align:center}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{border:1px solid #a9a9a9;flex:1;float:left;margin:0 8px 0 0;padding:1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC");direction:ltr}.color-picker .hue,.color-picker .value{background-size:100% 100%;border:none;cursor:pointer;height:16px;margin-bottom:16px;width:100%}.color-picker .value{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=");direction:rtl}.color-picker .alpha{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:16px;width:100%}.color-picker .type-policy{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==");background-position:50%;background-repeat:no-repeat;background-size:8px 16px;height:24px;position:absolute;right:12px;top:218px;width:16px}.color-picker .type-policy .type-policy-arrow{display:block;height:50%;width:100%}.color-picker .selected-color{border:1px solid #a9a9a9;border-radius:50%;height:40px;left:8px;position:absolute;top:16px;width:40px}.color-picker .selected-color-background{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC");border-radius:50%;height:40px;width:40px}.color-picker .saturation-lightness{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:130px;touch-action:manipulation;width:100%}.color-picker .cp-add-color-button-class{background:transparent;border:0;cursor:pointer;display:inline;margin:3px -3px;padding:0;position:absolute}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{color:#999;cursor:not-allowed}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{background:#fff;border-radius:50%;box-shadow:1px 1px 5px #333;cursor:pointer;display:block;height:10px;position:absolute;right:-5px;text-align:center;top:-5px;width:10px}.color-picker .cp-remove-color-button-class:before{bottom:3.5px;content:"x";display:inline-block;font-size:10px;position:relative}'],encapsulation:2}),t})(),BI=(()=>{class t{constructor(t,e,n,i,o,s){this.injector=t,this.cfr=e,this.appRef=n,this.vcRef=i,this.elRef=o,this._service=s,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new r.n(!0),this.cpToggleChange=new r.n(!0),this.cpSliderChange=new r.n(!0),this.cpSliderDragEnd=new r.n(!0),this.cpSliderDragStart=new r.n(!0),this.colorPickerOpen=new r.n(!0),this.colorPickerClose=new r.n(!0),this.colorPickerCancel=new r.n(!0),this.colorPickerSelect=new r.n(!0),this.colorPickerChange=new r.n(!1),this.cpCmykColorChange=new r.n(!0),this.cpPresetColorsChange=new r.n(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(t){this.inputChange(t)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(t){t.cpToggle&&!this.cpDisabled&&(t.cpToggle.currentValue?this.openDialog():t.cpToggle.currentValue||this.closeDialog()),t.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(t.colorPicker.currentValue),this.dialog.setColorFromString(t.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(t.cpPresetLabel||t.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let t=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const e=this.injector.get(this.appRef.componentTypes[0],r.r.NULL);e!==r.r.NULL?(t=e.vcRef||e.viewContainerRef||this.vcRef,t===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor.")):this.viewAttachedToAppRef=!0}const e=this.cfr.resolveComponentFactory(qI);if(this.viewAttachedToAppRef)this.cmpRef=e.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const n=r.D.fromResolvedProviders([],t.parentInjector);this.cmpRef=t.createComponent(e,0,n,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass),this.dialog=this.cmpRef.instance,this.vcRef!==t&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(t){this.cpCmykColorChange.emit(t)}stateChanged(t){this.cpToggleChange.emit(t),t?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(t,e=!0){this.ignoreChanges=e,this.colorPickerChange.emit(t)}colorSelected(t){this.colorPickerSelect.emit(t)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const t=this.elRef.nativeElement,e=this.cpIgnoredElements.filter(e=>e===t);this.cpDisabled||e.length||("undefined"!=typeof document&&t===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(t){this.dialog?this.dialog.setColorFromString(t.target.value,!0):(this.colorPicker=t.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(t){this.cpInputChange.emit(t)}sliderChanged(t){this.cpSliderChange.emit(t)}sliderDragEnd(t){this.cpSliderDragEnd.emit(t)}sliderDragStart(t){this.cpSliderDragStart.emit(t)}presetColorsChanged(t){this.cpPresetColorsChange.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(r.r),r.Lb(r.j),r.Lb(r.g),r.Lb(r.Q),r.Lb(r.l),r.Lb(UI))},t.\u0275dir=r.Gb({type:t,selectors:[["","colorPicker",""]],hostBindings:function(t,e){1&t&&r.Vb("click",(function(){return e.handleClick()}))("focus",(function(){return e.handleFocus()}))("input",(function(t){return e.handleInput(t)}))},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[r.xb]}),t})(),HI=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},providers:[UI],imports:[[at]]}),t})();function zI(t,e){if(1&t&&(r.Ob(0,"div",8),r.Ob(1,"span",9),r.jc(2),r.Nb(),r.Ob(3,"span",10),r.jc(4),r.Nb(),r.Mb(5,"br"),r.Ob(6,"span",11),r.jc(7),r.Yb(8,"date"),r.Nb(),r.Nb()),2&t){const t=e.$implicit;r.zb(1),r.hc("color",t.color),r.zb(1),r.lc("",t.user," "),r.zb(1),r.hc("color",t.color),r.zb(1),r.kc(t.message),r.zb(3),r.lc("",r.Zb(8,7,t.timeStamp.toDate(),"medium"),": ")}}let WI=(()=>{class t{constructor(t){this.db=t,this.title="hmwk11",t.collection("chat",t=>t.orderBy("timeStamp")).valueChanges().subscribe(t=>{this.messageArray=t}),this.user=localStorage.getItem("user"),this.color=localStorage.getItem("color")}ngOnInIt(){}add(){this.db.collection("/chat").add({user:this.user,message:this.message,color:this.color,timeStamp:Ni.a.firestore.Timestamp.now()})}handleUser(){localStorage.setItem("user",this.user)}handleColor(){localStorage.setItem("color",this.color)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(YE))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-root"]],decls:20,vars:7,consts:[["class","messages",4,"ngFor","ngForOf"],["id","navbar",1,"user-input"],[1,"inputName",3,"ngModel","ngModelChange","keyup"],[1,"color-input",3,"ngModel","colorPicker","ngModelChange","colorPickerClose","colorPickerChange"],[1,"inputMessage",3,"ngModel","ngModelChange","keyup.enter"],[3,"click"],["id","sticky-footer"],[1,"container","text-center"],[1,"messages"],[1,"span2"],[1,"span3"],[1,"span1"]],template:function(t,e){1&t&&(r.Ob(0,"h1"),r.jc(1,"Chat App"),r.Nb(),r.Ob(2,"h4"),r.jc(3," Enter your name, font color, and message:"),r.Nb(),r.Mb(4,"br"),r.ic(5,zI,9,10,"div",0),r.Ob(6,"div",1),r.Ob(7,"label"),r.jc(8,"Name: "),r.Nb(),r.Ob(9,"input",2),r.Vb("ngModelChange",(function(t){return e.user=t}))("keyup",(function(){return e.handleUser()})),r.Nb(),r.Ob(10,"label"),r.jc(11," Color: "),r.Nb(),r.Ob(12,"input",3),r.Vb("ngModelChange",(function(t){return e.color=t}))("colorPickerClose",(function(){return e.handleColor()}))("colorPickerChange",(function(t){return e.color=t})),r.Nb(),r.Ob(13,"label"),r.jc(14," Message: "),r.Nb(),r.Ob(15,"input",4),r.Vb("ngModelChange",(function(t){return e.message=t}))("keyup.enter",(function(){return e.add()})),r.Nb(),r.Ob(16,"button",5),r.Vb("click",(function(){return e.add()})),r.jc(17," Enter "),r.Nb(),r.Nb(),r.Ob(18,"footer",6),r.Mb(19,"div",7),r.Nb()),2&t&&(r.zb(5),r.ac("ngForOf",e.messageArray),r.zb(4),r.ac("ngModel",e.user),r.zb(3),r.hc("background",e.color),r.ac("ngModel",e.color)("colorPicker",e.color),r.zb(3),r.ac("ngModel",e.message))},directives:[et,oO,lO,ZO,BI],pipes:[st],styles:[".user-input[_ngcontent-%COMP%]{position:fixed;bottom:0;background-color:grey;width:100%;height:40px;overflow:scroll;padding-top:5px;padding-left:5px}h4[_ngcontent-%COMP%]{padding-bottom:15px;border-bottom:1px solid #000;margin-bottom:-10px}.sticky[_ngcontent-%COMP%]{position:fixed;top:0;width:100%}#sticky-footer[_ngcontent-%COMP%]{flex-shrink:none}footer[_ngcontent-%COMP%]{position:absolute fixed;color:grey;width:100%;height:40px;bottom:0}.span1[_ngcontent-%COMP%]{font-size:10px;padding-right:10px}.span2[_ngcontent-%COMP%]{font-size:16px}.span3[_ngcontent-%COMP%]{font-size:20px}.messages[_ngcontent-%COMP%]{margin:10px}button[_ngcontent-%COMP%]{border-radius:1em;border:1px solid #000;padding-right:10px;padding-left:10px;margin-left:10px}button[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.enterMessage[_ngcontent-%COMP%]{background-color:grey}label[_ngcontent-%COMP%]{font-size:20px;border:#000}.inputName[_ngcontent-%COMP%]{width:150px;font-size:15px}.inputMessage[_ngcontent-%COMP%]{width:500px;font-size:15px}.span3[_ngcontent-%COMP%]{background-color:#d3d3d3;border-radius:10px;border:1.5px solid grey;padding:5px 10px}input[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #000;margin-left:5px;margin-right:5px}input[_ngcontent-%COMP%]:hover{border:2px solid #00f}.color-input[_ngcontent-%COMP%]{width:75px}"]}),t})();const KI={apiKey:"AIzaSyANCeaF7D7c0AP2KO32ogzTZ1EG0xQ-LEQ",authDomain:"cs336-hmwk11-chatapp.firebaseapp.com",databaseURL:"https://cs336-hmwk11-chatapp.firebaseio.com",projectId:"cs336-hmwk11-chatapp",storageBucket:"cs336-hmwk11-chatapp.appspot.com",messagingSenderId:"859646486351",appId:"1:859646486351:web:04939ea34683b225dac73a",measurementId:"G-3E605CDMG6"};let GI=(()=>{class t{}return t.\u0275mod=r.Jb({type:t,bootstrap:[WI]}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[Vt,xi,PE.a.initializeApp(KI),JE,tI,at,HI]]}),t})();Object(r.T)(),Lt().bootstrapModule(GI).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u}));var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);